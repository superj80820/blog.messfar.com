<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>York Lin&#39;s blog</title>
        <link>http://localhost:1313/</link>
        <description>Recent content on York Lin&#39;s blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-tw</language>
        <lastBuildDate>Mon, 25 Mar 2024 00:00:00 +0800</lastBuildDate><atom:link href="http://localhost:1313/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>System Design ç³»åˆ—</title>
        <link>http://localhost:1313/post/system-design/</link>
        <pubDate>Mon, 25 Mar 2024 00:00:00 +0800</pubDate>
        
        <guid>http://localhost:1313/post/system-design/</guid>
        <description>&lt;img src="http://localhost:1313/post/system-design/exchange-arch.png" alt="Featured image of post System Design ç³»åˆ—" /&gt;&lt;h2 id=&#34;clean-architecture&#34;&gt;Clean Architecture
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/c3we5K6.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/c3we5K6.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è»Ÿé«”ä¸–ç•Œé›–ç„¶æ²’æœ‰silver bulletï¼Œä½†æˆ‘å€‘é‚„æ˜¯æœŸå¾…æœ‰é«˜æ“´å±•æ€§ã€æ¸¬è©¦æ€§ã€ç¶­è­·æ€§çš„ç³»çµ±ï¼Œæˆ‘å°‡ç³»çµ±åˆ†ç‚ºrepositoryã€usecaseã€deliveryä¸‰å±¤ï¼Œä¸¦ä¾ç…§domain interfaceé€²è¡Œå½¼æ­¤çš„ç›¸ä¾ï¼Œä»¥æ»¿è¶³å¤§å¤šæƒ…å¢ƒçš„éœ€æ±‚&lt;/p&gt;
&lt;h3 id=&#34;æ•™å­¸&#34;&gt;æ•™å­¸
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.notion.so/Backend-Clean-Architecture-efbeffa8389345aeb0adc1a974975657?pvs=21&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä½ çš„ Backend å¯ä»¥æ›´æœ‰å½ˆæ€§ä¸€é» - Clean Architecture æ¦‚å¿µç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.notion.so/Golang-Clean-Architecture-d3354aeb1ea84e66bd3f9254f2930617?pvs=21&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¥”æ”¾çš„ Golangï¼Œå»éš±è—è‘—æœ‰ç´€å¾‹çš„æ¶æ§‹ï¼ - Clean Architecture å¯¦ä½œç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.notion.so/Backend-Clean-Architecture-ad17b69f653b4f31a6dc2ffb120fc5f2?pvs=21&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è®“ä½ çš„ Backend è¬ç‰©çš†è™›ï¼Œè¬äº‹çš†å¯æ¸¬ - Clean Architecture æ¸¬è©¦ç¯‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ’®åˆç³»çµ±&#34;&gt;æ’®åˆç³»çµ±
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://raw.githubusercontent.com/superj80820/system-design/master/doc/exchange-arch.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://raw.githubusercontent.com/superj80820/system-design/master/doc/exchange-arch.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å°‡å¾Œç«¯&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/system-design/tree/master/exchange&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;exchange domain&lt;/a&gt;èˆ‡é–‹æºå‰ç«¯&lt;a class=&#34;link&#34; href=&#34;https://github.com/gitbitex/gitbitex-web&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gitbitex-web&lt;/a&gt;ä¸²æ¥&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é è¦½ç¶²é (â—åƒ…ç”¨æœ€ä½æ•ˆèƒ½é‹è¡Œé è¦½ï¼Œä¸æ˜¯ production é‹ä½œè¦æ ¼): &lt;a class=&#34;link&#34; href=&#34;https://preview.exchange.messfar.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://preview.exchange.messfar.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¯é”åˆ° 100,000PRSã€‚æ’®åˆå¼•æ“ä»¥è¨˜æ†¶é«”è¨ˆç®—&lt;/li&gt;
&lt;li&gt;å¯å›æ”¾äº‹ä»¶ã€‚ä»¥ event sourcing çš„æ–¹å¼å¯¦ç¾ï¼Œæ’®åˆå¼•æ“ç‚ºè®€å– event çš„æœ‰é™ç‹€æ…‹æ©Ÿï¼Œå¯ warm backup å¤šå° server è½å– eventï¼Œä¾†é”åˆ° high availability&lt;/li&gt;
&lt;li&gt;å¯åˆ†æ•£å¼ã€‚ä¸åŒçš„domainå¯éƒ¨ç½²è‡³ä¸åŒæ©Ÿå™¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;å£“æ¸¬&#34;&gt;å£“æ¸¬
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/V7KFvvC.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/V7KFvvC.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å–®æ©Ÿå•Ÿå‹• serverã€mysqlã€kafkaã€redisã€mongodbï¼Œä¸¦é€²è¡Œè²·è³£å–®æ“åˆï¼Œä¸¦ä»¥k6å£“æ¸¬:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;exchange æ©Ÿå™¨: EC2 c5.18xlarge&lt;/li&gt;
&lt;li&gt;k6 æ©Ÿå™¨: EC2 m5.8xlarge&lt;/li&gt;
&lt;li&gt;RPS (max): 102,988.52&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœå°‡ mysql æˆ– kafka ç­‰æœå‹™ç¨ç«‹å‡ºä¾†ï¼Œç†è«–ä¸Šå¯ç”¨æ›´ä¾¿å®œçš„æ©Ÿå™¨&lt;/p&gt;
&lt;h3 id=&#34;æ•™å­¸-1&#34;&gt;æ•™å­¸
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¦‚ä½•è¨­è¨ˆä¸€å€‹æ’®åˆç³»çµ±&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-2-sequence&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Sequence å®šåºæ¨¡çµ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-3-asset&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Asset è³‡ç”¢æ¨¡çµ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-4-order&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Order è¨‚å–®æ¨¡çµ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-5-matching&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Matching æ’®åˆæ¨¡çµ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-6-clearing&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Clearing æ¸…ç®—æ¨¡çµ„&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/posts/system-design-7-integration&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ•´åˆæ’®åˆç³»çµ±&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>é—œæ–¼æˆ‘</title>
        <link>http://localhost:1313/page/about/</link>
        <pubDate>Mon, 22 Jan 2024 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/page/about/</guid>
        <description>&lt;h1 id=&#34;york-lin&#34;&gt;York Lin
&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Nickname: é«’æ¡¶å­&lt;/li&gt;
&lt;li&gt;Role: Backend Engineering&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-short-intro&#34;&gt;ğŸ‘‹ &lt;strong&gt;Short intro&lt;/strong&gt;
&lt;/h2&gt;&lt;h3 id=&#34;-programming&#34;&gt;ğŸ“š Programming
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Golang&lt;/li&gt;
&lt;li&gt;Node.js, JavaScript, Python&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;-backend&#34;&gt;ğŸ”§ Backend
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Kubernetes, Docker, Microservices&lt;/li&gt;
&lt;li&gt;RESTful API, Websocket, GRPC&lt;/li&gt;
&lt;li&gt;ELK, Grafana, Prometheus&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;-db&#34;&gt;ğŸ® DB
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;MySQL, PostgreSQL&lt;/li&gt;
&lt;li&gt;MongoDB, AWS DynamoDB, Redis&lt;/li&gt;
&lt;li&gt;AWS S3&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;-mq&#34;&gt;ğŸ”Œ MQ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Kafka, RabbitMQ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-projects&#34;&gt;ğŸ› ï¸ &lt;strong&gt;Projects&lt;/strong&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/system-design?tab=readme-ov-file#matching-system&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Matching System&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Web page preview (â—Operated with minimal performance for preview purposes, not in production specifications): &lt;a class=&#34;link&#34; href=&#34;https://preview.exchange.messfar.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://preview.exchange.messfar.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Support 100,000 RPS. The matching engine calculates in memory&lt;/li&gt;
&lt;li&gt;Support event replay. Implemented via event sourcing, the matching engine acts as a finite state machine reading events, allowing warm backup across multiple servers to listen to events, achieving high availability&lt;/li&gt;
&lt;li&gt;Support distributed architecture. Different domains can be deployed on different machines&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-articles&#34;&gt;ğŸ§  &lt;strong&gt;Articles&lt;/strong&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/users/20122925/ironman/3537&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes, Clean Architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/users/20122925/ironman/4685&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Golang Design Pattern&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-get-in-touch&#34;&gt;ğŸ€ &lt;strong&gt;Get in touch&lt;/strong&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.messfar.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@superj80820&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.linkedin.com/in/yorklin&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Linkedin&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Design Pattern ç³»åˆ—</title>
        <link>http://localhost:1313/post/design-pattern/</link>
        <pubDate>Wed, 01 Sep 2021 00:00:00 +0800</pubDate>
        
        <guid>http://localhost:1313/post/design-pattern/</guid>
        <description>&lt;img src="http://localhost:1313/post/design-pattern/cover.png" alt="Featured image of post Design Pattern ç³»åˆ—" /&gt;</description>
        </item>
        <item>
        <title>æ–‡ç« åˆ—è¡¨</title>
        <link>http://localhost:1313/page/archives/</link>
        <pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/page/archives/</guid>
        <description></description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/abstract-factory-pattern%E8%86%9C%E6%8B%9C%E9%82%A3%E5%80%8B%E5%B7%A5%E5%BB%A0%E4%B9%8B%E7%A5%9E%E5%90%A7-46a8d3edda1947f3890fc8859de9f802/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/abstract-factory-pattern%E8%86%9C%E6%8B%9C%E9%82%A3%E5%80%8B%E5%B7%A5%E5%BB%A0%E4%B9%8B%E7%A5%9E%E5%90%A7-46a8d3edda1947f3890fc8859de9f802/</guid>
        <description>&lt;h1 id=&#34;abstract-factory-patternè†œæ‹œé‚£å€‹å·¥å» ä¹‹ç¥å§&#34;&gt;Abstract Factory Patternï¼Œè†œæ‹œé‚£å€‹å·¥å» ä¹‹ç¥å§ï¼
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 16, 2021&lt;/p&gt;
&lt;p&gt;å·¥å» æ¨¡å¼ä¸»è¦æœ‰ä¸‰ç¨®ä¸åŒçš„å¯¦ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Simple Factory Pattern&lt;/li&gt;
&lt;li&gt;Factory Method Pattern&lt;/li&gt;
&lt;li&gt;Abstract Factory Pattern&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™ä¸‰ç¨®å¯¦ä½œç”±ç°¡å–®åˆ°è¤‡é›œï¼Œä»Šå¤©æœƒä»‹ç´¹ Factory Method Pattern å»¶ä¼¸çš„ Abstract Factory Pattern&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/f0JAz1I.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/f0JAz1I.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;(æ–‡å‰µç³»çš„çœ‹åˆ°æˆ‘ç•«çš„ UML å¾Œç•«äº†ä¸€å¼µä»–ç†è§£åœ–ï¼Œæ©â€¦çœŸæ»´æ£’XD)&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-abstract-factory-pattern&#34;&gt;ä»€éº¼æ˜¯ Abstract Factory Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡æ€§è³ªç›¸åŒç”¢å“é›†åˆèµ·ä¾†ç”±ä¸€å€‹å·¥å» ç”Ÿç”¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wLdpWi9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/wLdpWi9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å„ªé»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¦åˆ&lt;strong&gt;é–‹é–‰åŸå‰‡&lt;/strong&gt;ï¼Œèˆ‡ Factory Method Pattern ç›¸åŒï¼Œåœ¨æ–°å¢ç”¢å“æ™‚ä¸å¿…ä¿®æ”¹ function å¯¦ä½œ(å°ä¿®æ”¹å°é–‰)ï¼Œä½†å¯ä»¥é€éä¸åŒå·¥å» ä¾†æ–°å¢(å°æ“´å……é–‹æ”¾)&lt;/li&gt;
&lt;li&gt;å¯é¿å… Factory Method Pattern ä¸€å€‹ç”¢å“å°±è¦ä¸€å€‹å·¥å» å°è‡´å·¥å» éå¤šçš„å•é¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼ºé»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”±æ–¼å·¥å» ç‚ºä¸€ç¾¤ç”¢å“çš„é›†åˆï¼Œå¦‚æœä½ è¦æ–°å¢ä¸€å€‹ç”¢å“ï¼Œå¿…é ˆåœ¨æ¯å€‹å·¥å» éƒ½æ–°å¢æ­¤ç”¢å“ï¼Œæˆæœ¬æœƒå¾ˆå¤§ã€‚é€™ç¨±ç‚º&lt;strong&gt;é–‹é–‰åŸå‰‡çš„å‚¾æ–œæ€§&lt;/strong&gt;ï¼Œå³ã€Œæ–°å¢æœ‰ä¸€ç¾¤ç”¢å“çš„å·¥å» å¾ˆç°¡å–®ï¼ˆå‚¾å‘æ­¤ç›®çš„ï¼‰ï¼Œä½†æ–°å¢ä¸€å€‹ç”¢å“è‡³é›†åˆå¾ˆå›°é›£ã€&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;æˆ‘å€‘ä¿®æ”¹æ˜¨å¤©çš„æƒ…å¢ƒï¼Œä½¿ç”¨è€…æƒ³è¦æœ‰å€‹ã€ŒéŠæˆ²æˆ¿ã€ï¼Œä½¿ç”¨è€…é™¤äº†è¦éŠæˆ²ä¸»æ©Ÿï¼Œé‚„è¦éŠæˆ²ç”¢å“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¦ç”Ÿç”¢éŠæˆ²ä¸»æ©Ÿèˆ‡é›»è¦–çµ¦ä½¿ç”¨è€…ï¼Œä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“ã€Œå¦‚ä½•ç”Ÿç”¢ CPUã€é¡¯ç¤ºæ™¶ç‰‡ã€éŠæˆ²è£½ä½œã€ï¼Œä½¿ç”¨è€…åªéœ€è¦ç²å¾—æ­¤ç”¢å“å°±è¡Œã€‚&lt;/li&gt;
&lt;li&gt;è²· Sony ç³»åˆ—çš„ä¸»æ©Ÿï¼Œå°±æœƒè²· PS ç›¸é—œçš„éŠæˆ²ï¼›è²·ä»»å¤©å ‚ç³»åˆ—çš„ä¸»æ©Ÿï¼Œå°±æœƒè²· Switch ç›¸é—œçš„éŠæˆ²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;å¥—ç”¨åˆ°ä¸Šæ–¹çš„ UML åœ–å¾Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yhtIaJt.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/yhtIaJt.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å€‘çš„å·¥å»  interface
ä¸åƒæ˜¨å¤©åªæ˜¯&lt;strong&gt;å–®ç´”ç”Ÿç”¢éŠæˆ²ä¸»æ©Ÿ&lt;/strong&gt;ï¼Œè€Œæ˜¯è¦&lt;strong&gt;ç”Ÿç”¢éŠæˆ²å±‹ç›¸é—œçš„ç”¢å“&lt;/strong&gt;ï¼Œæ‰€ä»¥æ”¹åç‚º&lt;code&gt;GameRoomFactory{}&lt;/code&gt;ï¼Œè£¡é ­&lt;code&gt;.GameMachineFactory()&lt;/code&gt;å¯ä»¥ç”Ÿç”¢ä¸»æ©Ÿï¼Œ&lt;code&gt;.GameFactory()&lt;/code&gt;å¯ä»¥ç”Ÿç”¢éŠæˆ²ã€‚&lt;/p&gt;
&lt;p&gt;è€Œå·¥å» ç”Ÿç”¢çš„ä¸»æ©Ÿèˆ‡éŠæˆ²ï¼Œä¹Ÿåˆ†åˆ¥æŠ½è±¡å‡ºå…©å€‹ interface&lt;code&gt;Game&lt;/code&gt;èˆ‡&lt;code&gt;GameMachine&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è€…åªç®¡ã€ŒæŠŠä¸»æ©ŸæŠ±å›å®¶(&lt;code&gt;.GameMachineFactory()&lt;/code&gt;)ã€èˆ‡ã€Œå–å¾—éŠæˆ²ä¾†ç©(&lt;code&gt;.GameFactory()&lt;/code&gt;)ã€ï¼Œå¯¦éš›æœƒç²å¾—ä»€éº¼ä¸»æ©Ÿèˆ‡éŠæˆ²å®Œå…¨çœ‹ä½¿ç”¨è€…é¸æ“‡ Sony
é‚„æ˜¯ä»»å¤©å ‚ã€‚æ‰€ä»¥&lt;code&gt;User()&lt;/code&gt;æœƒåªä¾è³´æ–¼&lt;code&gt;GameRoomFactory{}&lt;/code&gt;interfaceï¼Œä¸¦ä¸ç›´æ¥å‘¼å«&lt;code&gt;SonyFactory{}&lt;/code&gt;æˆ–&lt;code&gt;NintendoFactory{}&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é¸æ“‡å“ç‰Œä¾†æ±ºå®šè¦ä»€éº¼æ¨£çš„ç”¢å“é›†ç¾¤ï¼Œé€™æ¨£çš„é›†ç¾¤åˆè¢«ç¨±ç‚ºã€Œç”¢å“æ—ã€ï¼Œåœ¨æŠ½è±¡å·¥å» å¸¸ç”¨æ­¤åè©ç¨±å‘¼ã€‚&lt;/p&gt;
&lt;p&gt;ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å®šç¾©æŠ½è±¡å·¥å» 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameRoomFactory&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachineFactory&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GameFactory&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å®šç¾©æŠ½è±¡ç”¢å“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¯¦ä½œç”¢å“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading cd...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addCDMachine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cd machine...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameFinalFantasy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;GameFinalFantasy&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;build&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;build game...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;GameFinalFantasy&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start game...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading cd...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addCDMachine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cd machine...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;addGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMario&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;GameMario&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;build&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;build game...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;GameMario&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start game...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¯¦ä½œå·¥å» 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SonyFactory&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SonyFactory&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachineFactory&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addCDMachine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SonyFactory&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GameFactory&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;GameFinalFantasy&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;build&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoFactory&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoFactory&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachineFactory&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addCDMachine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;addGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoFactory&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GameFactory&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;GameMario&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;build&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gameHomeFactory&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameRoomFactory&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gameMachine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gameHomeFactory&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachineFactory&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gameHomeFactory&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GameFactory&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gameMachine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SonyFactory&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/adapter-pattern%E7%B5%B1%E4%B8%80%E4%B8%8D%E5%90%8C%E7%94%A2%E5%93%81%E7%9A%84%E4%BB%8B%E9%9D%A2-b514f7bcd0044a86a81d67ae4479cb0f/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/adapter-pattern%E7%B5%B1%E4%B8%80%E4%B8%8D%E5%90%8C%E7%94%A2%E5%93%81%E7%9A%84%E4%BB%8B%E9%9D%A2-b514f7bcd0044a86a81d67ae4479cb0f/</guid>
        <description>&lt;h1 id=&#34;adapter-patternçµ±ä¸€ä¸åŒç”¢å“çš„ä»‹é¢&#34;&gt;Adapter Patternï¼Œçµ±ä¸€ä¸åŒç”¢å“çš„ä»‹é¢
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 20, 2021&lt;/p&gt;
&lt;p&gt;Creational å»ºç«‹ç›¸é—œçš„ patterns å·²ç¶“å‘Šä¸€æ®µè½ï¼Œæ¥ä¸‹ä¾†è¦é€²å…¥ Structural çµæ§‹æ¨¡å¼ç›¸é—œçš„ patternsï¼Œä¸»è¦ç›®çš„åœ¨&lt;strong&gt;è¨­è¨ˆå‡ºä½è€¦åˆçš„ç‰©ä»¶é—œä¿‚&lt;/strong&gt;ï¼Œæœƒä»¥ Adapter Pattern ä½œç‚ºé–‹é ­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-adapter-pattern&#34;&gt;ä»€éº¼æ˜¯ Adapter Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡ä¸åŒç”¢å“ä¸ä¸€æ¨£çš„ä½¿ç”¨æ–¹å¼çµ±ä¸€ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥ç”¨çµ±ä¸€çš„æ–¹å¼ä½¿ç”¨ä¸åŒç”¢å“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¸‚é¢ä¸Šæœ‰å¾ˆå¤šä¸åŒçš„ usb æ¥å£ï¼Œæ¯”å¦‚ type-aã€type-cã€micro b ç­‰ç­‰ï¼Œå¦‚æœæˆ‘çš„é›»è…¦åªæ”¯æ´ type-a
çš„æ¥å£ï¼Œé‚£å°±éœ€è¦ä¸€å€‹&lt;strong&gt;adapter(è½‰æ›å™¨)&lt;/strong&gt;ï¼Œå°‡ type-cã€micro b&lt;strong&gt;ä¸åŒ&lt;/strong&gt;çš„æ¥å£è½‰æ›æˆ&lt;strong&gt;çµ±ä¸€&lt;/strong&gt;çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯« code ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œç³»çµ±å»ºæ§‹æ™‚ï¼Œå¦‚æœæœ‰å¤šå€‹ä¸åŒçš„å¥—ä»¶ï¼Œè™•ç†çš„æƒ…å¢ƒç›¸åŒï¼Œä½†æ–¹æ³•åç¨±ä¸åŒï¼Œå»ºè­°ä»¥ Adapter Pattern ä¾†å¯¦ä½œï¼Œé™¤äº†å¯ä»¥å½ˆæ€§çš„æ›¿æ›å¥—ä»¶ï¼Œä¹Ÿå¯ä»¥é¿å…ç³»çµ±è¢«å¥—ä»¶ç¶å®šã€‚&lt;/p&gt;
&lt;p&gt;ä»€éº¼æ˜¯ç³»çµ±è¢«å¥—ä»¶ç¶å®šï¼Ÿå°±å¥½åƒé›»è…¦æ‰€æœ‰çš„æ¥å£éƒ½æ’è‘— type-a çš„è¨­å‚™ï¼Œè€Œå¾ä¾†ä¸ç”¨ adapterï¼Œå¦‚æœæœ‰å¤©éœ€ä½¿ç”¨ type-c çš„è¨­å‚™ï¼Œé‚£é™¤äº†æŠŠæ’å£æ‹”é™¤æ›æˆ adapter åˆ¥ç„¡ä»–æ³•ï¼Œé‚£å¦‚æœæˆ‘å€‘äº‹å…ˆå°±æ˜¯ç”¨ adater æ’è‘—é›»è…¦ï¼Œæœªä¾†è¦ç”¨ type-c çš„è¨­å‚™å°±ä¸éœ€è¦æ‹”é™¤çš„é€™ä¸€æ®µ(å³æ›´æ”¹å¯¦ä½œ)&lt;/p&gt;
&lt;p&gt;UML åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/p7vnnZc.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/p7vnnZc.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ä¸­&lt;code&gt;AdapteeA{}&lt;/code&gt;ã€&lt;code&gt;AdapteeB{}&lt;/code&gt;éƒ½æœ‰å„è‡ªçš„æ–¹æ³•ï¼Œå¦‚æœ user è¦ä½¿ç”¨ä»–å€‘ï¼Œå¿…é ˆè¦æœ‰ä¸€å€‹çµ±ä¸€è¦ç¯„ï¼Œå³æ˜¯&lt;code&gt;Target&lt;/code&gt; interfaceï¼Œ&lt;code&gt;AdapterA{}&lt;/code&gt;ã€&lt;code&gt;AdapterB{}&lt;/code&gt;éµå¾ªè‘—è¦ç¯„å°‡&lt;code&gt;AdapteeA{}&lt;/code&gt;ã€&lt;code&gt;AdapteeB{}&lt;/code&gt;å„è‡ªçš„æ–¹æ³•è½‰æ›æˆ&lt;code&gt;Target.methodForUser()&lt;/code&gt;æ–¹æ³•çµ¦ user ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨è€…è²·äº†ä¸€å€‹æ ¼é¬¥éŠæˆ²å¤§æ–ï¼Œé€™å€‹å¤§æ–å¯ä¾› PS5 èˆ‡ Switch å…©ç¨®ä¸åŒçš„æ™¶ç‰‡ä½¿ç”¨ï¼Œå» å•†åœ¨è¨Šè™Ÿå‚³éä¸Šï¼Œéœ€è¨­è¨ˆä¸€å€‹ adapter è½‰æ›å™¨ï¼Œå°‡å¤§æ–çš„æŒ‡ä»¤å¯å¥—ç”¨åœ¨ä¸åŒçš„è£ç½®ä¸Šã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/7zaEdsL.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/7zaEdsL.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SignalHandler&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ClickButton&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ClickPS5Button&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;click ps5 button&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Adapter&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Adapter&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ClickButton&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ClickPS5Button&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ClickSwitchButton&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;click switch button&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwitchAdapter&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SwitchAdapter&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ClickButton&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ClickSwitchButton&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateSignalHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;platform&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SignalHandler&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;signalHandler&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SignalHandler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;platform&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ps5&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;signalHandler&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Adapter&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;switch&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;signalHandler&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;SwitchAdapter&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;switchMachine&lt;/span&gt;: &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Switch&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;signalHandler&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;signalHandler&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateSignalHandler&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ps5&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;signalHandler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ClickButton&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ–¼&lt;code&gt;PS5{}&lt;/code&gt;ã€&lt;code&gt;Switch{}&lt;/code&gt;å„è‡ªé»é¸æŒ‰éˆ•çš„æ–¹å¼ä¸åŒï¼Œæ‰€ä»¥è¨­è¨ˆäº†&lt;code&gt;PS5Adapter{}&lt;/code&gt;ã€&lt;code&gt;SwitchApater{}&lt;/code&gt;ä¸¦ä¾ç…§&lt;code&gt;SignalHandler&lt;/code&gt;interface å°‡åŠŸèƒ½è½‰æ›å¯¦ä½œè‡³&lt;code&gt;ClickButton()&lt;/code&gt;ï¼Œä½¿ç”¨è€…ç”±æ–¼åªä¾è³´&lt;code&gt;SignalHandler&lt;/code&gt; interfaceï¼Œä¸éœ€ç†è§£å¯¦éš›&lt;code&gt;PS5{}&lt;/code&gt;ã€&lt;code&gt;Switch{}&lt;/code&gt;çš„é»é¸æŒ‰éˆ•çš„æ–¹å¼ï¼Œåªéœ€é¸æ“‡å¹³å°å¾Œå‰µå»ºå¥½&lt;code&gt;signalHandler&lt;/code&gt;ï¼Œä¸¦é»é¸å³å¯ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/algo-%E9%9A%A8%E7%AD%86-86f57ecd943b4daf81a556fa59191f0e/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/algo-%E9%9A%A8%E7%AD%86-86f57ecd943b4daf81a556fa59191f0e/</guid>
        <description>&lt;h1 id=&#34;algo-éš¨ç­†&#34;&gt;Algo éš¨ç­†
&lt;/h1&gt;&lt;p&gt;Tags: Algorithm, éš¨ç­†
Date: September 2, 2023&lt;/p&gt;
&lt;h3 id=&#34;leetcode&#34;&gt;Leetcode
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/0283-move%20zeros%207d51da3409874d968872f8b3cf8b139c.md&#34; &gt;0283-move zeros&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;algoexpert&#34;&gt;Algoexpert
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/algoexpert-class-photos%202c7196856ba04789a9b82a4af2f87c55.md&#34; &gt;algoexpert-class-photos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/algoexpert-minimum-waiting-time%2033a9bc6a5925436ab92d22beba5b2bbf.md&#34; &gt;algoexpert-minimum-waiting-time&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­é é¢&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/0283-move%20zeros%207d51da3409874d968872f8b3cf8b139c.md&#34; &gt;0283-move zeros&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/algoexpert-class-photos%202c7196856ba04789a9b82a4af2f87c55.md&#34; &gt;algoexpert-class-photos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/algoexpert-minimum-waiting-time%2033a9bc6a5925436ab92d22beba5b2bbf.md&#34; &gt;algoexpert-minimum-waiting-time&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/bridge-pattern%E6%A9%8B%E6%8E%A5%E4%BA%BA%E9%96%93%E8%88%87%E9%AD%94%E7%95%8C%E7%9A%84%E6%AC%A1%E5%85%83%E9%96%80-614fc9736f6a47099a49dd0c5a4786e8/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/bridge-pattern%E6%A9%8B%E6%8E%A5%E4%BA%BA%E9%96%93%E8%88%87%E9%AD%94%E7%95%8C%E7%9A%84%E6%AC%A1%E5%85%83%E9%96%80-614fc9736f6a47099a49dd0c5a4786e8/</guid>
        <description>&lt;h1 id=&#34;bridge-patternæ©‹æ¥äººé–“èˆ‡é­”ç•Œçš„æ¬¡å…ƒé–€&#34;&gt;Bridge Patternï¼Œæ©‹æ¥äººé–“èˆ‡é­”ç•Œçš„æ¬¡å…ƒé–€
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 21, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-bridge-pattern&#34;&gt;ä»€éº¼æ˜¯ Bridge Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡æŠ½åƒèˆ‡å¯¦ç¾åˆ†é›¢ï¼Œè®“å½¼æ­¤è®ŠåŒ–äº’ä¸å½±éŸ¿&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/w7WGbeT.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/w7WGbeT.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;PS5 æœ‰è‘— PS5WithCD èˆ‡ PS5WithDigital å…©å€‹ç‰ˆæœ¬&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/heRatBv.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/heRatBv.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½¿ç”¨å‚³çµ±çš„ç¹¼æ‰¿ï¼Œæˆ‘å€‘è¦åœ¨ PS5WithCD èˆ‡ PS5WithDigital ä¸Šæ–°å¢ä¸åŒçš„æ‰‹æŠŠæ¬¾å¼ï¼Œåˆè¦å†å€‹åˆ¥æ–°å¢å…©å€‹é¡åˆ¥ï¼Œä½†å·²å•é¡Œçš„æœ¬è³ªä¾†èªªï¼Œé€™æ˜¯ä»¶å¾ˆå¥‡æ€ªçš„äº‹æƒ…ï¼Œåªæ˜¯æ–°å¢ä¸åŒçš„æ‰‹æŠŠå»è¦åšå‡ºæ–°çš„
PS5ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/8rrI85E.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/8rrI85E.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é‚£å¦‚æœè¦å†æ–°å¢ä¸åŒçš„æ‰‹æŠŠé…ä¸åŒçš„ Sony è¢å¹•ï¼Œé€™æ¨£åˆè¦æ–°å¢æ›´å¤šçš„é¡åˆ¥ï¼Œé€™æ¨£å°±ä½¿å¾—ã€Œä¸åŒçš„å¯¦ç¾å½±éŸ¿åˆ°äº† PS5 é€™å€‹ç‰©ä»¶çš„æŠ½è±¡ã€ï¼Œæˆ‘å€‘éœ€è¨­è¨ˆä¸€å€‹æ–¹å¼é¿å…é€™ç¨®æƒ…å½¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/hVifdGu.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/hVifdGu.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodA&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodB&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodC&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodD&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerA&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodA&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerA&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodB&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerA&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodC&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerA&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodD&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerB&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodA&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodB&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodC&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;MethodD&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Play&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Controller&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Controller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodA&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Controller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodB&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Controller&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Play&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Controller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodC&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Controller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MethodD&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerA&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Play&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ControllerB&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Play&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘å€‘å°‡æ–æ¡¿å®šç¾©äº†ä¸€å€‹&lt;code&gt;Controller&lt;/code&gt;interfaceï¼Œè€Œ&lt;code&gt;PS5Machine{}&lt;/code&gt;å¯¦éš›çš„å¯¦ä½œéƒ½æ˜¯ä¾è³´æ–¼æ­¤ interfaceï¼Œè—‰ç”±&lt;code&gt;PS5Machine.SetController()&lt;/code&gt;ä¾†ä»»æ„è®Šæ›æ–æ¡¿ï¼Œåªè¦ç¬¦åˆ interface çš„è¦ç¯„å³å¯ï¼Œä¸éœ€è¦ç‚ºäº†ä¸åŒçš„æ–æ¡¿è€Œæ–°å¢æ–°çš„ structã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/builder-pattern%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E7%9A%84%E5%BB%BA%E9%80%A0%E7%94%A2%E5%93%81-85b54cd781fc4a6eb44916a57b513e26/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/builder-pattern%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E7%9A%84%E5%BB%BA%E9%80%A0%E7%94%A2%E5%93%81-85b54cd781fc4a6eb44916a57b513e26/</guid>
        <description>&lt;h1 id=&#34;builder-patternä¸€æ­¥ä¸€æ­¥çš„å»ºé€ ç”¢å“&#34;&gt;Builder Patternï¼Œä¸€æ­¥ä¸€æ­¥çš„å»ºé€ ç”¢å“
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 17, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-builder-pattern&#34;&gt;ä»€éº¼æ˜¯ Builder Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡å»ºé€ ç‰©ä»¶çš„å¯¦ä½œæ‹†é–‹ï¼Œç”±ä½¿ç”¨è€…è¦ºå¾—è¦é¸æ“‡å»ºé€ ä»€éº¼ï¼Œä¾†ä¸€æ­¥ä¸€æ­¥å»ºé€ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼Œç•¶å‰µå»º PS5 æ™‚ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;hasCPU&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;hasGPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæœ‰è¨±å¤šé¡å¤–çš„é¸é …ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;CPUCores&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;haså¤§æ–&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;hasè—ç‰™è€³æ©Ÿ&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°±æœƒç™¼ç¾é¡å¤–çš„é¸é …éœ€é€éé›¶å€¼(zero value)ä¾†è§£æ±ºï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€™ä½¿å¾—å»ºæ§‹ PS5 çš„ function é›£ä»¥å¿«é€Ÿç†è§£å…¶ä¸­çš„æ„ç¾©ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥éœ€è¦é¡å¤–å°‡é€™äº›æ­¥é©Ÿæ‹†é™¤ï¼Œå†ç”±ä½¿ç”¨è€…æ±ºå®šæ˜¯å¦è¦åŸ·è¡Œï¼Œä¸¦ä¸”å°‡é€™äº›æ­¥é©Ÿæ‹†åˆ†ï¼Œä¹Ÿä½¿å¾—å»ºæ§‹
function ä¸è‡³æ–¼éé•·ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Setå¤§æ–&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;).&lt;span style=&#34;color:#75715e&#34;&gt;// Setè—ç‰™è€³æ©Ÿ(true) ä¸åŸ·è¡Œå°±ä¸æœƒæœ‰è—ç‰™è€³æ©Ÿ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å„ªé»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°‡å¿…è¦çš„å»ºæ§‹åƒæ•¸æ”¾åœ¨ create functionï¼Œé¡å¤–çš„åƒæ•¸æ”¾åœ¨ set functionï¼Œèƒ½åœ¨ç¨‹å¼å½ˆæ€§æ™‚ä¹Ÿæ“æœ‰å¯è®€æ€§&lt;/li&gt;
&lt;li&gt;ä¸ä½¿å»ºæ§‹ function éæ–¼è¤‡é›œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¨­è¨ˆä¸Šé€šå¸¸æœ‰&lt;strong&gt;Product&lt;/strong&gt;ã€&lt;strong&gt;Director&lt;/strong&gt;ã€&lt;strong&gt;Builder Interface&lt;/strong&gt;ã€&lt;strong&gt;ConcreteBuilder&lt;/strong&gt;ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Product: å¯¦éš›ç”¢å“&lt;/li&gt;
&lt;li&gt;Director: æ“ä½œ Builder ä¾†ç”Ÿç”¢ç”¢å“çš„ç‰©ä»¶&lt;/li&gt;
&lt;li&gt;Builder Interface: ç”Ÿç”¢ç”¢å“çš„ç‰©ä»¶çš„ interfaceï¼Œç”±æ–¼æœ‰æ­¤ interfaceï¼Œå¯ä»¥è®“ Director ä½¿ç”¨ä¸åŒ ConcreteBuilder ä¾†ç”Ÿç”¢ç‰©ä»¶&lt;/li&gt;
&lt;li&gt;ConcreteBuilder: å¯¦éš›ç”Ÿç”¢ç”¢å“çš„ç‰©ä»¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨è€…è³¼è²· PS5ï¼Œä¸¦ä¸”å…¶ä¸­æœ‰å¤šå€‹å‘¨é‚Šå¯ä»¥è³¼è²·ï¼Œä½¿ç”¨è€…è‡ªè¡Œæ±ºå®šè¦åŠ è³¼ä»€éº¼å‘¨é‚Š&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;UML åœ–å¾Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Hw7rYvQ.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/Hw7rYvQ.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;strings&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Builder&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;isBuy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Builder&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;SetBluetoothHeadphones&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;isBuy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Builder&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Build&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;                 &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;                 &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt;          &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;bluetoothHeadphones&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cpu&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;gpu&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt;     []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;withAccessories&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;bluetoothHeadphones&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;bluetoothHeadphones&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;withAccessories&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34; with &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;strings&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Join&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;accessories&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;, &amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading...play%s!\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;withAccessories&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Director&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Builder&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Builder&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5Director&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;concretePS5Builder&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Director&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Director&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Builder&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;concretePS5Builder&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Director&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Construct&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Builder&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;true&lt;/span&gt;).
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Build&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateConcretePS5Builder&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;isBuy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Builder&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;isBuy&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;FightingStick&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SetBluetoothHeadphones&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;isBuy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Builder&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;isBuy&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;bluetoothHeadphones&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;BluetoothHeadphones&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ConcretePS5Builder&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Build&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;concretePS5Builder&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateConcretePS5Builder&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Director&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5Director&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;concretePS5Builder&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Director&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Construct&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;CreateConcretePS5Builder()&lt;/code&gt;å»ºç«‹å¯¦éš›çš„ builder å¾Œï¼Œä¸Ÿå…¥&lt;code&gt;PS5Director{}&lt;/code&gt;ï¼Œè€Œ&lt;code&gt;PS5Director{}&lt;/code&gt;æœƒåœ¨é€é&lt;code&gt;Construct()&lt;/code&gt;ä¾†æ“ä½œ builder å» set ps5ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç™¼ç¾å¿…å¡«çš„æ¬„ä½åœ¨&lt;code&gt;CreateConcretePS5Builder()&lt;/code&gt;å°±å·²ç¶“å¡«å¥½ï¼Œå¦‚æœæ˜¯æœ‰å»ºæ§‹å­(construct)çš„èªè¨€ï¼Œä¾‹å¦‚ java å°±æœƒåœ¨å»ºæ§‹å­å…§åšå¥½ï¼Œç”±æ–¼ golang æ²’æœ‰ï¼Œæ‰€ä»¥æœƒç”¨ create function
ä¾†é”åˆ°æ­¤æ•ˆæœã€‚è€Œé¡å¤–çš„æ¬„ä½å³åœ¨&lt;code&gt;.SetXXX()&lt;/code&gt;function è¨­ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–åœ¨&lt;code&gt;.SetXXX()&lt;/code&gt;function å¾Œåˆæœƒ return è‡ªå·±çš„æ–¹å¼ç¨±ç‚º Fluent interfaceï¼Œæ­¤æ–¹æ³•å¯ä»¥åšå‡ºéˆå¼çš„å¯«æ³•ï¼Œå³&lt;code&gt;.SetXXX().SetXXX()&lt;/code&gt;ï¼Œå¯ä»¥è®“ set function çš„ä½¿ç”¨æ›´éˆæ´»ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/chain-of-responsibility%E5%B0%87%E5%AF%A6%E4%BD%9C%E9%80%8F%E9%81%8E%E4%B8%B2%E4%B8%B2%E6%A8%82%E4%B8%B2%E8%B5%B7%E4%BE%86-d5b4169bbc37466fbc8b10efad9fcdde/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/chain-of-responsibility%E5%B0%87%E5%AF%A6%E4%BD%9C%E9%80%8F%E9%81%8E%E4%B8%B2%E4%B8%B2%E6%A8%82%E4%B8%B2%E8%B5%B7%E4%BE%86-d5b4169bbc37466fbc8b10efad9fcdde/</guid>
        <description>&lt;h1 id=&#34;chain-of-responsibilityå°‡å¯¦ä½œé€éä¸²ä¸²æ¨‚ä¸²èµ·ä¾†&#34;&gt;Chain of Responsibilityï¼Œå°‡å¯¦ä½œé€éä¸²ä¸²æ¨‚ä¸²èµ·ä¾†
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 27, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-chain-of-responsibility&#34;&gt;ä»€éº¼æ˜¯ Chain of Responsibilityï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡ ifâ€¦else çš„è¡Œç‚ºæŠ½è±¡æˆç‰©ä»¶ï¼Œå°‡ ifâ€¦else
è¡Œç‚ºä»¥ç‰©ä»¶ä¸²æ¥çš„æ–¹å¼ä¾†æ“ä½œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;åœ¨ PS5 çš„è¨­è¨ˆä¸­ï¼Œå‡è¨­æœƒä¾ç…§ä¸åŒçš„éŠæˆ²èª¿æ•´æ™¶ç‰‡ï¼Œä¾‹å¦‚ 3D éŠæˆ²æœƒå•Ÿç”¨ 3D æ¨¡å¼ã€é«˜æ•ˆèƒ½é¡¯ç¤ºæœƒåŠ å¼·é¡¯ç¤ºæ™¶ç‰‡ã€éŸ³æ¨‚æœ‰ç”¨ç’°ç¹éŸ³æ•ˆæœƒå•Ÿç”¨éŸ³æ•ˆæ™¶ç‰‡çš„ç’°ç¹éŸ³æ•ˆæ¨¡å¼ï¼Œ&lt;/p&gt;
&lt;p&gt;æœƒè¨­è¨ˆæˆä»¥ä¸‹çš„ codeï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphType&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioType&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3DéŠæˆ²&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3Dæ¨¡å¼&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphType&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é«˜æ•ˆèƒ½é¡¯ç¤º&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åŠ å¼·é¡¯ç¤ºæ™¶ç‰‡&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioType&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç’°ç¹éŸ³æ•ˆ&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç’°ç¹éŸ³æ•ˆæ¨¡å¼&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœ€çµ‚å¹»æƒ³&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;:      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3DéŠæˆ²&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphType&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é«˜æ•ˆèƒ½é¡¯ç¤º&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioType&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç’°ç¹éŸ³æ•ˆ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœè¦åœ¨æ–°å¢ä¸åŒçš„æ™¶ç‰‡èª¿æ•´ï¼Œå°±å¿…é ˆä¿®æ”¹&lt;code&gt;PS5{}.PlayGame()&lt;/code&gt;çš„ codeï¼Œé€™ä¸ç¬¦åˆ&lt;strong&gt;é–‹é–‰åŸå‰‡&lt;/strong&gt;ï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹æ–¹å¼è§£æ±ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;å¯ä»¥åœ¨&lt;code&gt;PS5{}&lt;/code&gt;æ–°å¢ä¸€å€‹&lt;code&gt;middleware&lt;/code&gt; slice æˆå“¡ï¼Œä¸¦æŠŠèª¿æ•´æ™¶ç‰‡çš„é‚è¼¯éƒ½æŠ½è±¡æˆ&lt;code&gt;GameMiddleware()&lt;/code&gt;ã€&lt;code&gt;GraphMiddleware()&lt;/code&gt;ã€&lt;code&gt;AudioMiddleware()&lt;/code&gt;middlewaresï¼Œé€é&lt;code&gt;PS5{}.AddMiddleware()&lt;/code&gt;ä¾†æ–°å¢é€™äº› middlewareï¼Œåœ¨æœ€å¾Œ&lt;code&gt;PS5{}.PlayGame()&lt;/code&gt;çš„æ™‚å€™å†ä¸€æ¬¡é‹è¡Œæ‰€æœ‰ middleware ä¸¦ä¸”é‹è¡ŒéŠæˆ²&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;      &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphType&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioType&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;middlewares&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;middleware&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;middlewares&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;middlewares&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;middleware&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;middleware&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;middlewares&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;middleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3DéŠæˆ²&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3Dæ¨¡å¼&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GraphMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphType&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é«˜æ•ˆèƒ½é¡¯ç¤º&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åŠ å¼·é¡¯ç¤ºæ™¶ç‰‡&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AudioMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioType&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç’°ç¹éŸ³æ•ˆ&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç’°ç¹éŸ³æ•ˆæ¨¡å¼&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;AddMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;GameMiddleware&lt;/span&gt;).
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;AddMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphMiddleware&lt;/span&gt;).
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;AddMiddleware&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioMiddleware&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Game&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æœ€çµ‚å¹»æƒ³&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Type&lt;/span&gt;:      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3DéŠæˆ²&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;GraphType&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é«˜æ•ˆèƒ½é¡¯ç¤º&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;AudioType&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç’°ç¹éŸ³æ•ˆ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/clean-architecture-%E7%9A%84%E5%8A%9B%E9%87%8F%E7%84%A1%E7%97%9B%E5%BE%9E-restful-api-%E8%BD%89%E6%8F%9B%E6%88%90-grpc-se-ba3c091b6612424a8addd1882aed2729/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/clean-architecture-%E7%9A%84%E5%8A%9B%E9%87%8F%E7%84%A1%E7%97%9B%E5%BE%9E-restful-api-%E8%BD%89%E6%8F%9B%E6%88%90-grpc-se-ba3c091b6612424a8addd1882aed2729/</guid>
        <description>&lt;h1 id=&#34;clean-architecture-çš„åŠ›é‡ç„¡ç—›å¾-restful-api-è½‰æ›æˆ-grpc-server&#34;&gt;Clean Architecture çš„åŠ›é‡ï¼ç„¡ç—›å¾ Restful API è½‰æ›æˆ gRPC Server
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 27, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY13&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day13-clean-architecture-%E7%9A%84%E5%8A%9B%E9%87%8F-%E7%84%A1%E7%97%9B%E5%BE%9E-restful-api-%E8%BD%89%E6%8F%9B%E6%88%90-grpc-server-e1b64346aa14&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10245345&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œé‚„è¨˜å¾—åœ¨ DAY6~DAY8 çš„ Clean Architecture ç¯‡ï¼Œä½¿ç”¨äº† Restful
API ä¾†è¨­è¨ˆï¼Œä½†æ˜¯å¾Œä¾†çš„ä»‹ç´¹å»éƒ½æ˜¯ gRPCï¼Œå…¶å¯¦æœ€å¤§çš„ç›®çš„æ˜¯è¦ä»‹ç´¹æœ¬ç¯‡ï¼Œå°‡
Restful API Server æ›æˆ gRPC Serverï¼Œè€Œä½¿ç”¨ Clean Architecture
ä½ å¯ä»¥&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è®“æ›æ¡†æ¶æˆ–å¼•æ“åªéœ€æ›´å‹• delivery å±¤ï¼Œä¸å¼•éŸ¿å•†å‹™é‚è¼¯(Business
Logic)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœå°åŸæœ¬çš„ Server è¨­è¨ˆä¸æ¸…æ¥šï¼Œå¯ä»¥å…ˆé–±è®€ä»¥ä¸‹æ–‡ç« :&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;[DAY6&lt;/li&gt;
&lt;li&gt;ä½ çš„ Backend å¯ä»¥æ›´æœ‰å½ˆæ€§ä¸€é» - Clean Architecture æ¦‚å¿µç¯‡](&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[DAY7&lt;/li&gt;
&lt;li&gt;å¥”æ”¾çš„ Golangï¼Œå»éš±è—è‘—æœ‰ç´€å¾‹çš„æ¶æ§‹ï¼ - Clean Architecture
å¯¦ä½œç¯‡](&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;[DAY8&lt;/li&gt;
&lt;li&gt;è®“ä½ çš„ Backend è¬ç‰©çš†è™›ï¼Œè¬äº‹çš†å¯æ¸¬ - Clean Architecture
æ¸¬è©¦ç¯‡](&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY08&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY08&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ€éº¼-run-èµ·ä¾†&#34;&gt;æ€éº¼ run èµ·ä¾†ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;å»ºè­°å¤§å®¶ç›´æ¥å…ˆæŠŠ Server run èµ·ä¾†ï¼Œé€™æ¨£æœƒæ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œ&lt;/p&gt;
&lt;p&gt;è«‹å…ˆ clone &lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github-Example-Code&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY13/go-server
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker-compose up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/47oRFAw.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/47oRFAw.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸¦ä¸”å®‰è£&lt;a class=&#34;link&#34; href=&#34;https://github.com/uw-labs/bloomrpc/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Bloomrpc&lt;/a&gt;ä¾†æ¸¬è©¦ï¼Œä»–é¡ä¼¼æ–¼
gRPC ç•Œçš„ Postmanã€‚(ç•¶ç„¶ä½ ä¹Ÿå¯ä»¥å¯« gRPC client
ä¾†æ¸¬è©¦ï¼Œä¸éé€™é‚Šä»¥æœ‰ä»‹é¢çš„ tool ä¾†æ¸¬è©¦)&lt;/p&gt;
&lt;p&gt;å®‰è£å¥½å¾Œï¼Œå¯ä»¥åœ¨å·¦ä¸Šæ–¹çš„&lt;code&gt;+æŒ‰éˆ•&lt;/code&gt;ç›´æ¥ import protobuf çš„
schemaï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/IRVx7kr.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/IRVx7kr.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¿®æ”¹å¥½ gRPC Server çš„ URL
æˆ&lt;code&gt;localhost:6000&lt;/code&gt;å¾Œï¼Œé»é¸&lt;code&gt;ç¶ è‰²test&lt;/code&gt;æŒ‰éˆ•ï¼Œå³å¯çœ‹åˆ°
gRPC Server å·²ç¶“è™•ç†å®Œä½ çš„è«‹æ±‚ï¼Œä¸¦ä¸”å›å‚³ responseã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/JGhVBLw.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/JGhVBLw.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ï¼· owï¼Œå¯ä»¥ä½¿ç”¨ gRPC Server äº†ï¼Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å¯¦ä½œï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/QDH05Tt.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/QDH05Tt.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;çœŸçš„æœ‰é‚£éº¼å°‘ï¼Ÿï¼çœ‹çœ‹å°±çŸ¥é“ XDã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ-grpc-schema&#34;&gt;å¯¦ä½œ gRPC schema
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;syntax &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; digimon;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; Digimon {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; Create (CreateRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (CreateResponse) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; Query (QueryRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (QueryResponse) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; Foster (FosterRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (FosterResponse) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Requestsmessage CreateRequest {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;QueryRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;FosterRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Food&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  }&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  Food food &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Responsesmessage CreateResponse {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; status &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;QueryResponse&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; id &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; status &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;FosterResponse&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ Digimon service è£¡åˆ†åˆ¥æ–°å¢ 3 å€‹
methodï¼Œåˆ†åˆ¥æ˜¯&lt;code&gt;Create&lt;/code&gt;ã€&lt;code&gt;Query&lt;/code&gt;ã€&lt;code&gt;Foster&lt;/code&gt;ï¼Œä½ å¯ä»¥æŠŠä»–ç†è§£ç‚º
Restful API çš„ä¸‰å€‹ APIï¼Œä¸¦ä¸”åˆ†åˆ¥çµ¦ 3 å€‹ method å®šç¾©å¥½ request èˆ‡
responseï¼Œåœ¨ code ä¸­å¿…é ˆç¬¦åˆæ­¤ protobuf schema ä¾†å¯¦ä½œã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ-grpc-server&#34;&gt;å¯¦ä½œ gRPC Server
&lt;/h2&gt;&lt;p&gt;åœ¨ digimon/delivery è³‡æ–™å¤¾æ–°å¢ä¸€å€‹ grpc è³‡æ–™å¤¾ï¼Œä»–ä»£è¡¨äº†å¦ä¸€ç¨®å¼•æ“çš„
deliverï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/CQ0hVDM.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/CQ0hVDM.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯¦ä½œ&lt;code&gt;grpc_handler.go&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// go-server/digimon/delivery/grpc/grpc_handler.go

// ... å…¶ä»–ç¨‹å¼ç¢¼

// DigimonHandler ...
type DigimonHandler struct {
    DigimonUsecase domain.DigimonUsecase
    DietUsecase    domain.DietUsecase
    pb.UnimplementedDigimonServer
}

// NewDigimonHandler ...
func NewDigimonHandler(s *grpcLib.Server, digimonUsecase domain.DigimonUsecase, dietUsecase domain.DietUsecase) {
    handler := &amp;amp;DigimonHandler{
        DigimonUsecase: digimonUsecase,
        DietUsecase:    dietUsecase,
    }

    pb.RegisterDigimonServer(s, handler)
}

// Create ...
func (d *DigimonHandler) Create(ctx context.Context, req *pb.CreateRequest) (*pb.CreateResponse, error) {
    aDigimon := domain.Digimon{
        Name: req.GetName(),
    }
    if err := d.DigimonUsecase.Store(ctx, &amp;amp;aDigimon); err != nil {
        logrus.Error(err)
        return nil, status.Errorf(codes.Internal, &amp;#34;Internal error. Store failed&amp;#34;)
    }

    return &amp;amp;pb.CreateResponse{
        Id:     aDigimon.ID,
        Name:   aDigimon.Name,
        Status: aDigimon.Status,
    }, nil
}

// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨&lt;code&gt;Create()&lt;/code&gt;ä¸­ï¼Œä½¿ç”¨&lt;code&gt;req.GetName()&lt;/code&gt;ç²å¾—
Nameï¼Œä¸¦ä»¥&lt;code&gt;DigimonUsecase&lt;/code&gt;çš„&lt;code&gt;Store()&lt;/code&gt;ä¾†å„²å­˜ï¼Œèˆ‡åŸæœ¬
Restful API çš„ code åšæ¯”è¼ƒï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// go-server/digimon/delivery/http/digimon_handler.go

// ... å…¶ä»–ç¨‹å¼ç¢¼

// DigimonHandler ...
type DigimonHandler struct {
    DigimonUsecase domain.DigimonUsecase
    DietUsecase    domain.DietUsecase
}

// NewDigimonHandler ...
func NewDigimonHandler(e *gin.Engine, digimonUsecase domain.DigimonUsecase, dietUsecase domain.DietUsecase) {
    handler := &amp;amp;DigimonHandler{
        DigimonUsecase: digimonUsecase,
        DietUsecase:    dietUsecase,
    }

    e.GET(&amp;#34;/api/v1/digimons/:digimonID&amp;#34;, handler.GetDigimonByDigimonID)
    e.POST(&amp;#34;/api/v1/digimons&amp;#34;, handler.PostToCreateDigimon)
    e.POST(&amp;#34;/api/v1/digimons/:digimonID/foster&amp;#34;, handler.PostToFosterDigimon)
}

// PostToCreateDigimon ...
func (d *DigimonHandler) PostToCreateDigimon(c *gin.Context) {
    var body swagger.DigimonInfoRequest
    if err := c.BindJSON(&amp;amp;body); err != nil {
        logrus.Error(err)
        c.JSON(500, &amp;amp;swagger.ModelError{
            Code:    3000,
            Message: &amp;#34;Internal error. Parsing failed&amp;#34;,
        })
        return
    }
    aDigimon := domain.Digimon{
        Name: body.Name,
    }
    if err := d.DigimonUsecase.Store(c, &amp;amp;aDigimon); err != nil {
        logrus.Error(err)
        c.JSON(500, &amp;amp;swagger.ModelError{
            Code:    3000,
            Message: &amp;#34;Internal error. Store failed&amp;#34;,
        })
        return
    }

    c.JSON(200, swagger.DigimonInfo{
        Id:     aDigimon.ID,
        Name:   aDigimon.Name,
        Status: aDigimon.Status,
    })
}

// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;
&lt;p&gt;é™¤äº†äº¤ä»˜åƒæ•¸çµ¦ Usecase çš„æ–¹å¼ä¸åŒï¼Œå…¶ä»–é‚è¼¯å®Œå…¨ç›¸åŒï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å°çš„æ²’éŒ¯ï¼Œåœ¨ Restful API
ä¸­éœ€è¦ä»¥&lt;code&gt;swagger.DigimonInfoRequest&lt;/code&gt;æ­é…&lt;code&gt;c.BindJSON()&lt;/code&gt;ä¾†ç²å¾—
JSON
Bodyï¼Œæœ€å¾Œä¹Ÿä»¥&lt;code&gt;DigimonUsecase&lt;/code&gt;çš„&lt;code&gt;Store()&lt;/code&gt;ä¾†å„²å­˜ï¼Œæ‰€ä»¥ï¼Œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Delivery å±¤å–®ç´”å°±æ˜¯åœ¨å¯¦ä½œå¦‚ä½•æŠŠå¼•æ“çš„è³‡è¨Šäº¤ä»˜çµ¦ Usecase å±¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;å¾ˆå¯¦ç”¨å°å§ï¼é›–ç„¶ç•¶æˆ‘çŸ¥é“é€™æ¨£çš„æ¶æ§‹çš„æ™‚å€™ï¼Œæˆ‘å…§å¿ƒåå‘ä¸‹åœ– XD:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/6BnCS83.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/6BnCS83.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;(&lt;del&gt;æ»¿æ»¿çš„é‡æ§‹æ™‚é–“&lt;/del&gt;)&lt;/p&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/uw-labs/bloomrpc&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bloomrpc&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/command-pattern%E5%B0%87%E5%8B%95%E4%BD%9C%E5%B7%B2%E6%8C%87%E4%BB%A4%E4%B8%80%E5%80%8B%E4%B8%80%E5%80%8B%E5%AE%8C%E6%88%90-3e36064a8c1941c382e5a8c8a56e6a7b/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/command-pattern%E5%B0%87%E5%8B%95%E4%BD%9C%E5%B7%B2%E6%8C%87%E4%BB%A4%E4%B8%80%E5%80%8B%E4%B8%80%E5%80%8B%E5%AE%8C%E6%88%90-3e36064a8c1941c382e5a8c8a56e6a7b/</guid>
        <description>&lt;h1 id=&#34;command-patternå°‡å‹•ä½œå·²æŒ‡ä»¤ä¸€å€‹ä¸€å€‹å®Œæˆ&#34;&gt;Command Patternï¼Œå°‡å‹•ä½œå·²æŒ‡ä»¤ä¸€å€‹ä¸€å€‹å®Œæˆ
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 28, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-command-pattern&#34;&gt;ä»€éº¼æ˜¯ Command Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡å»ºç«‹æŒ‡ä»¤èˆ‡å¯¦éš›åŸ·è¡Œåˆ†é›¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;PS5 æœ‰ç‰¹å®šæ“ä½œ CPU æŒ‡ä»¤çš„å¯¦ä½œ&lt;code&gt;.ACommand()&lt;/code&gt;ã€&lt;code&gt;.BCommand()&lt;/code&gt;ï¼Œå¦‚æœç¾åœ¨åˆå¤šäº†æ–°çš„ç‰¹å®šæ“ä½œï¼Œå¿…é ˆä¿®æ”¹&lt;code&gt;PS5{}&lt;/code&gt;ï¼Œé€™ä¸ç¬¦åˆ&lt;strong&gt;é–‹é–‰åŸå‰‡&lt;/strong&gt;ï¼Œæˆ‘å€‘éœ€è¦æœ‰æ–¹æ³•æ»¿è¶³é–‹é–‰åŸå‰‡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ADoSomething&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a do something&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;BDoSomething&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;b do something&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;CDoSomething&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;c do something&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ACommand&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ADoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CDoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;BCommand&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ADoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BDoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ACommand&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BCommand&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;æ–°å¢&lt;code&gt;Command&lt;/code&gt;interfaceï¼Œè£¡é ­æœ‰&lt;code&gt;Execute()&lt;/code&gt;é€™å€‹ functionï¼Œä¸¦å¯¦ä½œ&lt;code&gt;ACommand{}&lt;/code&gt;ã€&lt;code&gt;BCommand{}&lt;/code&gt;ï¼Œ&lt;strong&gt;è®“æŒ‡ä»¤çš„å»ºç«‹å¾&lt;code&gt;PS5{}&lt;/code&gt;ä¸­åˆ†é›¢å‡ºä¾†&lt;/strong&gt;ï¼Œå³æ»¿è¶³é–‹é–‰åŸå‰‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¾Œé€é&lt;code&gt;PS5{}.SetCommand()&lt;/code&gt;ä¾†å°‡ç¬¦åˆ&lt;code&gt;Command&lt;/code&gt;interface çš„æŒ‡ä»¤è¨­å®šçµ¦ PS5ï¼Œå†é€é&lt;code&gt;PS5{}.DoCommand()&lt;/code&gt;é¸æ“‡è¦åŸ·è¡Œçš„æŒ‡ä»¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;ADoSomething&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a do something&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;BDoSomething&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;b do something&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;CDoSomething&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;c do something&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Command&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Execute&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ACommand&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ACommand&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Execute&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ADoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CDoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BCommand&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BCommand&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Execute&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ADoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BDoSomething&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;commands&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#a6e22e&#34;&gt;Command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SetCommand&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;command&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Command&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;commands&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;DoCommand&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;commands&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;].&lt;span style=&#34;color:#a6e22e&#34;&gt;Execute&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;aCommand&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ACommand&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;bCommand&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BCommand&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#a6e22e&#34;&gt;Command&lt;/span&gt;)}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SetCommand&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;aCommand&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SetCommand&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;bCommand&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DoCommand&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DoCommand&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/composite-pattern%E7%AE%A1%E7%90%86%E6%9C%89%E5%B1%A4%E6%AC%A1%E7%9A%84%E7%89%A9%E4%BB%B6%E5%80%91-13a0fe41ffdd43bab65d88011ef2d1f3/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/composite-pattern%E7%AE%A1%E7%90%86%E6%9C%89%E5%B1%A4%E6%AC%A1%E7%9A%84%E7%89%A9%E4%BB%B6%E5%80%91-13a0fe41ffdd43bab65d88011ef2d1f3/</guid>
        <description>&lt;h1 id=&#34;composite-patternç®¡ç†æœ‰å±¤æ¬¡çš„ç‰©ä»¶å€‘&#34;&gt;Composite Patternï¼Œç®¡ç†æœ‰å±¤æ¬¡çš„ç‰©ä»¶å€‘
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 24, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-composite-pattern&#34;&gt;ä»€éº¼æ˜¯ Composite Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡å–®ä¸€èˆ‡å¤šå€‹ç‰©ä»¶çš„ä½¿ç”¨æ–¹å¼çµ±ä¸€çµ¦ä½¿ç”¨è€…ä½¿ç”¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/yc1ENxj.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/yc1ENxj.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å‡è¨­ PS5 è¨­è¨ˆçš„æ¸¬è©¦éšæ®µï¼Œæœƒä»¥&lt;strong&gt;å–®æ ¸å¿ƒ&lt;/strong&gt;æˆ–&lt;strong&gt;å¤šæ ¸å¿ƒ&lt;/strong&gt;çš„ cpu ä¾†æ¸¬è©¦ï¼Œå–®æ ¸å¿ƒ cpu æ¸¬è©¦ä½¿ç”¨çš„æŒ‡ä»¤éœ€èˆ‡å¤šæ ¸å¿ƒ cpu ä½¿ç”¨çš„æŒ‡ä»¤ç›¸åŒï¼Œé€™æ¨£ PS5 å–®æ ¸èˆ‡å¤šæ ¸æ‰éƒ½å¯ä»¥æ‹¿ä¾†æ¸¬è©¦&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/lt1FiyX.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/lt1FiyX.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å€‘å…ˆå®šç¾©äº†&lt;code&gt;CPU&lt;/code&gt;interfaceï¼Œå–®æ ¸å¿ƒ cpu&lt;code&gt;SingleCPU{}&lt;/code&gt;èˆ‡å¤šæ ¸å¿ƒ cpu&lt;code&gt;MultiCPUs{}&lt;/code&gt;éƒ½ä»¥æ­¤ interface ä¾†å¯¦ä½œï¼Œ&lt;code&gt;PS5Start()&lt;/code&gt;ç›¸ä¾&lt;code&gt;CPU&lt;/code&gt;interfaceï¼Œ&lt;code&gt;SingleCPU{}&lt;/code&gt;èˆ‡&lt;code&gt;MultiCPUs{}&lt;/code&gt;éƒ½å¯ä»¥å¸¶å…¥ä¾†é‹è¡Œ&lt;code&gt;.Run()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MultiCPUs{}&lt;/code&gt;æœ‰&lt;code&gt;.AddSubCPU()&lt;/code&gt;å¯ä»¥æ–°å¢å¤šå€‹ cpu è‡³æ­¤ structï¼Œè€Œ&lt;code&gt;MultiCPUs{}.Run()&lt;/code&gt;æœƒå°‡å¤šå€‹ cpu ä¾ä¾é‹è¡Œã€‚&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SingleCPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;SingleCPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;run cpu&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MultiCPUs&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;SubCPUs&lt;/span&gt; []&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MultiCPUs&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SubCPUs&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MultiCPUs&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddSubCPU&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SubCPUs&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SubCPUs&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Start&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;singleCPU1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SingleCPU&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Start&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;singleCPU1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;singleCPU2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SingleCPU&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Start&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;singleCPU2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;multiCPUs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MultiCPUs&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;multiCPUs&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddSubCPU&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;singleCPU1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;multiCPUs&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddSubCPU&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;singleCPU2&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Start&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;multiCPUs&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/concurrency-patterns-%E8%9E%8D%E6%9C%83%E8%B2%AB%E9%80%9Agraceful-shutdown%E6%AD%A3%E7%A2%BA%E9%97%9C%E9%96%89%E5%90%84%E5%80%8B-18ae7507d391437abc5cf85b3666f569/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/concurrency-patterns-%E8%9E%8D%E6%9C%83%E8%B2%AB%E9%80%9Agraceful-shutdown%E6%AD%A3%E7%A2%BA%E9%97%9C%E9%96%89%E5%90%84%E5%80%8B-18ae7507d391437abc5cf85b3666f569/</guid>
        <description>&lt;h1 id=&#34;concurrency-patterns-èæœƒè²«é€šgraceful-shutdownæ­£ç¢ºé—œé–‰å„å€‹å®‡å®™çš„æ¬¡å…ƒé–€&#34;&gt;Concurrency Patterns èæœƒè²«é€šï¼‹Graceful Shutdownï¼Œæ­£ç¢ºé—œé–‰å„å€‹å®‡å®™çš„æ¬¡å…ƒé–€
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 12, 2021&lt;/p&gt;
&lt;p&gt;å‰ 11 å¤©å·²ç¶“å°‡å¸¸è¦‹çš„ concurrency patterns ä»‹ç´¹å®Œç•¢ï¼Œä»Šå¤©æˆ‘å€‘è¦ä»‹ç´¹çš„ä¸æ˜¯ patternsï¼Œè€Œæ˜¯åœ¨å¯¦å‹™ä½¿ç”¨ concurrency patterns è¦ç‰¹åˆ¥æ³¨æ„çš„äº‹é …ã€ŒGraceful Shutdownã€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯¦å‹™çš„ç³»çµ±è¨­è¨ˆä¸­ï¼Œæœƒå°‡å¤šå€‹ pattern
èåˆä»¥æ‡‰ä»˜è¤‡é›œçš„éœ€æ±‚ï¼Œæœ¬ç¯‡ç¨‹å¼ç¢¼å¾ˆé•·ï¼Œå¦‚æœç¯„ä¾‹éæ–¼è¤‡é›œï¼Œå»ºè­°å¯ä»¥å…ˆçœ‹ DAY 7 ~ DAY 11 çš„æ–‡ç« ï¼Œå…ˆä»¥è¼ƒå°çš„çŸ¥è­˜é»ä¾†ç†è§£ patternï¼Œå†é€²å…¥å¤šå€‹ pattern
çµåˆçš„æœ¬æ–‡ç« ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-graceful-shutdown&#34;&gt;ä»€éº¼æ˜¯ Graceful Shutdownï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å®‰å…¨çš„é—œé–‰æ­£åœ¨é‹è¡Œçš„ goroutineï¼Œå³ goroutine ç•¶å‰çš„ä»»å‹™é‹è¡Œå®Œç•¢å†é—œé–‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10270015&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 9ï¼šWorker Pool Patternï¼Œå°±ã€‚å¾ˆã€‚Poolã€‚&lt;/a&gt;ï¼Œæˆ–&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10268715&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 7ï¼šFan-Out Fan-In Patternï¼Œçœ‹å§ä¸–ç•Œï¼é€™å°±æ˜¯å¤šäººè§£æ±ºçš„åŠ›é‡ï¼&lt;/a&gt;çš„ pattern ä¸­ï¼Œå¦‚æœåœ¨é‹è¡Œæ™‚ç›´æ¥ä½¿ç”¨ ctrl+c é—œé–‰ç¨‹åºï¼Œæ­£åœ¨é‹è¡Œçš„ goroutine æœƒç›´æ¥é—œé–‰ï¼Œå°è‡´æ­£åœ¨è¢«æ¶ˆè²»çš„ job ä¸­æ–·ï¼Œé€™æ¨£æœƒé€ æˆç¨‹å¼ä¸å®‰å…¨ã€‚&lt;/p&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœæœ‰ç³»çµ±æ­£åœ¨å° DB é€²è¡Œ transactionï¼Œä½† server ç›´æ¥
shutdown äº†ï¼Œé‚£ transaction å°±ä¸æœƒ rollbackï¼Œæ•´å€‹ DB å°±æœƒåœåœ¨
transaction çš„ç‹€æ…‹ï¼Œé€ æˆç³»çµ±ä¸ç©©å®šï¼Œæˆ‘å€‘æœŸæœ›æ‡‰è©²æ˜¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;server æ”¶åˆ° shutdown çš„è«‹æ±‚å¾Œï¼Œåœæ­¢æ¥æ”¶æ–°çš„ requestsï¼Œå°‡ç¾æœ‰çš„ requests è™•ç†å®Œç•¢å¾Œ shutdown&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å»¶çºŒæ¨æ’­æ–°èç³»çµ±çš„æƒ…å¢ƒï¼Œå°‡æ–°çš„æ–°èç›´æ¥æ¨æ’­å‡ºå»ï¼Œé™¤äº†æ¨æ’­ç³»çµ±æ•ˆç‡è¦é«˜ï¼Œé‚„éœ€ç´€éŒ„æ¨æ’­å®Œæˆçš„æ™‚é–“ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–é‚„åŠ ä¸Šä»¥ä¸‹å„ç¨®æƒ…å¢ƒï¼Œé€™éƒ½éœ€è¦å‰é¢çš„ DAY 1 ~ DAY 11 çš„ pattern
è§€å¿µï¼Œæˆ‘å°‡å…¶ä¸­æ¯”è¼ƒæ ¸å¿ƒçš„ pattern ä¹Ÿå¯«å‡ºä¾†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æœƒæœ‰å¤šå€‹æ–°è producer è¼¸å…¥ï¼Œä¸¦æœ‰ä¸€å€‹ consumer ä¾†æ¶ˆè²»ï¼Œå³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10269446&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 8ï¼šProducer Consumer Pattern&lt;/a&gt;çš„è§€å¿µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;consumer æ¶ˆè²»è™•ç†å®Œç•¢å¾Œæœƒè¨˜éŒ„æ¨æ’­å®Œæˆçš„æ™‚é–“ï¼Œå³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10268715&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 7ï¼šFan-Out Fan-In Pattern&lt;/a&gt;çš„è§€å¿µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;consumer éœ€è¦æœ‰å¤šå€‹ worker ä¾†åšè€—æ™‚ä»»å‹™ï¼Œå³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10270015&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 9ï¼šWorker Pool Pattern&lt;/a&gt;çš„ worker è§€å¿µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;éœ€è¦ Graceful Shutdownï¼Œå³ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10270786&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 10ï¼šTwo-phase Termination Pattern&lt;/a&gt;å®‰å…¨é—œé–‰ goroutine çš„è§€å¿µ&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10271558&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 11ï¼šThread-Specific Storage Pattern&lt;/a&gt;context ä¾†æ§åˆ¶ goroutine ç”Ÿå‘½é€±æœŸçš„è§€å¿µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;æ•´é«”çš„é‹è¡Œåœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZoyWHMI.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ZoyWHMI.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚æ•´é«”ç¨‹å¼ç¢¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;context&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;os/signal&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;syscall&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsName&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;FinishTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartConsume&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Err&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				close(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;in&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			close(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartWorker&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;create worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬èˆ‡æŸserviceå»ºç«‹socketçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;&amp;lt;worker %d finish %s&amp;gt;&amp;gt;\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateWorkerPool&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;poolSize&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WaitGroup&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;poolSize&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;poolSize&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StartWorker&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	close(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateNewsSender&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;:  make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;:    make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt;: make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;&amp;lt;producer send %s&amp;gt;&amp;gt;\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateNewsCompleteLogger&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCompleteLogger&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;:         make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCompleteLogger&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartLog&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;&amp;lt;fan in news&amp;gt;&amp;gt; news %s is sent at %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsName&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FinishTime&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	close(&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cancel&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithCancel&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Background&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateNewsSender&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCompleteLogger&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateNewsCompleteLogger&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CreateWorkerPool&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¹Ÿä¸è¦åƒå¤ªæ’&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åºŠå‰æ˜æœˆå…‰&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç–‘ä¼¼åœ°ä¸Šéœœ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;èˆ‰é ­æœ›æ˜æœˆ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä½é ­æ€æ•…é„‰&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¸­åŸæœé›¨é‚‘è¼•å¡µ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å®¢èˆé’é’æŸ³è‰²æ–°&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å‹¸å›æ›´ç›¡ä¸€æ¯é…’&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¥¿å‡ºé™½é—œç„¡æ•…äºº&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StartConsume&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newsCompleteLogger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StartLog&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;termChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Signal&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;signal&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Notify&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;termChan&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;syscall&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SIGINT&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;syscall&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SIGTERM&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;termChan&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;================\nctrl+c event\n================&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cancel&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCompleteLogger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;concurrency-patterns&#34;&gt;Concurrency Patterns
&lt;/h3&gt;&lt;p&gt;èæœƒè²«é€š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LKaqj6g.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/LKaqj6g.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæ•´å€‹ç³»çµ±åˆ†åˆ¥æœ‰å…©å€‹ struct
&lt;code&gt;NewsSender{}&lt;/code&gt;èˆ‡&lt;code&gt;NewsCompleteLogger{}&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;          &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;         &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NewsSender{}&lt;/code&gt;æ“æœ‰
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;inputsChan{}&lt;/code&gt; èˆ‡ producer goroutine æºé€š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jobsChan{}&lt;/code&gt; å°‡æ”¶åˆ°çš„ä»»å‹™æœ worker ç™¼é€&lt;/li&gt;
&lt;li&gt;&lt;code&gt;resultsChan{}&lt;/code&gt; å°‡ worker
è™•ç†å®Œç•¢çš„æ–°èè³‡è¨Šèˆ‡&lt;code&gt;NewsCompleteLogger{}&lt;/code&gt;æºé€š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wg{}&lt;/code&gt;ç”¨ä¾†ç­‰å¾…æ‰€æœ‰ goroutine è™•ç†çµæŸ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NewsCompleteLogger{}&lt;/code&gt;æ“æœ‰
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;completeNews{}&lt;/code&gt;æ¥æ”¶&lt;code&gt;resultsChan{}&lt;/code&gt;çš„æ–°èè³‡è¨Š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;done&lt;/code&gt;ç­‰å¾…&lt;code&gt;completeNews{}&lt;/code&gt;æ¶ˆè²»å®Œç•¢å¾Œï¼Œç™¼é€è¨Šè™Ÿçš„
channel&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;NewsSender{}&lt;/code&gt;æœƒå¯¦ä½œ Producer Consumer Patternã€Worker Pool Patternã€Fan-Out Fan-In Pattern&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/6uOupT2.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/6uOupT2.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å°‡å¤šå€‹æ–°èè¼¸å…¥ç‚º Producer Consumer
Patternï¼Œé€é&lt;code&gt;ProduceToNewsSender()&lt;/code&gt;é€è‡³&lt;code&gt;newsSender.inputsChan{}&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;&amp;lt;producer send %s&amp;gt;&amp;gt;\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¹Ÿä¸è¦åƒå¤ªæ’&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åºŠå‰æ˜æœˆå…‰&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç–‘ä¼¼åœ°ä¸Šéœœ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;èˆ‰é ­æœ›æ˜æœˆ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä½é ­æ€æ•…é„‰&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ProduceToNewsSender&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¸­åŸæœé›¨é‚‘è¼•å¡µ&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å®¢èˆé’é’æŸ³è‰²æ–°&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å‹¸å›æ›´ç›¡ä¸€æ¯é…’&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¥¿å‡ºé™½é—œç„¡æ•…äºº&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œ&lt;code&gt;NewsSender.StartConsume()&lt;/code&gt;æ˜¯ä¸€å€‹ consumer ä¾†æ¶ˆè²»ï¼Œé€™æ˜¯å› ç‚º&lt;code&gt;newsSender.inputsChan{}&lt;/code&gt;æœƒå†å°‡æ¥æ”¶åˆ°çš„æ–°èå‚³é€è‡³&lt;code&gt;newsSender.jobsChan{}&lt;/code&gt;ä¾› worker pool è™•ç†ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartConsume&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;in&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;inputsChan&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Err&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				close(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;in&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			close(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€™äº› woker æœƒé å…ˆå•Ÿå‹•ï¼Œå³ Worker Pool Pattern çš„è§€å¿µï¼Œå·²é¿å…æ¯æ¬¡ä½¿ç”¨ goroutine éƒ½è¦åˆå§‹åŒ–&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartWorker&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;create worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬èˆ‡æŸserviceå»ºç«‹socketçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;jobsChan&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; !&lt;span style=&#34;color:#a6e22e&#34;&gt;ok&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;&amp;lt;worker %d finish %s&amp;gt;&amp;gt;\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;():
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;close worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateWorkerPool&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;poolSize&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WaitGroup&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;poolSize&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;poolSize&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StartWorker&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CreateWorkerPool&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ..
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¾Œæ–°èç¶“&lt;code&gt;newsSender.jobsChan{}&lt;/code&gt;åˆ° woker pool å†åˆ°&lt;code&gt;newsSender.resultsChan{}&lt;/code&gt;å³å½¢æˆäº† Fan-Out Fan-In Pattern&lt;/p&gt;
&lt;p&gt;&lt;code&gt;newsSender.resultsChan{}&lt;/code&gt;æœƒåœ¨äº¤çµ¦&lt;code&gt;newsCompleteLogger.StartLog()&lt;/code&gt;æœƒä¸æ–·æŠŠ&lt;code&gt;newsSender.resultsChan{}&lt;/code&gt;é€å‡ºçš„æ–°èæ™‚é–“è¨˜éŒ„ä¸‹ä¾†&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartLog&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;completeNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;lt;&amp;lt;fan in news&amp;gt;&amp;gt; news %s is sent at %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsName&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FinishTime&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	close(&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;graceful-shutdown&#34;&gt;Graceful Shutdown
&lt;/h3&gt;&lt;p&gt;å¤§å®¶æœƒç™¼ç¾ code ä¸­æ‰€æœ‰çš„ function éƒ½æœ‰å‚³å…¥ contextï¼Œå³æ˜¯éœ€è¦ç”¨&lt;code&gt;context.WithCancel()&lt;/code&gt;çš„æ–¹å¼ï¼Œå°åº•ä¸‹æ‰€æœ‰çš„ goroutine åˆ©ç”¨&lt;code&gt;ctx.Done()&lt;/code&gt;åšé—œé–‰ã€‚&lt;/p&gt;
&lt;p&gt;é€é&lt;code&gt;signal.Notify(termChan, syscall.SIGINT, syscall.SIGTERM)&lt;/code&gt;ä¾†ç¶å®š&lt;code&gt;ctrl+c&lt;/code&gt;çš„è¨Šè™Ÿï¼Œä¸¦ç­‰å¾…è§¸ç™¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è§¸ç™¼&lt;code&gt;ctrl+c&lt;/code&gt;å¾Œï¼Œå‘¼å«&lt;code&gt;cancel()&lt;/code&gt;å¾Œï¼Œå„å€‹ goroutine
çš„&lt;code&gt;ctx.Done()&lt;/code&gt;æœƒé–‹å§‹åŸ·è¡Œé—œé–‰ç¨‹åºï¼Œå¿…é ˆè¦æœ‰æ–¹æ³•ç­‰å¾…è‡³ã€Œæ‰€æœ‰ goroutine å·²ç¶“é—œé–‰ã€ï¼Œ&lt;code&gt;newsSender{}&lt;/code&gt;èˆ‡&lt;code&gt;newsCompleteLogger{}&lt;/code&gt;éƒ½æœ‰æ¡ç”¨&lt;code&gt;StopWait()&lt;/code&gt;å¯¦ä½œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsSender&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	close(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;resultsChan&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsCompleteLogger&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;cancel&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithCancel&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Background&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;termChan&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Signal&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;signal&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Notify&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;termChan&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;syscall&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SIGINT&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;syscall&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SIGTERM&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;termChan&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;================\nctrl+c event\n================&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cancel&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsSender&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCompleteLogger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StopWait&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;newsSender.StopWait()&lt;/code&gt;ï¼šè£¡é ­&lt;code&gt;c.wg.Wait()&lt;/code&gt;æœƒç­‰å¾…æ‰€æœ‰ goroutine çš„&lt;code&gt;c.wg.Done()&lt;/code&gt;é‹è¡Œï¼Œ&lt;code&gt;c.wg.Done()&lt;/code&gt;æ˜¯ç”±&lt;code&gt;ctx.Done()&lt;/code&gt;è§¸ç™¼ã€‚&lt;code&gt;c.wg.Wait()&lt;/code&gt;ç­‰å¾…å®Œç•¢å¾Œï¼Œé—œé–‰&lt;code&gt;newsSender.resultsChan{}&lt;/code&gt;åšå–„å¾Œå‹•ä½œ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;newsCompleteLogger.StopWait()&lt;/code&gt;ï¼šè£¡é ­&lt;code&gt;newsCompleteLogger.done{}&lt;/code&gt;æœƒç­‰å¾…å”¯ä¸€ä¸€å€‹ goroutine é‹è¡Œå®Œç•¢ï¼Œå³&lt;code&gt;newsCompleteLogger.StartLog()&lt;/code&gt;å°‡&lt;code&gt;newsSender.resultsChan{}&lt;/code&gt;éƒ½è®€å®Œçš„æ™‚å€™æœƒå°&lt;code&gt;newsCompleteLogger.done{}&lt;/code&gt;åš close&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;.StopWait()&lt;/code&gt;éƒ½åŸ·è¡Œå®Œç•¢å¾Œï¼Œå³æ‰€æœ‰ goroutine å°å‰©é¤˜çš„è¨Šæ¯éƒ½æ¶ˆè²»å®Œç•¢ï¼Œå³å¯å®‰å…¨çš„é—œé–‰ä¸»ç¨‹åº&lt;code&gt;main()&lt;/code&gt;ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/decorator-pattern%E5%B7%A7%E5%A6%99%E7%9A%84%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A%E5%A2%9E%E5%8A%A0%E6%96%B0%E5%8A%9F%E8%83%BD-a8af13c36c1646cead4266db235af68d/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/decorator-pattern%E5%B7%A7%E5%A6%99%E7%9A%84%E5%9C%A8%E6%96%B9%E6%B3%95%E4%B8%8A%E5%A2%9E%E5%8A%A0%E6%96%B0%E5%8A%9F%E8%83%BD-a8af13c36c1646cead4266db235af68d/</guid>
        <description>&lt;h1 id=&#34;decorator-patternå·§å¦™çš„åœ¨æ–¹æ³•ä¸Šå¢åŠ æ–°åŠŸèƒ½&#34;&gt;Decorator Patternï¼Œå·§å¦™çš„åœ¨æ–¹æ³•ä¸Šå¢åŠ æ–°åŠŸèƒ½
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 22, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-decorator-pattern&#34;&gt;ä»€éº¼æ˜¯ Decorator Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸ä»¥éœæ…‹ç¹¼æ‰¿è€Œæ˜¯ç”¨å‹•æ…‹çµ„åˆçš„æ–¹å¼å¢åŠ åŠŸèƒ½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/F77FKK5.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/F77FKK5.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ProductDecorator èˆ‡ ProductAã€ProductB é¡åˆ¥ä¸€æ¨£éƒ½æ˜¯ä»¥ Product interface å¯¦ä½œï¼Œä¸¦ä¸”æ“æœ‰ä¾ç…§ Product å®šç¾©çš„æˆå“¡ï¼Œæ‰€ä»¥åœ¨å‘¼å«&lt;code&gt;operation()&lt;/code&gt;æ™‚å°±å¯ä»¥å‘¼å«æˆå“¡çš„&lt;code&gt;operation()&lt;/code&gt;ä¸¦ä¸”å†æ–°å¢é¡å¤–çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;åœ¨ golang ä¸­æ²’æœ‰ç¹¼æ‰¿ï¼Œæ‰€ä»¥åœ¨ç¾æœ‰åŠŸèƒ½ä¸­æ–°å¢åŠŸèƒ½å…¶å¯¦å°±æ˜¯åˆ©ç”¨ Decorator Patternï¼Œä½†å¦‚æœåœ¨ java ä¸­ï¼Œæ™‚å¸¸ä½¿ç”¨ç¹¼æ‰¿ä¾†æ–°å¢åŠŸèƒ½ï¼Œä½†å¦‚æœéåº¦ä½¿ç”¨ç¹¼æ‰¿ï¼Œäº‹å¯¦ä¸Šæ²’æœ‰è¾¦æ³•é‡ç”¨ç¨‹å¼ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/I5zwNrK.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/I5zwNrK.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;PS5 ä¸»æ©Ÿ interface æœ‰&lt;code&gt;PS5.StartGPUEngine()&lt;/code&gt;ä¾†å•Ÿå‹•é¡¯ç¤ºæ™¶ç‰‡ï¼Œ&lt;code&gt;PS5WithCD{}&lt;/code&gt;ã€&lt;code&gt;PS5WithDigital{}&lt;/code&gt;éƒ½æœƒç¹¼æ‰¿æ­¤ interface ä¾†å¯¦ä½œï¼Œä½†å¦‚æœé€™æ™‚å€™è¦åœ¨é¡¯ç¤ºæ™¶ç‰‡ä¸Šæ–°å¢åŠ å¼·åŠŸèƒ½ï¼Œå°±éœ€è¦åœ¨ç¹¼æ‰¿ä¸€æ¬¡å°è‡´&lt;code&gt;PS5WithCDPlus{}&lt;/code&gt;ã€&lt;code&gt;PS5WithDigitalPlus{}&lt;/code&gt;çš„ç”¢ç”Ÿï¼Œä½†çœ‹æˆ‘å€‘è¦åšçš„äº‹æƒ…çš„æœ¬è³ªå°±æ˜¯ã€Œä¸€å€‹ã€æ–°å¢åŠ å¼·åŠŸèƒ½ï¼Œéœ€è¦ã€Œå…©å€‹ã€é¡æ˜¯å¤šé¤˜çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/YZrVKRR.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/YZrVKRR.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;StartGPUEngine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartGPUEngine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start normal gpu engine&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartGPUEngine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start normal gpu engine&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachinePlus&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachinePlus&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SetPS5Machine&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachinePlus&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;StartGPUEngine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StartGPUEngine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start plus plugin&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5MachinePlus&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachinePlus&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5Machine&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;{}, &lt;span style=&#34;color:#75715e&#34;&gt;// or PS5WithDigital{}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// ps5MachinePlus.SetPS5Machine(PS5WithDigital{}) // å¯ä»¥åœ¨æ›´æ›ä¸»æ©Ÿ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5MachinePlus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;StartGPUEngine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘å€‘å°‡åŠ å¼·åŠŸèƒ½å®šç¾©ç‚ºä¸€å€‹ struct &lt;code&gt;PS5MachinePlus{}&lt;/code&gt;ï¼Œé€™å€‹&lt;code&gt;PS5MachinePlus{}&lt;/code&gt;ä»‹é¢è·Ÿ&lt;code&gt;PS5WithCD{}&lt;/code&gt;ã€&lt;code&gt;PS5WithDigital{}&lt;/code&gt;ä»‹é¢éƒ½æ˜¯ä»¥&lt;code&gt;PS5&lt;/code&gt;interface ä¾†å¯¦ä½œçš„ï¼Œæ‰€ä»¥å¤–éƒ¨ä½¿ç”¨è€…å‘¼å«çš„æ™‚å€™ä»‹é¢æ˜¯æ²’æœ‰è®Šæ›´çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PS5MachinePlus{}&lt;/code&gt;æ“æœ‰&lt;code&gt;ps5Machine{}&lt;/code&gt;ï¼Œæ­¤æˆå“¡ä¾è³´&lt;code&gt;PS5&lt;/code&gt;interfaceï¼Œè®“&lt;code&gt;PS5WithCD{}&lt;/code&gt;ã€&lt;code&gt;PS5WithDigital{}&lt;/code&gt;éƒ½å¯ä»¥å¸¶å…¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PS5MachinePlus{}&lt;/code&gt;åœ¨å…§éƒ¨å¯¦ä½œ&lt;code&gt;StartGPUEngine()&lt;/code&gt;æ™‚ï¼Œæœƒä½¿ç”¨åˆ°&lt;code&gt;ps5Machine{}&lt;/code&gt;ï¼Œ&lt;code&gt;ps5Machine{}&lt;/code&gt;å¯ä»¥åœ¨å‰µå»º struct çš„æ™‚å€™å¸¶å…¥ï¼Œä¹Ÿå¯ä»¥é€é &lt;code&gt;SetPS5Machine()&lt;/code&gt;æ›¿æ›ï¼Œä»–æ˜¯&lt;strong&gt;å‹•æ…‹&lt;/strong&gt;å¸¶å…¥çš„ï¼Œé€™ä¹Ÿè®“ Decorator Pattern åœ¨ runtime æ›´åŠ å½ˆæ€§ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/docker-%E5%9C%A8%E6%89%8B%E6%9C%8D%E5%8B%99%E5%B8%B6%E8%91%97%E8%B5%B0---docker-%E7%AF%87-a6c075379e7e40a4a8a2604bd8b3f1d6/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/docker-%E5%9C%A8%E6%89%8B%E6%9C%8D%E5%8B%99%E5%B8%B6%E8%91%97%E8%B5%B0---docker-%E7%AF%87-a6c075379e7e40a4a8a2604bd8b3f1d6/</guid>
        <description>&lt;h1 id=&#34;docker-åœ¨æ‰‹æœå‹™å¸¶è‘—èµ°---docker-ç¯‡&#34;&gt;Docker åœ¨æ‰‹ï¼Œæœå‹™å¸¶è‘—èµ° - Docker ç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 17, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY03&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day3-docker-%E5%9C%A8%E6%89%8B-%E6%9C%8D%E5%8B%99%E5%B8%B6%E8%91%97%E8%B5%B0-docker-%E7%AF%87-4df722084265&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10237717&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œæ¥ä¸‹ä¾†è¦ä»‹ç´¹å¦‚ä½•ç”¨ Golang + Docker
è¨­è¨ˆä¸€å€‹&lt;code&gt;æ•¸ç¢¼è›‹&lt;/code&gt;å¾®æœå‹™ï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯ç”¢ç”Ÿå„å€‹æ•¸ç¢¼ä¸–ç•Œçš„æ•¸ç¢¼è›‹ï¼&lt;/p&gt;
&lt;h2 id=&#34;æ‰€éœ€çš„æ¶æ§‹&#34;&gt;æ‰€éœ€çš„æ¶æ§‹
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fRsQy4d.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/fRsQy4d.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ­¤ Service çš„è¨­è¨ˆä¸¦ä¸è¤‡é›œï¼Œå–®ç´”ä»¥ä¸€å€‹ Restful API Golang Server
é…åˆä¸€å€‹ PostgreSQL è³‡æ–™åº«ä¾†å¯¦ä½œã€‚&lt;/p&gt;
&lt;p&gt;è€Œé€™å€‹ PostgreSQL ä½ ä»¥ç‚ºè¦ç”¨å®‰è£çš„å—ï¼Ÿä¸ï¼æˆ‘å€‘ä»¥ Docker
ä¾†å•Ÿå‹•ä»–ï¼Œé€™æ¸›ä½äº†å®‰è£çš„è¨±å¤šæ™‚é–“æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;é€™ç¯‡æ–‡ç« æœƒå…ˆä»‹ç´¹ Dockerï¼Œç•¢ç«Ÿè¦å…ˆæœ‰å€‹æ­£å¸¸çš„ç’°å¢ƒï¼Œæ‰èƒ½å¥½å¥½é–‹ç™¼ï½&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-docker&#34;&gt;ä»€éº¼æ˜¯ Docker
&lt;/h2&gt;&lt;p&gt;ç°¡å–®ä¾†èªªï¼Œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker æ˜¯ä¸€å€‹å®¹å™¨åŒ–ç’°å¢ƒï¼Œä½ å¯ä»¥åœ¨æ­¤ç’°å¢ƒé‹ä½œä½ çš„ç¨‹å¼èˆ‡è³‡æº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è½èµ·ä¾†æ˜¯ä¸æ˜¯å¾ˆåƒæˆ‘å€‘å¸¸è¦‹åˆ°çš„ VMï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ˜¯çš„å…¶å¯¦ä»–èˆ‡ VM ç›¸ç•¶ç›¸åƒï¼Œä½† VM æ˜¯å°‡&lt;code&gt;æ•´å€‹æ ¸å¿ƒéƒ½éš”é›¢&lt;/code&gt;ï¼Œè€Œ
Docker æ˜¯&lt;code&gt;åªéš”é›¢è³‡æºä¸¦ä½¿ç”¨åŸç³»çµ±çš„æ ¸å¿ƒ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨ä»¥ä¸‹çš„åœ–ä¾†è§£è¬›æœƒæ¯”è¼ƒæ¸…æ¥š:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wTJkcr9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/wTJkcr9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Image from How does a Docker engine
replace a hypervisor and guest OS?&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ° VM
æ–¹é™¤äº†åŸæœ¬çš„ç³»çµ±&lt;code&gt;Host Operating System&lt;/code&gt;ä»¥å¤–ï¼Œæ¯å€‹å®¹å™¨éƒ½ä½¿å†å¤šæ–°å¢ä¸€å€‹&lt;code&gt;Guest OS&lt;/code&gt;ç³»çµ±ï¼Œè€Œå®¹å™¨çš„ç³»çµ±èˆ‡åŸç³»çµ±æºé€šéƒ½è¦é€é&lt;code&gt;Hypervisor&lt;/code&gt;ä¾†åšæ©‹æ¨‘ï¼Œé€™ä¹Ÿå°è‡´äº†åœ¨
VM è£¡é¢è·‘ç¨‹å¼éƒ½æœƒå¡åˆ°ç‚¸ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ Docker
æ˜¯ç›´æ¥ä½¿ç”¨åŸç³»çµ±ï¼Œåªä¸é&lt;code&gt;App&lt;/code&gt;èˆ‡&lt;code&gt;Bins/Libs&lt;/code&gt;ç­‰ç¨‹å¼èˆ‡è³‡æºéš”é›¢äº†èµ·ä¾†ï¼Œé€™æ¨£å°±å¯ä»¥é”åˆ°&lt;code&gt;å¹¾ä¹ä¸æ¶ˆè€—æ•ˆèƒ½&lt;/code&gt;åˆå¯ä»¥&lt;code&gt;éš”é›¢ç’°å¢ƒ&lt;/code&gt;çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;h2 id=&#34;éš”é›¢ç’°å¢ƒçš„å¥½è™•&#34;&gt;éš”é›¢ç’°å¢ƒçš„å¥½è™•
&lt;/h2&gt;&lt;p&gt;ä¸çŸ¥é“å¤§å®¶æœ‰æ²’æœ‰ä¸­æ¯’éï¼Œæˆ‘å°±æœ‰ä¸€æ¬¡é›»è…¦ä¸­äº†æ¯’ï¼Œå°è‡´æƒ³è¦å®‰è£éŠæˆ²å»æ€éº¼éƒ½è£ä¸èµ·ä¾†ã€‚æœ€å¾Œæˆ‘é‡çŒäº†æ•´å°é›»è…¦ï¼Œæ‰æŠŠéŠæˆ²å®‰è£å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸­æ¯’æ™‚å› ç‚º&lt;code&gt;ç’°å¢ƒå·²ç¶“æœ‰æ‰€è®Šå‹•&lt;/code&gt;ï¼Œå°è‡´å®‰è£&lt;code&gt;ç¨‹å¼ç„¡æ³•åŸ·è¡Œ&lt;/code&gt;ï¼Œè€Œé‡çŒå¾Œå› ç‚º&lt;code&gt;ç’°å¢ƒå·²åˆå§‹åŒ–&lt;/code&gt;ï¼Œæ‰€ä»¥å®‰è£&lt;code&gt;ç¨‹å¼é †åˆ©åŸ·è¡Œ&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœèƒ½ç¢ºä¿æ¯æ¬¡åŸ·è¡Œçš„&lt;code&gt;ç’°å¢ƒéƒ½æ˜¯ä¸€è‡´çš„&lt;/code&gt;ï¼Œé‚£ç¨‹å¼åŸ·è¡Œçš„æ•ˆæœå°±æœƒæ›´åŠ å®Œå–„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä»¥å¾€æˆ‘å€‘åªèƒ½é€é VM ä¾†é”åˆ°ä¸€è‡´åŒ–çš„æ•ˆæœï¼Œä½†ç¾åœ¨æœ‰äº† Docker
æˆ‘å€‘å¯ä»¥æ›´åŠ ä¸è€—æ•ˆèƒ½çš„éš”é›¢ç’°å¢ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£-docker&#34;&gt;å®‰è£ Docker
&lt;/h2&gt;&lt;p&gt;å®‰è£çš„éƒ¨åˆ†åœ¨&lt;code&gt;Docker&lt;/code&gt;çš„å®˜ç¶²éƒ½å¯«å¾—å¾ˆæ¸…æ¥šäº†ï¼Œæœ¬ç¯‡ä¸»è¦è¨è«–å¯¦ä½œï¼Œæˆ‘é€™é‚Šå°±æŠŠä¸‰ç¨®ç³»çµ±çš„å®‰è£ä»‹ç´¹éƒ½è²¼ä¸Šä¾†ï¼Œä¸èªªæ˜æ­¤éƒ¨åˆ†äº†ï½&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.docker.com/engine/install/ubuntu/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ubuntu&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.docker.com/docker-for-windows/install/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Windows&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.docker.com/docker-for-mac/install/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Mac&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é€é-docker-å•Ÿå‹•-postgresql&#34;&gt;é€é Docker å•Ÿå‹• PostgreSQL
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY03&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Example
code&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¾åœ¨ Docker å·²ç¶“æ˜¯ä¸€é–€é¡¯å­¸ï¼Œç›´æ¥ç”¨ Google
æœå°‹&lt;code&gt;PostgreSQL DockerHub&lt;/code&gt;å°±å¯ä»¥æ‰¾åˆ°&lt;a class=&#34;link&#34; href=&#34;https://hub.docker.com/_/postgres&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜æ–¹&lt;/a&gt;å·²å°‡ç¨‹å¼èˆ‡è³‡æºåŒ…è£èµ·ä¾†çš„
docker imageã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/FSlvalB.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/FSlvalB.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹å¾Œæˆ‘å€‘å‰µå»ºä¸€å€‹&lt;code&gt;Dockerfile&lt;/code&gt;ï¼Œä¸¦å°‡&lt;code&gt;FROM&lt;/code&gt;é¸æ“‡å®˜æ–¹
PostgreSQL çš„ Docker Image
å³å¯ï¼Œå¦å¤–é›–ç„¶æ­¤æ¬¡ä¸æœƒç”¨åˆ°ï¼Œä½†æˆ‘ä¹Ÿåœ¨&lt;code&gt;Dockerfile&lt;/code&gt;ç¯„ä¾‹è£¡ä»‹ç´¹äº†å…¶ä»–å¸¸ç”¨æŒ‡ä»¤:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# é¸å®šè¦é‹ä½œ Docker çš„ base imageFROM postgres:12.4-alpine
# è®“ Docker Image åœ¨ç”¢ç”Ÿæ™‚å¯ä»¥è¤‡è£½æª”æ¡ˆé€²å…¥ï¼Œä»¥ä¾› Docker ä½¿ç”¨# COPY ./data /app/data# å³ Bashï¼Œé€šå¸¸é€éæ­¤æŒ‡ä»¤åœ¨ Docker Image å…§éƒ¨å®‰è£ç›¸ä¾çš„ç¨‹å¼èˆ‡è³‡æº# RUN ls -al# Docker é‹ä½œçš„è³‡æ–™å¤¾ä½ç½®ï¼Œé€šå¸¸é€éæ­¤æŒ‡ä»¤æŒ‡å®š Server çš„é‹ä½œè³‡æ–™å¤¾# WORKDIR app# Docker å•Ÿå‹•æ™‚è¦åŸ·è¡Œçš„ç¨‹å¼# ENTRYPOINT [&amp;#34;go&amp;#34;, &amp;#34;run&amp;#34;, &amp;#34;main.go&amp;#34;]
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨&lt;code&gt;Dockerfile&lt;/code&gt;çš„åŒä¸€ç›®éŒ„ä¸‹é‹ä½œä»¥ä¸‹æŒ‡ä»¤ä¾†å»ºç«‹ä½ è‡ªè¨‚çš„
Docker Image:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker build . -t&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;customimage
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;t: æ­¤ Docker Image çš„åå­—&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å»ºç«‹å®Œç•¢å¾Œï¼Œå°±å¯ä»¥é‹è¡Œè³‡æ–™åº«äº†:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker run &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;   -e POSTGRES_USER&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;user &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;   -e POSTGRES_PASSWORD&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;mysecretpassword &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;   -e PGDATA&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;/var/lib/postgresql/data/pgdata &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;   -p 5432:5432 &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt;   customimage
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;e: Docker
å…§éƒ¨çš„ç’°å¢ƒè®Šæ•¸ï¼Œé€šå¸¸æˆ‘å€‘æœƒç”¨é€™å€‹ç’°å¢ƒè®Šæ•¸ä¾†èªªæ˜é‹è¡Œæ™‚çš„è¨­å®šï¼Œåœ¨æ­¤æ˜¯è¨­å®š&lt;code&gt;POSTGRES_USER - ä½¿ç”¨è€…åç¨±&lt;/code&gt;ã€&lt;code&gt;POSTGRES_PASSWORD - ä½¿ç”¨è€…å¯†ç¢¼&lt;/code&gt;ã€&lt;code&gt;PGDATA - è³‡æ–™åº«åœ¨ Docker è£¡çš„ä½ç½®&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;p: å°‡ Docker å…§éƒ¨çš„ port mapping åˆ°å¤–éƒ¨çš„
portï¼Œå·²è®“å¤–éƒ¨ç³»çµ±å¯ä»¥é€£ç·šè‡³ Docker å…§éƒ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é‹è¡Œä¸‹å»å¾Œå°±å¯ä½¿è·‘å•¦ï½å¦‚æœè¦é›¢é–‹ç›´æ¥æŒ‰&lt;code&gt;ctrl+c&lt;/code&gt;å³å¯ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/cUOm1AX.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/cUOm1AX.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æœ€å¾Œæˆ‘å€‘è¼¸å…¥å‰›å‰›&lt;code&gt;-e&lt;/code&gt;è¨­å®šçš„å¸³å¯†ï¼Œé€éè³‡æ–™åº«ç®¡ç†ç¨‹å¼é€£å…¥ï¼Œæˆ‘é€™é‚Šæ˜¯ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://eggerapps.at/postico/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Postico&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/CQqVXYH.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/CQqVXYH.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æˆåŠŸï¼&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¥ä¸‹ä¾†ä¸‹ç¯‡è¦ä»‹ç´¹å¦‚ä½•é€é Docker-Compose ç®¡ç†å¤šå€‹ Docker ç’°å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï¼Œä¹Ÿæ­¡è¿åˆ†äº«è¨è«–æŒ‡æ­£ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/43929345/how-does-a-docker-engine-replace-a-hypervisor-and-guest-os&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;How
does a Docker engine replace a hypervisor and guest OS?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/facade-pattern%E7%94%B1%E7%B5%B1%E4%B8%80%E7%9A%84%E5%85%A5%E5%8F%A3%E4%BB%8B%E9%9D%A2%E4%BE%86%E5%81%9A%E4%BA%8B-d939deb805b84164bb838905bbdfb1fc/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/facade-pattern%E7%94%B1%E7%B5%B1%E4%B8%80%E7%9A%84%E5%85%A5%E5%8F%A3%E4%BB%8B%E9%9D%A2%E4%BE%86%E5%81%9A%E4%BA%8B-d939deb805b84164bb838905bbdfb1fc/</guid>
        <description>&lt;h1 id=&#34;facade-patternç”±çµ±ä¸€çš„å…¥å£ä»‹é¢ä¾†åšäº‹&#34;&gt;Facade Patternï¼Œç”±çµ±ä¸€çš„å…¥å£ä»‹é¢ä¾†åšäº‹
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 23, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-facade-pattern&#34;&gt;ä»€éº¼æ˜¯ Facade Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å¯¦ä½œä¸ä¾è³´å¤šå€‹é¡åˆ¥ï¼Œè€Œæ˜¯ä¾è³´ä»‹é¢ï¼Œä¸¦æŠŠé€™äº›é¡åˆ¥å¯¦ä½œåœ¨æ­¤ä»‹é¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;ç•¶ PS5 å•Ÿå‹•æ™‚ï¼Œæœƒç”¨åˆ°è¨±å¤š CPU ç›¸é—œçš„æŒ‡ä»¤é›†ï¼Œä»¥ä¸‹æ–¹ç¯„ä¾‹ä¾†èªªå³æ˜¯&lt;code&gt;StrcutA{}&lt;/code&gt;ã€&lt;code&gt;StrcutB{}&lt;/code&gt;ï¼Œå¦‚æœæœªä¾†è¦æ›´æ”¹&lt;code&gt;StrcutA{}&lt;/code&gt;ã€&lt;code&gt;StrcutB{}&lt;/code&gt;çš„&lt;code&gt;DoAction()&lt;/code&gt;function å‘¼å«æ–¹å¼ï¼Œæˆ–è€…&lt;code&gt;StrcutA{}&lt;/code&gt;è¢«æ£„ç”¨è¦æ”¹ç”¨&lt;code&gt;StructC{}&lt;/code&gt;ï¼Œéƒ½å¿…é ˆè¦ä¿®æ”¹&lt;code&gt;PS5{}.Start()&lt;/code&gt;çš„å¯¦ä½œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructA&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructB&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutA&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructA&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutB&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructB&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutA&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutB&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start ps5...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘å€‘éœ€è¦ä¸€å€‹æ–¹å¼ï¼Œèƒ½è®“åšé€™äº›æ›´æ”¹æ™‚&lt;code&gt;PS5{}.Start()&lt;/code&gt;ä¸éœ€è¦ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;PS5{}.Start()&lt;/code&gt;å¯ä»¥åªä¾è³´ç‰¹å®šä»‹é¢&lt;code&gt;CPUFacade&lt;/code&gt; interface çš„&lt;code&gt;Work()&lt;/code&gt;ï¼Œæ‰€ä»¥å¯ä»¥å°‡&lt;code&gt;StrcutA{}&lt;/code&gt;ã€&lt;code&gt;StructB{}&lt;/code&gt;çš„ä½¿ç”¨æ–¹å¼éƒ½å°è£åœ¨&lt;code&gt;Work()&lt;/code&gt;ä¸­ï¼Œå°±ç®—å¾ŒçºŒ&lt;code&gt;StrcutA{}&lt;/code&gt;ã€&lt;code&gt;StructB{}&lt;/code&gt;æœ‰è®Šæ›´å‘¼å«æ–¹å¼æˆ–æ˜¯æ£„ç”¨ï¼Œéƒ½ä¸å½±éŸ¿&lt;code&gt;PS5{}.Start()&lt;/code&gt;çš„å‘¼å«ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPUFacade&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructA&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructA&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructB&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;() {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutA&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructA&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutB&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StructB&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutA&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;strcutB&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DoAction&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPUFacade&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Work&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;start ps5...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;{}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Start&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/factory-method-pattern%E6%8A%8A%E8%A4%87%E9%9B%9C%E7%9A%84%E9%82%8F%E8%BC%AF%E6%8B%86%E5%88%86%E8%87%B3%E5%B0%8F%E5%B7%A5%E5%BB%A0%E4%B8%AD-33ca13fd63a1429b84ee5d8dcaa4bb7a/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/factory-method-pattern%E6%8A%8A%E8%A4%87%E9%9B%9C%E7%9A%84%E9%82%8F%E8%BC%AF%E6%8B%86%E5%88%86%E8%87%B3%E5%B0%8F%E5%B7%A5%E5%BB%A0%E4%B8%AD-33ca13fd63a1429b84ee5d8dcaa4bb7a/</guid>
        <description>&lt;h1 id=&#34;factory-method-patternæŠŠè¤‡é›œçš„é‚è¼¯æ‹†åˆ†è‡³å°å·¥å» ä¸­&#34;&gt;Factory Method Patternï¼ŒæŠŠè¤‡é›œçš„é‚è¼¯æ‹†åˆ†è‡³å°å·¥å» ä¸­
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 15, 2021&lt;/p&gt;
&lt;p&gt;å·¥å» æ¨¡å¼ä¸»è¦æœ‰ä¸‰ç¨®ä¸åŒçš„å¯¦ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Simple Factory Pattern&lt;/li&gt;
&lt;li&gt;Factory Method Pattern&lt;/li&gt;
&lt;li&gt;Abstract Factory Pattern&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™ä¸‰ç¨®å¯¦ä½œç”±ç°¡å–®åˆ°è¤‡é›œï¼Œä»Šå¤©æœƒä»‹ç´¹ Simple Factory Pattern å»¶ä¼¸çš„ Factory Method Pattern&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-factory-method-pattern&#34;&gt;ä»€éº¼æ˜¯ Factory Method Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡è¤‡é›œçš„ç”Ÿç”¢é‚è¼¯å†æ‹†åˆ†è‡³ç‰¹å®šå·¥å» ï¼Œç”±ä½¿ç”¨è€…ç«¯æ±ºå®šè¦ä½¿ç”¨ä»€éº¼å·¥å» ä¾†ç”Ÿç”¢ç”¢å“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥æ˜¨å¤©çš„ä¾‹å­ç°¡å–®å¾—ä¾†èªªï¼Œå°±æ˜¯ã€Œå°‡ if else/swtich çš„é‚è¼¯æ‹†åˆ†è‡³ä¸åŒå·¥å» ã€ï¼Œå³ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PS5WithCD&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PS5WithDigital&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‹†åˆ†è‡³&lt;code&gt;PS5WithCDFactory{}&lt;/code&gt;ã€&lt;code&gt;PS5WithDigital{}&lt;/code&gt;ï¼Œã€Œå–®ä¸€ç”¢å“ç”±å–®ä¸€å·¥å» ç”Ÿç”¢ã€ï¼Œé€™æ¨£åšæœ‰ä»€éº¼å„ªç¼ºé»å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å„ªé»:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¦åˆ&lt;strong&gt;é–‹é–‰åŸå‰‡&lt;/strong&gt;ï¼Œåœ¨æ–°å¢ç”¢å“æ™‚ä¸å¿…ä¿®æ”¹ function å¯¦ä½œ(å°ä¿®æ”¹å°é–‰)ï¼Œä½†å¯ä»¥é€éä¸åŒå·¥å» ä¾†æ–°å¢(å°æ“´å……é–‹æ”¾)&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹éƒ½æ˜¯æ“´å……çš„ï¼Œä¸æ˜¯æ”¹ function å¯¦ä½œï¼Œæ‰€ä»¥æŠŠåŸæœ¬çš„é‚è¼¯æ”¹å£çš„å¯èƒ½æ€§ä¸é«˜&lt;/li&gt;
&lt;li&gt;å¦‚æœå‰µå»ºé‚è¼¯éæ–¼è¤‡é›œï¼ŒSimple Factory Pattern çš„é‚è¼¯æœƒç›¸ç•¶è¤‡é›œï¼Œè€Œ Factory Method Pattern å°‡é‚è¼¯æ‹†æˆå°å·¥å» å¯ä»¥é¿å…é€™å€‹å•é¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼ºé»:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‚ºæ¯æ–°å¢ä¸€å€‹ç”¢å“éƒ½éœ€è¦æ–°å¢ä¸€å€‹å·¥å» ï¼Œå¦‚æœç”¢å“çœ¾å¤šï¼Œç¨‹å¼ç¢¼æœƒæœ‰æ•¸ä¸ç›¡çš„å·¥å» ï¼Œè®“ç³»çµ±è®Šå¾—å¾ˆè¤‡é›œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å»¶çºŒæ˜¨å¤©çš„æƒ…å¢ƒï¼Œè¦ç”Ÿç”¢ PS5 ä¸»æ©Ÿ&lt;strong&gt;å…‰ç¢Ÿç‰ˆ&lt;/strong&gt;èˆ‡&lt;strong&gt;æ•¸ä½ç‰ˆ&lt;/strong&gt;çµ¦ä½¿ç”¨è€…ï¼Œä½†ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“ã€Œå¦‚ä½•ç”Ÿç”¢ CPUã€é¡¯ç¤ºæ™¶ç‰‡èˆ‡åŠ è£å…‰ç¢Ÿæ©Ÿã€ï¼Œä½¿ç”¨è€…åªéœ€è¦ç²å¾—æ­¤ç”¢å“å°±è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachineFactory&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Create&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCDFactory&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCDFactory&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Create&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigitalFactory&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigitalFactory&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Create&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachine&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading cd...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cd machine...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading digital file...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gameMachineFactory&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GameMachineFactory&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gameMachine&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gameMachineFactory&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Create&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gameMachine&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;User&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCDFactory&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;UML åœ–å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ao9stPW.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ao9stPW.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥èˆ‡æ˜¨å¤© UML åœ–æ¯”è¼ƒï¼Œé—œéµå·®ç•°åœ¨æ–¼ã€ŒæŠŠå·¥å» ä¹Ÿå»ºç«‹äº† inferfaceã€ï¼Œä½¿ç”¨è€…å°±å¯ä»¥ä½¿ç”¨&lt;code&gt;GameMachineFactory&lt;/code&gt; interface ä¾†å»é¸æ“‡å“ªé–“å·¥å» ï¼Œè€Œé¸å¥½äº†å·¥å» å¾Œï¼Œå·¥å» ä¾ç…§ interface æŠŠ&lt;code&gt;Create()&lt;/code&gt;æä¾›çµ¦ä½¿ç”¨è€…æ“ä½œï¼Œå‰µå»ºå‡ºéŠæˆ²æ©Ÿï¼Œä¹‹å¾Œå°±èˆ‡ Simple
Factory Pattern æ˜¯ä¸€æ¨£ä½¿ç”¨è€…ä¾ç…§&lt;code&gt;GameMachine&lt;/code&gt;interface ä¾†éŠç©éŠæˆ²ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/fan-out-fan-in-pattern%E7%9C%8B%E5%90%A7%E4%B8%96%E7%95%8C%E9%80%99%E5%B0%B1%E6%98%AF%E5%A4%9A%E4%BA%BA%E8%A7%A3%E6%B1%BA%E7%9A%84%E5%8A%9B%E9%87%8F-9ee0acf9a82343ba92e9526683eacc65/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/fan-out-fan-in-pattern%E7%9C%8B%E5%90%A7%E4%B8%96%E7%95%8C%E9%80%99%E5%B0%B1%E6%98%AF%E5%A4%9A%E4%BA%BA%E8%A7%A3%E6%B1%BA%E7%9A%84%E5%8A%9B%E9%87%8F-9ee0acf9a82343ba92e9526683eacc65/</guid>
        <description>&lt;h1 id=&#34;fan-out-fan-in-patternçœ‹å§ä¸–ç•Œé€™å°±æ˜¯å¤šäººè§£æ±ºçš„åŠ›é‡&#34;&gt;Fan-Out Fan-In Patternï¼Œçœ‹å§ä¸–ç•Œï¼é€™å°±æ˜¯å¤šäººè§£æ±ºçš„åŠ›é‡ï¼
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 7, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-fan-out-fan-in-pattern&#34;&gt;ä»€éº¼æ˜¯ Fan-Out Fan-In Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡ input ç”±ä¸€å€‹ producer åˆ†ç™¼å¤šå€‹ goroutine é‹è¡Œï¼Œå†å°‡å¤šå€‹ task goroutine é‹è¡Œçš„çµæœç”±ä¸€å€‹ consumer æ”¶é›†è³‡æ–™åˆä½µç‚º output&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœç¨‹å¼çš„æœ‰è‘—è¤‡é›œçš„è¨ˆç®—æˆ–è€…å¤šå€‹ IO é‹è¡Œï¼Œå¯ä»¥å°‡é€™äº›é‹è¡Œåˆ†ç™¼çµ¦ task goroutine åŸ·è¡Œï¼Œä½¿ task
åŸ·è¡Œæ›´å¿«é€Ÿï¼Œåœ¨çµ±ä¸€æ”¶é›†ç¹¼çºŒä¸‹å€‹æµç¨‹ã€‚å…¶ä¸­åˆ†ç™¼èˆ‡æ”¶é›†çš„è¡Œç‚ºåˆè¢«ç¨±ç‚º Fan Outã€Fan In:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fan Out: input å‚³å…¥ producer å¾Œé–‹å•Ÿå¤šå€‹ goroutine é‹è¡Œï¼Œç›´åˆ°
producer ä¸å†æ¥æ”¶ inputï¼Œå°±åƒæ˜¯&lt;strong&gt;åˆ†ç™¼&lt;/strong&gt;ä»»å‹™ä¸€èˆ¬ï¼Œæ‰€ä»¥ç¨±ç‚º Fan &lt;strong&gt;Out&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Fan In: ç”±å¤šå€‹ input å‚³å…¥ consumer å¾Œåˆä½µç‚º output å‚³å‡ºï¼Œç›´åˆ°
consumer ä¸å†æ¥æ”¶ inputï¼Œå°±åƒæ˜¯&lt;strong&gt;æ”¶é›†&lt;/strong&gt;è³‡æ–™ä¸€èˆ¬ï¼Œæ‰€ä»¥ç¨±ç‚º Fan &lt;strong&gt;In&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/2nnSBl1.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/2nnSBl1.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;è¨­è¨ˆä¸€å€‹æ–°èè³‡è¨Šç¶²é ç³»çµ±ï¼Œéœ€è¦å¾ Aã€Bã€C server
æ‹¿å–è³‡æ–™ï¼Œé€™äº›è³‡æ–™éƒ½æ²’æœ‰é †åºæ€§ï¼Œç´”ç²¹æ˜¯è¦éƒ½é¡¯ç¤ºåœ¨ç¶²é ä¸Šè€Œå·²ï¼Œæ‰€ä»¥å¦‚æœ A
è³‡æ–™æ‹¿å®Œå†æ‹¿ Bï¼Œé€™æ¨£å°±å¤ªæµªè²»æ™‚é–“äº†ã€‚å¯ä»¥åŒæ™‚æ‹¿å– Aã€Bã€C server
çš„è³‡æ–™åŠ å¿«å–è³‡æ–™çš„é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¯¦ä½œæœ‰å•é¡Œçš„ç³»çµ±å¦‚ä¸‹ï¼Œ Aã€Bã€C server é€é&lt;code&gt;GetServerData()&lt;/code&gt;æ‹¿å–è³‡æ–™ï¼Œå†é€é&lt;code&gt;ShowNews&lt;/code&gt;é¡¯ç¤ºæ–°èè³‡æ–™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;math/rand&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetServerData&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Intn&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬å–å¾—server dataæ¶ˆè€—çš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sprintf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s server data&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ShowNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;responseByServerA&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetServerData&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;responseByServerB&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetServerData&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;responseByServerC&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetServerData&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ShowNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;responseByServerA&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;responseByServerB&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;responseByServerC&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cost %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœƒç™¼ç¾å› ç‚ºæ‹¿å–è³‡æ–™ç„¡æ³•ä¸¦è¡Œï¼Œæ‰€ä»¥è€—æ™‚è¼ƒä¹…&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZANI9bc.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ZANI9bc.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;å¯¦ä½œ&lt;code&gt;Producer()&lt;/code&gt;ã€&lt;code&gt;Task()&lt;/code&gt;ã€&lt;code&gt;Consumer()&lt;/code&gt;ä¾†åˆ†åˆ¥&lt;strong&gt;åˆ†ç™¼ä»»å‹™&lt;/strong&gt;ã€&lt;strong&gt;åŸ·è¡Œä»»å‹™&lt;/strong&gt;ã€&lt;strong&gt;æ”¶é›†è³‡æ–™&lt;/strong&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;math/rand&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Producer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;serverNames&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, len(&lt;span style=&#34;color:#a6e22e&#34;&gt;serverNames&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; close(&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;serverNames&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;taskCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; close(&lt;span style=&#34;color:#a6e22e&#34;&gt;taskCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;taskCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetServerData&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;taskCh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Consumer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;taskChs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;...&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;consumerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WaitGroup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(len(&lt;span style=&#34;color:#a6e22e&#34;&gt;taskChs&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Wait&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		close(&lt;span style=&#34;color:#a6e22e&#34;&gt;consumerCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;task&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;taskChs&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;task&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;wg&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Done&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;task&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;consumerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}(&lt;span style=&#34;color:#a6e22e&#34;&gt;task&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;consumerCh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetServerData&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Intn&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬å–å¾—server dataæ¶ˆè€—çš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sprintf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s server data&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;serverName&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ShowNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Producer&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;task1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;task2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;task3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;producerCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;consumerCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Consumer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;task1&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;task2&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;task3&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;consumerCh&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ShowNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;new&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cost %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¨‹å¼ç¢¼è¼ƒé•·ï¼Œé‡é»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°‡éœ€è¦æ‹¿å–è³‡æ–™çš„ server
åç¨±å‚³éçµ¦&lt;code&gt;Producer()&lt;/code&gt;å¾Œï¼Œ&lt;code&gt;Producer()&lt;/code&gt;æœƒå‰µå»ºä¸€å€‹ Channel ä¾†åˆ†ç™¼ä»»å‹™ï¼Œæ‰€ä»¥éœ€å†å°‡æ­¤ Channel å‚³çµ¦&lt;code&gt;Task()&lt;/code&gt;ä½¿å…¶ goroutine ç²å¾—ä»»å‹™&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Task()&lt;/code&gt;ç²å¾—ä»»å‹™é–‹å§‹åŸ·è¡Œå¾Œï¼Œä¹Ÿæœƒç”¢ç”Ÿå„è‡ªçš„ Channel ç”¨ä¾†å‚³é server çš„è³‡æ–™ï¼Œæ‰€ä»¥éœ€å†å°‡æ­¤ Channel é€è‡³&lt;code&gt;Consumer()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Consumer()&lt;/code&gt;ç²å¾—æ‰€æœ‰&lt;code&gt;Task()&lt;/code&gt;çš„ Channel å¾Œï¼Œæœƒåœ¨å•Ÿå‹•ç›¸å°æ•¸é‡çš„ gorotine åˆä½µè³‡æ–™è‡³&lt;code&gt;consumerCh{}&lt;/code&gt;ï¼Œç‚ºäº†è¦ç¢ºä¿è³‡æ–™å–å¾—å®Œç•¢å¾Œé—œé–‰&lt;code&gt;consumerCh{}&lt;/code&gt;ï¼Œéœ€é€é&lt;code&gt;sync.WaitGroup{}&lt;/code&gt;ä¾†å–å¾—&lt;code&gt;close(consumerCh)&lt;/code&gt;çš„æ™‚æ©Ÿï¼Œæ™‚æ©Ÿçš„é‚è¼¯å¦‚ä¸‹ï¼š
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;wg.Add()&lt;/code&gt;æœƒåŠ å…¥éœ€ç­‰å¾…çš„æ•¸ç›®ï¼Œé€™é‚Šè¼¸å…¥ goroutine çš„æ•¸é‡&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wg.Done()&lt;/code&gt;æœƒæ¸›å»éœ€ç­‰å¾…çš„æ•¸ç›®&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wg.Wait()&lt;/code&gt;æœƒä½¿ç¨‹å¼ç­‰å¾…ï¼Œç­‰å¾…è‡³&lt;code&gt;sync.WaitGroup{}&lt;/code&gt;ç­‰å¾…æ•¸ç›®è¢«æ¸›å»è‡³
0 æ™‚æ‰æœƒç¹¼çºŒåŸ·è¡Œ&lt;/li&gt;
&lt;li&gt;æ‰€ä»¥å°‡&lt;code&gt;wg.Done()&lt;/code&gt;éƒ½å®‰æ’åœ¨è®€å–å®Œ&lt;code&gt;Task()&lt;/code&gt;Channel
å¾Œï¼Œå°±å¯ä»¥ç¢ºä¿è®€å®Œè³‡æ–™å†&lt;code&gt;close(consumerCh)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;for new := range consumerCh&lt;/code&gt;æœƒè®€å– Channel è³‡æ–™ï¼Œç›´åˆ°&lt;code&gt;close(consumerCh)&lt;/code&gt;å¾Œè·³è„« for è¿´åœˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åŸ·è¡Œå¾Œç”±æ–¼å–çš„è³‡æ–™å¯ä»¥åŒæ™‚åŸ·è¡Œå› æ­¤åŠ å¿«äº†åŸ·è¡Œé€Ÿåº¦ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/RHbCmve.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/RHbCmve.png&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/feature-pattern%E6%88%91%E6%8A%8A%E6%9C%AA%E4%BE%86%E8%A8%97%E4%BB%98%E7%B5%A6%E4%BD%A0%E4%BA%86-f81b14c1ba224058ad86f3497eee010f/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/feature-pattern%E6%88%91%E6%8A%8A%E6%9C%AA%E4%BE%86%E8%A8%97%E4%BB%98%E7%B5%A6%E4%BD%A0%E4%BA%86-f81b14c1ba224058ad86f3497eee010f/</guid>
        <description>&lt;h1 id=&#34;feature-patternæˆ‘æŠŠæœªä¾†è¨—ä»˜çµ¦ä½ äº†&#34;&gt;Feature Patternï¼Œæˆ‘æŠŠæœªä¾†è¨—ä»˜çµ¦ä½ äº†ï¼
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 6, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-future-pattern&#34;&gt;ä»€éº¼æ˜¯ Future Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å‘¼å«è€…å°‡ task äº¤çµ¦ goroutine åŸ·è¡Œï¼ŒåŸ·è¡Œå®Œç•¢å¾Œ goroutine å°‡ task é‹è¡Œå¾—åˆ°çš„çµæœå‚³å›å‘¼å«è€…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨æ˜¨å¤©è¬›è§£å®Œ Thread-Per-Message Pattern å¾Œï¼Œå°‡ message ä»¥ goroutine åŸ·è¡Œå¾Œï¼Œæ˜¯æ²’è¾¦æ³•ç²å¾—å›å‚³å€¼çš„ï¼Œå¦‚æœæœ‰æ­¤éœ€æ±‚ï¼Œå¯ä»¥æ­é… Future Pattern&lt;/p&gt;
&lt;p&gt;ç•¶ goroutine é‹è¡Œå¾Œï¼Œå‘¼å«è€…éœ€è¦æœ‰ä¸€å€‹ä¸­é–“ç‰©ä»¶ä¾†å»å–å¾— goroutine æœªä¾†é‹è¡Œçš„çµæœï¼Œgolang é€šå¸¸æ¡ç”¨ channel å¯¦ä½œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/6VcgtcL.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/6VcgtcL.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å»¶çºŒæ¨æ’­æ–°èç³»çµ±çš„æƒ…å¢ƒï¼Œå°‡æ–°çš„æ–°èç›´æ¥æ¨æ’­å‡ºå»ï¼Œé™¤äº†æ¨æ’­ç³»çµ±æ•ˆç‡è¦é«˜ï¼Œé‚„éœ€ç´€éŒ„æ¨æ’­å®Œæˆçš„æ™‚é–“&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¨å¤©çš„ code ä¸¦æ²’è¾¦æ³•æ¥æ”¶åˆ°&lt;code&gt;PushNews()&lt;/code&gt;çš„å›å‚³é‹è¡Œå®ŒçµæŸçš„æ™‚é–“å€¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s cost %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;å°‡ golang channelï¼Œå¯¦ä½œè‡³&lt;code&gt;PushNews()&lt;/code&gt;ä¸­ã€‚goroutine é‹è¡Œå¾Œï¼Œå°‡&lt;code&gt;newsCh{}&lt;/code&gt;å…ˆå›å‚³çµ¦å‘¼å«è€…&lt;code&gt;main()&lt;/code&gt;ï¼Œåœ¨**æœªä¾†(feature)**æ™‚ goroutine æœƒå°‡ç™¼é€å®Œç•¢çš„æ™‚é–“&lt;code&gt;time.Now()&lt;/code&gt;å‚³è‡³ channelï¼Œå‘¼å«è€…&lt;code&gt;main()&lt;/code&gt;åªéœ€åœ¨éœ€è¦æ™‚ç­‰å¾… channel æ”¶åˆ°&lt;code&gt;time.Now()&lt;/code&gt;å‡ºç¾ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s cost %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;news %d is sent at %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…ˆé€é&lt;code&gt;for _, news := range allNews&lt;/code&gt;å°‡æ‰€æœ‰çš„æ–°èç™¼é€ä»¥å•Ÿå‹•
goroutineï¼Œä½†é€™é‚Šåƒ…æ˜¯å•Ÿå‹•ï¼Œä¸¦å–å¾—ä¸€å€‹ä¸­é–“ç‰©ä»¶ channelï¼Œç­‰åˆ°æœ‰éœ€è¦å†å¾ channel
å–å¾—è³‡æ–™ï¼Œç”šè‡³å¯ä»¥å…ˆåœ¨&lt;code&gt;// do somethins&lt;/code&gt;è™•åšå…¶ä»–äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¾Œåœ¨&lt;code&gt;for index, newsCh := range newsChs&lt;/code&gt;å–å¾— channel çš„è³‡æ–™ï¼Œå¦‚&lt;a class=&#34;link&#34; href=&#34;yorktodo&#34; &gt;Guarded Suspension Pattern yorktodo&lt;/a&gt;æ‰€èªªï¼Œchannel æœƒç­‰åˆ°æœ‰è³‡æ–™å†é‹è¡Œï¼Œå¦å‰‡ç­‰å¾…ï¼Œæ‰€ä»¥æ­¤è™•æœƒç­‰åˆ°æ‰€æœ‰&lt;code&gt;&amp;lt;-newsCh&lt;/code&gt;éƒ½æ¥æ”¶å®Œç•¢æ‰æœƒé›¢é–‹ for è¿´åœˆé‹è¡Œå®Œ&lt;code&gt;main()&lt;/code&gt;ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/hiIsqpW.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/hiIsqpW.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;èˆ‡å¸¸è¦‹çš„-javascript-promise-å°æ¯”&#34;&gt;èˆ‡å¸¸è¦‹çš„ javascript promise å°æ¯”
&lt;/h2&gt;&lt;p&gt;promise èˆ‡ feature æ˜¯ç›¸ä¼¼çš„æ¦‚å¿µï¼Œå·®ç•°æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;promise æ˜¯ä»¥&lt;code&gt;.then(function)&lt;/code&gt;çš„é¢¨æ ¼å‚³é€ function çµ¦ promise ä¾†å»å¯¦ä½œå–å¾—è³‡æ–™å¾Œçš„å‹•ä½œ&lt;/li&gt;
&lt;li&gt;feature æ˜¯ä»¥&lt;code&gt;.get()&lt;/code&gt;æˆ–è€… golang &lt;code&gt;&amp;lt;-channel&lt;/code&gt;çš„æ–¹å¼å–å¾—è³‡æ–™å¾Œå†å‘¼å«è™•å¯¦ä½œå¾ŒçºŒå‹•ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½†å…©è€…ç²¾ç¥ç›¸åŒï¼Œéƒ½æ˜¯è™•ç†å¦‚ä½•&lt;strong&gt;ç•°æ­¥&lt;/strong&gt;å–å¾—è³‡æ–™ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœç†Ÿæ‚‰ javascript çš„è©±ï¼Œå¯ä»¥ç”¨&lt;code&gt;Promise.all()&lt;/code&gt;å»æ€è€ƒæ­¤ç¯„ä¾‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pushNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;) =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; Promise((&lt;span style=&#34;color:#a6e22e&#34;&gt;resolve&lt;/span&gt;) =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;setTimeout&lt;/span&gt;(() =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; cost &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;Date.&lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;resolve&lt;/span&gt;(Date.&lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;());
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }, &lt;span style=&#34;color:#ae81ff&#34;&gt;3000&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  );
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; Date.&lt;span style=&#34;color:#a6e22e&#34;&gt;now&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Promise.&lt;span style=&#34;color:#a6e22e&#34;&gt;all&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  [&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;].&lt;span style=&#34;color:#a6e22e&#34;&gt;map&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;) =&amp;gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;then&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt;) =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;map&lt;/span&gt;((&lt;span style=&#34;color:#a6e22e&#34;&gt;finishTimes&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;) =&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;`&amp;#34;news &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt; is sent at &lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;finishTimes&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;`&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  )
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœƒç™¼ç¾&lt;code&gt;for _, news := range allNews&lt;/code&gt;èˆ‡&lt;code&gt;Promise.all()&lt;/code&gt;ç›¸åŒéƒ½æ˜¯åœ¨å•Ÿå‹•ç•°æ­¥çš„ codeï¼Œç­‰åˆ°ç•°æ­¥çš„è³‡æ–™éƒ½æœƒä¾†å°±ä»¥&lt;code&gt;.then(function)&lt;/code&gt;ä¸­çš„ function ä¾†è™•ç†ï¼Œç”±æ–¼ç¤ºç•°æ­¥ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åœ¨ç¨‹å¼&lt;code&gt;// do something&lt;/code&gt;è™•åŸ·è¡Œå…¶ä»–äº‹æƒ…è€Œä¸è¢« block&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/flyweight-pattern%E7%AF%80%E7%9C%81%E7%A9%BA%E9%96%93%E7%9A%84%E5%A5%BD%E5%B9%AB%E6%89%8B-85140351b7ec4591864b2901edc48b54/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/flyweight-pattern%E7%AF%80%E7%9C%81%E7%A9%BA%E9%96%93%E7%9A%84%E5%A5%BD%E5%B9%AB%E6%89%8B-85140351b7ec4591864b2901edc48b54/</guid>
        <description>&lt;h1 id=&#34;flyweight-patternç¯€çœç©ºé–“çš„å¥½å¹«æ‰‹&#34;&gt;Flyweight Patternï¼Œç¯€çœç©ºé–“çš„å¥½å¹«æ‰‹
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 25, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-flyweight-pattern&#34;&gt;ä»€éº¼æ˜¯ Flyweight Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡å¯å…±ç”¨çš„ç‰©ä»¶å…±ç”¨ä»¥ç¯€çœç©ºé–“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;è¨­è¨ˆä¸€å€‹æ’²å…‹ç‰ŒéŠæˆ²ï¼Œå¦‚æœç‰Œå±€åœ¨é‹è¡Œï¼Œæ¯å‰µå»ºä¸€å€‹ç‰Œå±€å°±éœ€è¦å»ºç«‹æ–°çš„å¡ç‰Œï¼Œé€™æ¨£æœƒå¾ˆæµªè²»è¨˜æ†¶é«”ï¼Œéœ€è¦æœ‰æ–¹æ³•è§£æ±ºæ­¤å•é¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;è¨­è¨ˆä¸€å€‹å¯å…±ç”¨çš„ç‰©ä»¶&lt;code&gt;pockerCards{}&lt;/code&gt;ï¼Œè£¡é ­æœ‰è‘—æ‰€æœ‰æ’²å…‹ç‰Œï¼Œåœ¨ç”¨&lt;code&gt;NewPockerGame()&lt;/code&gt;é–‹å•Ÿæ¯å ´ç‰Œå±€æ™‚ï¼Œç¨‹å¼æœƒè¨­å®šå¡ç‰Œçš„ä¾†æºéƒ½ä¾†è‡ª&lt;code&gt;pockerCards{}&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pockerCards&lt;/span&gt; = &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Card&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Color&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç´…&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Color&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é»‘&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// å…¶ä»–å¡ç‰Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Card&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Color&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PockerGame&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Cards&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Card&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewPockerGame&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PockerGame&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;board&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PockerGame&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;Cards&lt;/span&gt;: &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;]&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Card&lt;/span&gt;{}}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pockerCards&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;board&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Cards&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;pockerCards&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;board&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewPockerGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;game2&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewPockerGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;game1&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Cards&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;game2&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Cards&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;èˆ‡-singleton-pattern-çš„å·®ç•°&#34;&gt;èˆ‡ Singleton Pattern çš„å·®ç•°
&lt;/h2&gt;&lt;p&gt;å…©è€…éƒ½æœ‰å…±ç”¨çš„æ¦‚å¿µï¼Œä½†æœ‰äº›è¨±å·®ç•°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Singleton Pattern åœ¨æ•´å€‹ç³»çµ±åªæœƒæœ‰ä¸€å€‹ç‰©ä»¶&lt;/li&gt;
&lt;li&gt;Flyweight Pattern åœ¨æ•´å€‹ç³»çµ±å¯ä»¥æœ‰å¤šå€‹ç‰©ä»¶&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/golang-%E9%9A%A8%E7%AD%86-9fabdb9d476348f59038e4c2dc8adbf5/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/golang-%E9%9A%A8%E7%AD%86-9fabdb9d476348f59038e4c2dc8adbf5/</guid>
        <description>&lt;h1 id=&#34;golang-éš¨ç­†&#34;&gt;Golang éš¨ç­†
&lt;/h1&gt;&lt;p&gt;Tags: Golang, éš¨ç­†
Date: February 2, 2024&lt;/p&gt;
&lt;h2 id=&#34;éŒ¯èª¤è™•ç†&#34;&gt;éŒ¯èª¤è™•ç†
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20%E9%8C%AF%E8%AA%A4%E8%99%95%E7%90%86%20dd86c225fd3444f49063883087ca9bc1.md&#34; &gt;Golang éŒ¯èª¤è™•ç†&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Golang æœ€ä½³éŒ¯èª¤è™•ç†å¯¦è¸: &lt;a class=&#34;link&#34; href=&#34;https://medium.com/@dche423/golang-error-handling-best-practice-cn-42982bd72672&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://medium.com/@dche423/golang-error-handling-best-practice-cn-42982bd72672&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;èªæ³•åŸºç¤&#34;&gt;èªæ³•åŸºç¤
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Slice
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20for%20%E8%BF%B4%E5%9C%88%E6%80%8E%E9%BA%BC%E6%9C%83%E9%83%BD%E5%88%97%E5%87%BA%E6%9C%80%E5%BE%8C%E4%B8%80%E5%80%8B%E5%80%BC%20e850a5e26f9041229e3289bd1d6e021a.md&#34; &gt;Golang for è¿´åœˆæ€éº¼æœƒéƒ½åˆ—å‡ºæœ€å¾Œä¸€å€‹å€¼&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20Slice%20%E6%9C%89%E7%84%A1%E8%A8%AD%E5%AE%9A%20cap%20%E7%9A%84%E5%B7%AE%E7%95%B0%20580a0e3f56324f0397e52cb60033669a.md&#34; &gt;Golang Slice æœ‰ç„¡è¨­å®š cap çš„å·®ç•°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Map
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/49176090/map-as-a-method-receiver&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/49176090/map-as-a-method-receiver&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¸¬è©¦&#34;&gt;æ¸¬è©¦
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Mock: &lt;a class=&#34;link&#34; href=&#34;https://www.myhatchpad.com/insight/mocking-techniques-for-go/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.myhatchpad.com/insight/mocking-techniques-for-go/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸¦ç™¼&#34;&gt;ä¸¦ç™¼
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Worker Pool&lt;/li&gt;
&lt;li&gt;è§£æ±º deadlock çš„æ–¹å¼
&lt;ul&gt;
&lt;li&gt;é †åºé–&lt;/li&gt;
&lt;li&gt;åˆ†æ®µé–&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Graceful Shutdown: &lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10272236&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ithelp.ithome.com.tw/articles/10272236&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Golang Atomic: &lt;a class=&#34;link&#34; href=&#34;https://gfw.go101.org/article/concurrent-atomic-operation.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://gfw.go101.org/article/concurrent-atomic-operation.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Golang selectä¸­çš„breakã€continueå’Œreturn: &lt;a class=&#34;link&#34; href=&#34;https://tomjamescn.github.io/post/2019-07-11-golang-basic-1-break-continue-return-in-select/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://tomjamescn.github.io/post/2019-07-11-golang-basic-1-break-continue-return-in-select/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åº•å±¤&#34;&gt;åº•å±¤
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;MPGæ¨¡å‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å…¶ä»–&#34;&gt;å…¶ä»–
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Golang ç‚ºä»€éº¼ä¸èƒ½ç”¨sliceç•¶ä½œmapçš„key
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/20297503/slice-as-a-key-in-map&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/20297503/slice-as-a-key-in-map&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ³¨æ„äº‹é …&#34;&gt;æ³¨æ„äº‹é …
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20for%20%E8%BF%B4%E5%9C%88%E6%80%8E%E9%BA%BC%E6%9C%83%E9%83%BD%E5%88%97%E5%87%BA%E6%9C%80%E5%BE%8C%E4%B8%80%E5%80%8B%E5%80%BC%20e850a5e26f9041229e3289bd1d6e021a.md&#34; &gt;Golang for è¿´åœˆæ€éº¼æœƒéƒ½åˆ—å‡ºæœ€å¾Œä¸€å€‹å€¼&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¥—ä»¶èˆ‡è³‡æº&#34;&gt;å¥—ä»¶èˆ‡è³‡æº
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Golang åŸºæœ¬åŠŸç·´ç¿’
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/GoesToEleven/GolangTraining/tree/master&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/GoesToEleven/GolangTraining/tree/master&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;worker pool: &lt;a class=&#34;link&#34; href=&#34;https://github.com/panjf2000/ants&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/panjf2000/ants&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;dependency injection: &lt;a class=&#34;link&#34; href=&#34;https://github.com/google/wire&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/google/wire&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­é é¢&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20Slice%20%E6%9C%89%E7%84%A1%E8%A8%AD%E5%AE%9A%20cap%20%E7%9A%84%E5%B7%AE%E7%95%B0%20580a0e3f56324f0397e52cb60033669a.md&#34; &gt;Golang Slice æœ‰ç„¡è¨­å®š cap çš„å·®ç•°&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20for%20%E8%BF%B4%E5%9C%88%E6%80%8E%E9%BA%BC%E6%9C%83%E9%83%BD%E5%88%97%E5%87%BA%E6%9C%80%E5%BE%8C%E4%B8%80%E5%80%8B%E5%80%BC%20e850a5e26f9041229e3289bd1d6e021a.md&#34; &gt;Golang for è¿´åœˆæ€éº¼æœƒéƒ½åˆ—å‡ºæœ€å¾Œä¸€å€‹å€¼&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Golang%20%E9%9A%A8%E7%AD%86%209fabdb9d476348f59038e4c2dc8adbf5/Golang%20%E9%8C%AF%E8%AA%A4%E8%99%95%E7%90%86%20dd86c225fd3444f49063883087ca9bc1.md&#34; &gt;Golang éŒ¯èª¤è™•ç†&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/grpc-web%E8%AE%93%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%9F%E5%90%83%E5%88%B0-grpc-%E7%9A%84%E6%83%A1%E9%AD%94%E6%9E%9C%E5%AF%A6---%E5%AF%A6%E4%BD%9C%E7%AF%87-b52311014a074f999915827bf264119d/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/grpc-web%E8%AE%93%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%9F%E5%90%83%E5%88%B0-grpc-%E7%9A%84%E6%83%A1%E9%AD%94%E6%9E%9C%E5%AF%A6---%E5%AF%A6%E4%BD%9C%E7%AF%87-b52311014a074f999915827bf264119d/</guid>
        <description>&lt;h1 id=&#34;grpc-webè®“ä½ çš„å‰ç«¯ä¹Ÿåƒåˆ°-grpc-çš„æƒ¡é­”æœå¯¦---å¯¦ä½œç¯‡&#34;&gt;gRPC-Webï¼Œè®“ä½ çš„å‰ç«¯ä¹Ÿåƒåˆ° gRPC çš„æƒ¡é­”æœå¯¦ - å¯¦ä½œç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 26, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY12&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day12-grpc-web-%E8%AE%93%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%9F%E5%90%83%E5%88%B0-grpc-%E7%9A%84%E6%83%A1%E9%AD%94%E6%9E%9C%E5%AF%A6-%E5%AF%A6%E4%BD%9C%E7%AF%87-95857f02595d&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10244296&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œé€™æ¬¡è¦ä»‹ç´¹ gRPC-Web çš„å¯¦ä½œï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ Clone æ­¤ä»½&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/GRPC-Web-Simple-Demo&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github
ç¨‹å¼ç¢¼&lt;/a&gt;ï¼Œç›´æ¥å…ˆ run èµ·ä¾†æœƒæ¯”è¼ƒæœ‰æ„Ÿè¦ºï½&lt;/p&gt;
&lt;h2 id=&#34;æ€éº¼-run-èµ·ä¾†&#34;&gt;æ€éº¼ run èµ·ä¾†ï¼Ÿ
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;code&gt;docker run -v ${PWD}:/app -w /app node:14.3.0-alpine npm install&lt;/code&gt;:
å®‰è£&lt;code&gt;web-cleint&lt;/code&gt;çš„ç›¸ä¾&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker run -v ${PWD}:/app -w /app node:14.3.0-alpine npm run build&lt;/code&gt;:
ç·¨è­¯&lt;code&gt;web-client&lt;/code&gt;çš„&lt;code&gt;client.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker-compose build&lt;/code&gt;:
å®‰è£&lt;code&gt;Golang GRPC Server&lt;/code&gt;èˆ‡&lt;code&gt;Envoy&lt;/code&gt;çš„ç›¸ä¾&lt;/li&gt;
&lt;li&gt;&lt;code&gt;docker-compose up&lt;/code&gt;: å•Ÿå‹•&lt;code&gt;web-client&lt;/code&gt;,
&lt;code&gt;Golang GRPC Server&lt;/code&gt;, &lt;code&gt;Envoy&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;é€£å…¥&lt;code&gt;localhost:8060&lt;/code&gt;ï¼Œæ‰“é–‹&lt;code&gt;console&lt;/code&gt;æœƒçœ‹åˆ°&lt;code&gt;web-cleint&lt;/code&gt;ç™¼å‡ºçš„&lt;code&gt;Hello&lt;/code&gt;å¾—åˆ°&lt;code&gt;Hello World&lt;/code&gt;çš„å›å‚³&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://imgur.com/0GmF7QJ.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://imgur.com/0GmF7QJ.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;envoy-è¨­å®š&#34;&gt;envoy è¨­å®š
&lt;/h2&gt;&lt;p&gt;æ•´é«”æ¶æ§‹å¦‚ DAY11 æ‰€èªªçš„ï¼Œå¾Œç«¯èˆ‡å‰ç«¯ä¹‹é–“å¤šäº†ä¸€å€‹ envoy
proxyï¼Œä¾†æŠŠç€è¦½å™¨çš„ HTTP1.1 request è½‰æ›æˆ HTTP2ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/pJDltYR.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/pJDltYR.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://blog.envoyproxy.io/envoy-and-grpc-web-a-fresh-new-alternative-to-rest-6504ce7eb880&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Envoy
and gRPC-Web: a fresh new alternative to REST&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘å€‘è¦åœ¨ docker-compose è¨­å®šå‰ç«¯ã€å¾Œç«¯ã€envoy proxy ä¸‰è€…ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# docker-compose.ymlversion: &amp;#34;3&amp;#34;services:  envoy:    build:      context: ./      dockerfile: ./docker/envoy/Dockerfile    image: grpcweb/envoy    ports:      - &amp;#34;8080:8080&amp;#34;      - &amp;#34;9901:9901&amp;#34;    links:      - server  server:    image: golang:1.14.6-alpine    volumes:      - ${PWD}:/server    working_dir: /server    ports:      - &amp;#34;8070:8070&amp;#34;    entrypoint: go run server/main.go  web:    image: httpd:2.4    volumes:      - ${PWD}/web-client:/usr/local/apache2/htdocs/    ports:      - &amp;#34;8060:80&amp;#34;    links:      - envoy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„&lt;code&gt;dockerfile: ./docker/envoy/Dockerfile&lt;/code&gt;è™•ï¼Œæˆ‘å€‘å¿…é ˆ
build ä¸€å€‹ envoy docker imageï¼Œç›®æ¨™æ˜¯æŠŠ&lt;code&gt;envoy.yaml&lt;/code&gt;æ”¾å…¥ image
ä¸­ï¼Œå¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# docker/envoy/DockerfileFROM envoyproxy/envoy:v1.15.0COPY ./envoy.yaml /etc/envoy/envoy.yamlCMD /usr/local/bin/envoy -c /etc/envoy/envoy.yaml -l trace --log-path /tmp/envoy_info.log&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œ envoy æœƒä¾ç…§æ­¤ config ä¾†è¨­å®š proxyï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# envoy.yamladmin:  access_log_path: /tmp/admin_access.log  address:    socket_address: { address: 0.0.0.0, port_value: 9901 }static_resources:  listeners:    - name: listener_0      address:        # è¬›è§£1        socket_address: { address: 0.0.0.0, port_value: 8080 }      filter_chains:        - filters:            - name: envoy.filters.network.http_connection_manager              typed_config:                &amp;#34;@type&amp;#34;: type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager                codec_type: auto                stat_prefix: ingress_http                route_config:                  name: local_route                  virtual_hosts:                    - name: local_service                      domains: [&amp;#34;*&amp;#34;]                      # è¬›è§£2                      routes:                        - match: { prefix: &amp;#34;/&amp;#34; }                          route:                            cluster: echo_service                            max_grpc_timeout: 0s                      cors:                        allow_origin_string_match:                          - prefix: &amp;#34;*&amp;#34;                        allow_methods: GET, PUT, DELETE, POST, OPTIONS                        allow_headers: keep-alive,user-agent,cache-control,content-type,content-transfer-encoding,custom-header-1,x-accept-content-transfer-encoding,x-accept-response-streaming,x-user-agent,x-grpc-web,grpc-timeout                        max_age: &amp;#34;1728000&amp;#34;                        expose_headers: custom-header-1,grpc-status,grpc-message                http_filters:                  # è¬›è§£4                  - name: envoy.filters.http.grpc_web                  - name: envoy.filters.http.cors                  - name: envoy.filters.http.router  clusters:    - name: echo_service      connect_timeout: 0.25s      type: logical_dns      http2_protocol_options: {}      lb_policy: round_robin      load_assignment:        cluster_name: cluster_0        endpoints:          - lb_endpoints:              - endpoint:                  address:                    # è¬›è§£3                    socket_address:                      address: server                      port_value: 50052&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨&lt;code&gt;è¬›è§£1&lt;/code&gt;è™•ï¼Œç‚º envoy å°å¤–çš„ port è™Ÿï¼Œrequest ä¾ç…§æ­¤ port
è™Ÿé€²å…¥å¾Œï¼Œå¯ä»¥ä¾ç…§&lt;code&gt;è¬›è§£2&lt;/code&gt;çš„ routes
ä¾†è¨­å®šè·¯ç”±ï¼Œå¦‚&lt;code&gt;&amp;quot;/&amp;quot;&lt;/code&gt;å°åˆ°äº†&lt;code&gt;clusters&lt;/code&gt;è£¡çš„&lt;code&gt;echo_service&lt;/code&gt;ï¼Œè€Œ&lt;code&gt;echo_service&lt;/code&gt;è£¡å°±å¯ä»¥å¯¦éš›å°‡
requests å°åˆ° docker-compose ä¸­çš„ serverï¼Œè€Œ port è™Ÿæ˜¯ 50052ã€‚&lt;/p&gt;
&lt;p&gt;è€Œ&lt;code&gt;è¬›è§£4&lt;/code&gt;è™•ï¼Œå› ç‚ºæœ‰è¨­å®š&lt;code&gt;envoy.filters.http.grpc_web&lt;/code&gt;ï¼Œæ‰€ä»¥å°
HTTP1.1 æµé‡æœƒè½‰æ›æˆ HTTP2 çš„æµé‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¾†ç”¢ç”Ÿ-js-èˆ‡-golanag-çš„-grpc&#34;&gt;ä¾†ç”¢ç”Ÿ JS èˆ‡ Golanag çš„ gRPC
&lt;/h2&gt;&lt;p&gt;code&lt;/p&gt;
&lt;p&gt;åœ¨ script è³‡æ–™å¤¾ä¸­ï¼Œæˆ‘å·²ç¶“å¯«å¥½äº† JS èˆ‡ Golang ç”¢ gRPC code çš„
scriptï¼Œåˆ†åˆ¥å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# scirpt/build-proto-js.sh#! /bin/bashdocker run \    -v &amp;#34;${PWD}/proto:/protofile&amp;#34; \    -e &amp;#34;protofile=helloworld.proto&amp;#34; \    juanjodiaz/grpc-web-generator&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mv ./proto/generated/* ./proto
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rm -r proto/generated
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# scirpt/build-proto-go.shdocker run \    -v &amp;#34;${PWD}/proto:/protofile&amp;#34; \    -e &amp;#34;protofile=helloworld.proto&amp;#34; \    juanjodiaz/grpc-web-generator&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mv ./proto/generated/* ./proto
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;rm -r proto/generated
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸»è¦æ˜¯é€é juanjodiaz å¤§å¤§å¯«çš„&lt;a class=&#34;link&#34; href=&#34;https://github.com/juanjoDiaz/grpc-web-generator&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;juanjodiaz/grpc-web-generator&lt;/a&gt;ä¾†ç”¢ç”Ÿ
gRPC codeï¼Œçœå»äº†å¾ˆå¤š gRPC å®‰è£çš„æ™‚é–“ XDã€‚&lt;/p&gt;
&lt;p&gt;run å®Œä¹‹å¾Œå°±æœƒç”¢ç”Ÿä»¥ä¸‹çš„ codeï¼Œæˆ‘å€‘è¦ import ä»–å€‘åˆ°æˆ‘å€‘å¯¦éš›çš„ code
ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/otM2XRI.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/otM2XRI.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// web-client/client.jsconst { HelloRequest } = require(&amp;#34;../proto/helloworld_pb.js&amp;#34;);const { GreeterPromiseClient } = require(&amp;#34;../proto/helloworld_grpc_web_pb.js&amp;#34;);(async () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;greeterService&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GreeterPromiseClient&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://localhost:8080&amp;#34;&lt;/span&gt;);    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;request&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloRequest&lt;/span&gt;();    &lt;span style=&#34;color:#a6e22e&#34;&gt;request&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setMessage&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Hello&amp;#34;&lt;/span&gt;);    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;greeterService&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;sayHello&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;request&lt;/span&gt;, {});    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getMessage&lt;/span&gt;());  } &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt;);    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;);  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})();
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‰ç«¯ä¸­ï¼Œæˆ‘å€‘åˆ©ç”¨&lt;code&gt;GreeterPromiseClient&lt;/code&gt;ä¾†ç”¢ç”Ÿ gRPC
clientï¼Œä¸¦ç”¢ç”Ÿ&lt;code&gt;HelloRequest&lt;/code&gt;é€™å€‹
messageï¼Œä½¿ç”¨&lt;code&gt;setMessage&lt;/code&gt;å°‡è£¡é ­çš„ value
è¨­å®šå¥½ï¼Œä¸¦é€é&lt;code&gt;sayHello&lt;/code&gt;å‚³é€ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code&gt;sayHello&lt;/code&gt;ä½¿ç”¨&lt;code&gt;HelloRequest&lt;/code&gt;æ˜¯å®Œå…¨ç¬¦åˆ
gRPC çš„ schema çš„ï¼Œå‰å¾Œç«¯çš„å®šç¾©éƒ½ä¾†è‡ªæ–¼ schemaï¼Œæºé€šæ›´ match æƒ¹ï½&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;#&lt;/span&gt; proto&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;helloworld.proto&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;syntax &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; helloworld;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; Greeter {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; SayHello(HelloRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (HelloReply);&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloReply&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.envoyproxy.io/envoy-and-grpc-web-a-fresh-new-alternative-to-rest-6504ce7eb880&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Envoy
and gRPC-Web: a fresh new alternative to REST&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/juanjoDiaz/grpc-web-generator&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;grpc-web-generator&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/grpc-web%E8%AE%93%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%9F%E5%90%83%E5%88%B0grpc%E7%9A%84%E6%83%A1%E9%AD%94%E6%9E%9C%E5%AF%A6---%E6%A6%82%E5%BF%B5%E7%AF%87-0537572b1e7b4e8683bd31c0ef96aab9/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/grpc-web%E8%AE%93%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%9F%E5%90%83%E5%88%B0grpc%E7%9A%84%E6%83%A1%E9%AD%94%E6%9E%9C%E5%AF%A6---%E6%A6%82%E5%BF%B5%E7%AF%87-0537572b1e7b4e8683bd31c0ef96aab9/</guid>
        <description>&lt;h1 id=&#34;grpc-webè®“ä½ çš„å‰ç«¯ä¹Ÿåƒåˆ°grpcçš„æƒ¡é­”æœå¯¦---æ¦‚å¿µç¯‡&#34;&gt;gRPC-Webï¼Œè®“ä½ çš„å‰ç«¯ä¹Ÿåƒåˆ°gRPCçš„æƒ¡é­”æœå¯¦ - æ¦‚å¿µç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 25, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY11&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day11-grpc-web-%E8%AE%93%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E4%B9%9F%E5%90%83%E5%88%B0-grpc-%E7%9A%84%E6%83%A1%E9%AD%94%E6%9E%9C%E5%AF%A6-%E6%A6%82%E5%BF%B5%E7%AF%87-cc001c9fec5b&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10243651&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œåœ¨æ˜¨å¤©çš„ gRPC
å¯¦ä½œå¾Œï¼Œåœ¨å¾®æœå‹™ä¸Šæˆ‘å€‘å¯ä»¥ç”¨æ›´å®Œæ•´çš„æ–¹æ¡ˆæºé€šï¼Œé‚£æ˜¯å¦æœ‰ä¸€å€‹æ–¹æ¡ˆï¼Œå¯ä»¥å°‡
gRPC é‹ç”¨åœ¨å‰ç«¯èˆ‡å¾Œç«¯æºé€šå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ‰çš„ï¼Œé‚£å°±æ˜¯&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-web&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC-Web&lt;/a&gt;ï¼&lt;/p&gt;
&lt;h2 id=&#34;ç‚ºä»€éº¼éœ€è¦-grpc-web&#34;&gt;ç‚ºä»€éº¼éœ€è¦ gRPC-Web
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZWpEW7h.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ZWpEW7h.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://blog.envoyproxy.io/envoy-and-grpc-web-a-fresh-new-alternative-to-rest-6504ce7eb880&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Envoy
and gRPC-Web: a fresh new alternative to REST&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;gRPC åœ¨å‰ç«¯é‹ä½œæœ€å¤§çš„å•é¡Œï¼Œå°±æ˜¯å‰ç«¯å°æ–¼ gRPC æ‰€ä½¿ç”¨çš„ protocol
ä¸æ˜¯é‚£éº¼å®Œå¥½çš„æ”¯æ´ï¼Œç¾åœ¨ä¸»æµç€è¦½å™¨ä½¿ç”¨&lt;code&gt;HTTP1.1&lt;/code&gt;ï¼Œè€Œ gRPC
ä½¿ç”¨çš„æ˜¯æ›´åŠ é«˜æ•ˆçš„&lt;code&gt;HTTP2&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‚£è©²æ€éº¼è§£æ±ºï¼ŒGoogle æä¾›çš„è§£æ±ºæ–¹æ¡ˆæ˜¯åˆ©ç”¨ä¸€å€‹ proxy
æ¶è¨­åœ¨å¾Œç«¯ï¼Œå°‡å‰ç«¯æ‰€æœ‰çš„ HTTP1.1 æµé‡è½‰æ›æˆ HTTP2ï¼Œå¦‚ä¸‹åœ–:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/pJDltYR.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/pJDltYR.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://blog.envoyproxy.io/envoy-and-grpc-web-a-fresh-new-alternative-to-rest-6504ce7eb880&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Envoy
and gRPC-Web: a fresh new alternative to REST&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;envoy æ˜¯ç¾åœ¨å¸¸è¦‹çš„ä¸€å€‹
proxyï¼Œä»–å°æ–¼å¾®æœå‹™æºé€šçš„å„ç¨®å•é¡Œæœ‰å¾ˆå¥½çš„ç·©è§£ä½œç”¨ï¼Œåœ¨æœªä¾† istio
ä»‹ç´¹ä¸­ï¼Œæœƒæ›´å¸¸çœ‹åˆ°ä»–ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰é€™å€‹ HTTP1.1 é€é envoy è½‰æ›çš„éç¨‹ï¼Œå‹¢å¿…æœƒç¼ºå°åŸç”Ÿ HTTP2
çš„ä¸€äº›å¥½è™•ï¼Œå¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸æ”¯æ´ Client-Streaming: é›–ç„¶æ”¯æ´ Server-Streaming çš„åŠŸèƒ½ï¼Œä½†åœ¨
Client-Streaming ä¸Šå› ç‚º HTTP1.1 çš„&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-web/blob/master/doc/streaming-roadmap.md#client-streaming-and-half-duplex-streaming&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®‰å…¨æ€§å•é¡Œ&lt;/a&gt;ï¼Œå§‹çµ‚æ²’æœ‰å•Ÿç”¨ï¼Œä¸€æ—¦è§£æ±ºå¾Œ
gRPC-Web å¯ä»¥é€é Server èˆ‡ Client çš„ Streaming ä¾†åšé›™å·¥ä¸²æµã€‚&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-web/blob/master/doc/roadmap.md#non-binary-message-encoding&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä¸ä½¿ç”¨äºŒé€²åˆ¶å‚³è¼¸&lt;/a&gt;:
å› ç‚ºå‰ç«¯ä½¿ç”¨äºŒé€²åˆ¶ä¸¦éæœƒæœ‰è¼ƒå¥½çš„æ•ˆèƒ½ï¼Œæ‰€ä»¥é‚„æ˜¯ä½¿ç”¨é¡ä¼¼ JSON
çš„æ–¹å¼å‚³é€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥ï¼ŒgPRC-Web åœ¨é¸ç”¨ä¸Šï¼Œå¦‚æœä½ æœ‰ä»¥ä¸‹éœ€æ±‚ï¼Œé‚£ä»–å°‡æœƒæ˜¯ä½ çš„å¥½é¸æ“‡:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‰å¾Œç«¯è¦æœ‰ä¸€è‡´çš„æºé€šä»‹é¢&lt;/li&gt;
&lt;li&gt;å‰ç«¯æœ‰è¨‚é–±éœ€æ±‚(å¯ç”¨ Server-Steaming å¯¦ä½œ)&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;æ¥ä¸‹ä¾†æœƒå° gRPC-Web å¯¦éš›å¯¦ä½œï¼Œè¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-web&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;grpc / grpc-webï¼šé©ç”¨æ–¼
Web å®¢æˆ¶ç«¯çš„ gRPC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-web/blob/master/doc/roadmap.md#non-binary-message-encoding&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;master
ä¸Šçš„ grpc-web / roadmap.mdÂ·grpc / grpc-web&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.envoyproxy.io/envoy-and-grpc-web-a-fresh-new-alternative-to-rest-6504ce7eb880&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Envoy
and gRPC-Web: a fresh new alternative to REST | by Luc Perkins | Envoy
Proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-web/blob/master/doc/streaming-roadmap.md#client-streaming-and-half-duplex-streaming&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;grpc-web/streaming-roadmap.md
at master Â· grpc/grpc-web&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/guarded-suspension-pattern%E4%BD%A0%E4%B8%8D%E6%9C%83%E6%AD%BB%E7%9A%84%E5%9B%A0%E7%82%BA%E6%88%91%E6%9C%83%E4%BF%9D%E8%AD%B7%E4%BD%A0-1bbd34ac522e477b9e39a2bb5acc204a/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/guarded-suspension-pattern%E4%BD%A0%E4%B8%8D%E6%9C%83%E6%AD%BB%E7%9A%84%E5%9B%A0%E7%82%BA%E6%88%91%E6%9C%83%E4%BF%9D%E8%AD%B7%E4%BD%A0-1bbd34ac522e477b9e39a2bb5acc204a/</guid>
        <description>&lt;h1 id=&#34;guarded-suspension-patternä½ ä¸æœƒæ­»çš„å› ç‚ºæˆ‘æœƒä¿è­·ä½ &#34;&gt;Guarded Suspension Patternï¼Œä½ ä¸æœƒæ­»çš„ï¼Œå› ç‚ºæˆ‘æœƒä¿è­·ä½ 
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 4, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-guarded-suspension-pattern&#34;&gt;ä»€éº¼æ˜¯ Guarded Suspension Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å¦‚æœ thread åŸ·è¡Œæ™‚æ¢ä»¶ä¸ç¬¦ï¼Œå°±åœä¸‹ç­‰å¾…ï¼Œç­‰åˆ°æ¢ä»¶ç¬¦åˆæ™‚å†é–‹å§‹é–‹å§‹åŸ·è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;ç•¶è¨­è¨ˆç·šä¸Šå³æ™‚é¡¯ç¤ºç•™è¨€æ¿æ™‚ï¼Œæœƒæ¥å—å¤§é‡çš„ç•™è¨€ï¼Œä¸¦å°‡å…¶é¡¯ç¤ºå‡ºä¾†ï¼Œæˆ‘å€‘éœ€ç¢ºä¿ç•™è¨€ä¸å‡ºç¾ race conditionï¼Œä¹Ÿéœ€ç¢ºä¿æ²’ç•™è¨€æ™‚ä¸åŸ·è¡Œé¡¯ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¦ä½œæœ‰å•é¡Œçš„ç³»çµ±å¦‚ä¸‹ï¼Œä½¿ç”¨è€…ä¸æ–·ç”¨&lt;code&gt;SendMessage()&lt;/code&gt;ç™¼é€ç•™è¨€&lt;code&gt;cool&lt;/code&gt;è‡³ç›¸ç•¶æ–¼
queue çš„ m.messages sliceï¼Œ&lt;code&gt;Show()&lt;/code&gt;æœƒä¸æ–·è®€å– m.messages é¡¯ç¤ºï¼Œä¸¦ç§»é™¤è¨Šæ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;math/rand&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SendMessage&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Intn&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Millisecond&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬å„å€‹clientç™¼é€çš„éš¨æ©Ÿè™•ç†æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SendMessage&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cool&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Intn&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Millisecond&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬å„å€‹clientç™¼é€çš„éš¨æ©Ÿè™•ç†æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SendMessage&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cool&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ–¼ m.messages å¯èƒ½ä¸å­˜åœ¨è¨Šæ¯ï¼Œæ­¤æ™‚è®€å–æœƒç™¼ç”Ÿ error å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/WUWehtr.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/WUWehtr.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;éœ€è¦åœ¨ m.messages è®€å–æ™‚ï¼Œæ–°å¢åŸ·è¡Œæ¢ä»¶ï¼Œå³ã€Œm.messages
ç‚ºç©ºçš„æ™‚å€™ç­‰å¾…è€Œä¸è®€å–ï¼Œç­‰åˆ°æœ‰è¨Šæ¯å¯¦å†è®€å–é¡¯ç¤ºã€ï¼Œæ­¤æ™‚å¯ä»¥é€é channel
ä¾†å¯¦ç¾ï¼Œå°‡ slice æ”¹ç‚º channel å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;math/rand&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SendMessage&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateMessageBoard&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;MessageBoard&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; = make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//å¯å®¹ç´100æ¢è¨Šæ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateMessageBoard&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rand&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Intn&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;)) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Millisecond&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬å„å€‹clientç™¼é€çš„éš¨æ©Ÿè™•ç†æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SendMessage&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cool&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;messageBoard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;channel æœ‰å¹¾å€‹ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è®€å¯«æ™‚ä¸æœƒç”¢ç”Ÿ race condtion&lt;/li&gt;
&lt;li&gt;åœ¨è®€å–æ™‚å¦‚æœæ²’æœ‰å…ƒç´ ï¼Œæœƒç­‰å¾…åˆ°æœ‰å€¼å†åŸ·è¡Œ&lt;/li&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨ unbuffered channelï¼Œ&lt;code&gt;e.g. make(chan string)&lt;/code&gt;ï¼Œå¯«å…¥å¾Œå¦‚æœæ²’æœ‰è®€å–ï¼Œæœƒåœ¨å¯«å…¥è™•ç­‰å¾…&lt;/li&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨ buffered channelï¼Œ&lt;code&gt;e.g. make(chan string, 100)&lt;/code&gt;ï¼Œå¯«å…¥å¾Œå¦‚æœæ²’æœ‰è®€å–ï¼Œå¯ä»¥ç¹¼çºŒå¯«å…¥ï¼Œç›´åˆ°åˆ°é” buffer æ•¸æ‰æœƒç­‰å¾…è®€å–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥åœ¨ç¨‹å¼ç¢¼ä¸­ï¼Œç•¶ m.messages ä¸å­˜åœ¨è¨Šæ¯æ™‚ï¼Œ&lt;code&gt;Show()&lt;/code&gt;æœƒç­‰å¾…åˆ°æœ‰è¨Šæ¯åœ¨é€²è¡Œé¡¯ç¤ºã€‚channel å¯å®¹ç´ 100 æ¢è¨Šæ¯ï¼Œä¸æœƒè®“&lt;code&gt;SendMessage()&lt;/code&gt;æ¯æ¢è¨Šæ¯éƒ½è¦ç­‰åˆ°&lt;code&gt;Show()&lt;/code&gt;é¡¯ç¤ºå®Œæ‰èƒ½ç¹¼çºŒç™¼é€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è·Ÿç¶“å…¸-java-æ¨¡å¼æ¯”å°&#34;&gt;è·Ÿç¶“å…¸ Java æ¨¡å¼æ¯”å°
&lt;/h2&gt;&lt;p&gt;äº‹å¯¦ä¸Šï¼ŒGuarded Suspension Pattern
ç¶“å…¸çš„åšæ³•æ˜¯æ¡ç”¨å€¼ä¾†ç•¶ä½œã€ŒåŸ·è¡Œæ¢ä»¶ã€ï¼Œä»¥æ­¤ç¯„ä¾‹ä¾†èªªå°±æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;messages&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;:]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸¦ä¸”ç‚ºäº†é¿å… for è¿´åœˆä¸€ç›´é‡è¤‡æª¢æŸ¥&lt;code&gt;len(m.messages) != 0&lt;/code&gt;è®“
cpu é£†å‡ï¼Œæ‰€ä»¥éœ€ä½¿ç”¨&lt;code&gt;sync.Cond{}&lt;/code&gt;çš„&lt;code&gt;Wait()&lt;/code&gt;ä¾†è®“ goroutine
æš«åœï¼Œä¸¦åœ¨&lt;code&gt;SendMessage()&lt;/code&gt;æ™‚ç”¨&lt;code&gt;Signal() or Broadcast()&lt;/code&gt;å•Ÿå‹•å·²æš«åœçš„ goroutineï¼Œå…¶å¯¦ç›¸ç•¶æ–¼ java synchronized çš„&lt;code&gt;Wait()&lt;/code&gt;èˆ‡&lt;code&gt;Notify() or notifyAll()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½† golang æå€¡ã€Œshare memory by communicatingã€ï¼Œå³ CSP(Communication
Sequential Process)çš„ç›®æ¨™ä¹‹ä¸€ï¼Œé€é channel ä¾†åœ¨ä¸åŒ goroutine
é–“åˆ†äº«è³‡æ–™ï¼Œå¦‚æœä»¥&lt;code&gt;len(m.messages) != 0&lt;/code&gt;ä¾†å¯¦ä½œåŸ·è¡Œæ¢ä»¶å³æ˜¯ã€Œcommunicate by sharing
memoryã€ï¼Œæˆ‘å€‘éœ€é€é&lt;code&gt;Lock()&lt;/code&gt;ã€&lt;code&gt;Unlock()&lt;/code&gt;ä¾†ä¿è­· m.messagesï¼Œä¹Ÿéœ€é€é&lt;code&gt;Wait()&lt;/code&gt;ã€&lt;code&gt;Signal()&lt;/code&gt;ä¾†é¿å… goroutine çš„åŸ·è¡Œèˆ‡å¦ï¼Œç¨‹å¼ç¢¼æœƒè¤‡é›œè¼ƒå¤šï¼Œè€Œ channel å¯ä»¥ç°¡å–®ä¹¾æ·¨çš„å¯¦ç¾ä»¥ä¸Šéœ€æ±‚ï¼Œå› æ­¤å¤šæ•¸ gopher é¢å° Guarded Suspension Pattern æœƒæ¡ç”¨ channel è€Œé&lt;code&gt;sync.Cond{}&lt;/code&gt;ï¼Œç”šè‡³æœ‰è‘—å»¢é™¤&lt;code&gt;sync.Cond{}&lt;/code&gt;çš„ &lt;a class=&#34;link&#34; href=&#34;https://github.com/golang/go/issues/21165&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;issue&lt;/a&gt;ï¼Œä¸éåœ¨æ›´è¤‡é›œçš„å ´æ™¯èˆ‡æ•ˆèƒ½è€ƒé‡ä¸Šï¼Œä¾‹å¦‚å–šèµ·ä¸åŒåœä½çš„ goroutineï¼Œæ‰€ä»¥&lt;code&gt;sync.Cond{}&lt;/code&gt;é‚„æ˜¯æœ‰å­˜åœ¨çš„å¿…è¦ï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆç›®å‰æ²’æœ‰è¢«æ¡ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ„Ÿè¬&#34;&gt;æ„Ÿè¬
&lt;/h2&gt;&lt;p&gt;åŒäº‹ Vic å”åŠ©æ ¡ç¨¿&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/istio-gatewayvirtualservice%E5%85%83%E4%BB%B6---%E5%AF%A6%E4%BD%9C%E7%AF%87-bd80e569d2c04c64874f23a42547d023/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/istio-gatewayvirtualservice%E5%85%83%E4%BB%B6---%E5%AF%A6%E4%BD%9C%E7%AF%87-bd80e569d2c04c64874f23a42547d023/</guid>
        <description>&lt;h1 id=&#34;istio-gatewayvirtualserviceå…ƒä»¶---å¯¦ä½œç¯‡&#34;&gt;Istio Gatewayã€VirtualServiceå…ƒä»¶ - å¯¦ä½œç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 7, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY23&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Medium&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10250134&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ã€‚ä»Šå¤©è¦ä»‹ç´¹ Istio
çš„&lt;code&gt;VirtualService&lt;/code&gt;ã€&lt;code&gt;Gateway&lt;/code&gt;ï¼Œå…©è€…æ­é…å¯ä»¥é”åˆ°
K8s çš„&lt;code&gt;Ingress&lt;/code&gt;çš„æ•ˆæœï¼Œä¸¦ä¸”æœ‰è‘— Istio æ›´å¼·å¤§çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è€Œé€™ç¯‡æ–‡ç« æœƒä»¥å¯¦ä½œç‚ºä»‹ç´¹ï¼Œå¯¦éš›åŸç†å°‡åœ¨ä¹‹å¾Œä»‹ç´¹ï¼Œ&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ&#34;&gt;å¯¦ä½œ
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹çš„å¯¦ä½œç¯„ä¾‹éƒ½åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Code-Example&lt;/a&gt;ä¸­ï¼Œ&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;helm-digimon/templates/server-service.yaml&lt;/code&gt;ä¸­ï¼Œæˆ‘å€‘é ˆå°‡
ports
çš„nameåšä¿®æ”¹ç‚º&lt;code&gt;grpc-web&lt;/code&gt;ï¼ŒIstioåœ¨çœ‹åˆ°æ­¤nameå¾Œï¼Œå°±æœƒèª¿æ•´envoy
proxyä½¿clientç¶²é ç«¯çš„&lt;code&gt;grpc-web&lt;/code&gt;è«‹æ±‚å¯æˆåŠŸèˆ‡serveræºé€šã€‚&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/ops/configuration/traffic-management/protocol-selection/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è©³ç´°APIåœ¨æ­¤&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/AiUJiVt.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/AiUJiVt.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ–°å¢&lt;code&gt;VirtualService&lt;/code&gt;ã€&lt;code&gt;Gateway&lt;/code&gt;å…©å€‹å…ƒä»¶è‡³&lt;code&gt;DAY23/helm-digimon/templates/gateway.yaml&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion: networking.istio.io/v1alpha3kind: Gatewaymetadata:  name: gatewayspec:  selector:    istio: ingressgateway  servers:    - port:        number: 80        name: http        protocol: HTTP      hosts&lt;/span&gt;:        - &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;*.backend.com&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;---apiVersion: networking.istio.io/v1alpha3kind: VirtualServicemetadata:  name: virtual-servicespec:  hosts&lt;/span&gt;:    - &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;api.backend.com&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;gateways:    - gateway  http:    - match:        - uri:            prefix: /digimon.Digimon      route:        - destination:            port:              number: 6000            host: server      corsPolicy:        allowOrigins:          - exact&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://web.backend.com&amp;#34;&lt;/span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;allowMethods:          - POST          - GET          - OPTIONS          - PUT          - DELETE        allowHeaders:          - grpc-timeout          - content-type          - keep-alive          - user-agent          - cache-control          - content-type          - content-transfer-encoding          - x-accept-content-transfer-encoding          - x-accept-response-streaming          - x-user-agent          - x-grpc-web        maxAge: 1728s        exposeHeaders:          - grpc-status          - grpc-message        allowCredentials: true---apiVersion: networking.istio.io/v1alpha3kind: VirtualServicemetadata:  name: webspec:  hosts&lt;/span&gt;:    - &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;web.backend.com&amp;#34;&lt;/span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;gateways:    - gateway  http:    - match:        - uri:            prefix: /      rewrite:        uri: /      route:        - destination:            port:              number: 8060            host&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;web&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;DAY23/helm-digimon/templates/gateway.yaml&lt;/code&gt;æœ‰ä¸€å€‹Gatewayã€ä¸€å€‹webçš„VirtualServiceã€ä¸€å€‹serverçš„VirtualServiceï¼Œ&lt;/p&gt;
&lt;p&gt;å¤–éƒ¨çš„æµé‡æœƒå¦‚ä¸‹å°è‡³æ­£ç¢ºçš„podsï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Istio Gatewayå…ƒä»¶ --&amp;gt; Istio VirtualServiceå…ƒä»¶ --&amp;gt; K8s Serviceå…ƒä»¶ --&amp;gt; K8s Podså…ƒä»¶
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å°‡ K8s run èµ·ä¾†ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£Istioç³»çµ±è‡³K8sï¼Œä¸¦å•Ÿç”¨envoy sidecarï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•Ÿå‹•æ‰€æœ‰K8så…ƒä»¶&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY23/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Istio Gatewayè¨­è¨ˆçš„å¤–éƒ¨æµé‡å°å‘å¦‚ä¸‹:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å¤–éƒ¨Load Balancer --&amp;gt; Istio Gatewayå…ƒä»¶
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”±æ–¼å¯¦ä½œæ˜¯æ¡ç”¨minikubeï¼Œæˆ‘å€‘å¿…é ˆæ¨¡æ“¬å¤–éƒ¨Load Balancerå‡ºä¾†ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¨¡æ“¬å®Œç•¢å¾Œé€é&lt;code&gt;minikube ip&lt;/code&gt;æˆ–çš„minikubeçš„å¤–éƒ¨ipï¼Œä¸¦é€é&lt;code&gt;$ open /etc/hosts&lt;/code&gt;å°‡URLå°è‡³æ­¤ipï¼Œå¦‚æœminikube
ipæ˜¯&lt;code&gt;127.0.0.1&lt;/code&gt;çš„è©±ä¿®æ”¹æ–¹å¼å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/oWYdLXm.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/oWYdLXm.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;éƒ½å®Œæˆå¾Œæ‰“é–‹&lt;code&gt;web.backend.com&lt;/code&gt;ï¼Œweb
clientå·²ç¶“æˆåŠŸèˆ‡serveræºé€šï¼Œå¤ªå¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/dl68jd6.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/dl68jd6.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–
&lt;/h2&gt;&lt;p&gt;ä½ å¯èƒ½æœƒæƒ³&lt;code&gt;ç‚ºä»€éº¼è¦ç‰¹åˆ¥è¨­è¨ˆä¸€å€‹VirtualServiceå…ƒä»¶ï¼Œä¸ç›´æ¥ç”¨K8s Serviceå…ƒä»¶å‘¢ï¼Ÿ&lt;/code&gt;ï¼Œ&lt;code&gt;ç‚ºä»€éº¼è¦åˆ†é‚£éº¼å¤šå±¤å…ƒä»¶å‘¢ï¼Ÿ&lt;/code&gt;ï¼Œä»¥ä¸‹å•é¡Œéƒ½æœƒåœ¨ä¸‹ç¯‡æ–‡ç« åšæ¢è¨ï¼Œè¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/setup/getting-started/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Getting Started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/concepts/what-is-istio/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ What is Istio?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/blog/2019/07/18/api-deprecations-in-1-16/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Deprecated
APIs Removed In 1.16: Hereâ€™s What You Need To Know | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/istio-gatewayvirtualservice%E5%85%83%E4%BB%B6---%E6%A6%82%E5%BF%B5%E7%AF%87-bd236ee0492c47509291d9757852e880/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/istio-gatewayvirtualservice%E5%85%83%E4%BB%B6---%E6%A6%82%E5%BF%B5%E7%AF%87-bd236ee0492c47509291d9757852e880/</guid>
        <description>&lt;h1 id=&#34;istio-gatewayvirtualserviceå…ƒä»¶---æ¦‚å¿µç¯‡&#34;&gt;Istio Gatewayã€VirtualServiceå…ƒä»¶ - æ¦‚å¿µç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 8, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY24&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Medium&lt;/li&gt;
&lt;li&gt;iT é‚¦å¹«å¿™&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä»‹ç´¹çš„æ˜¯Istio
Gatewayã€VirtualServiceçš„æ¦‚å¿µï¼Œ&lt;code&gt;ç‚ºä½•ä¸ç›´æ¥ä½¿ç”¨K8s Ingresså…ƒä»¶ï¼Ÿ&lt;/code&gt;ï¼Œ&lt;code&gt;ç‚ºä»€éº¼è¦åˆ†é‚£éº¼å¤šå±¤å…ƒä»¶å‘¢ï¼Ÿ&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;k8s&#34;&gt;K8s
&lt;/h2&gt;&lt;p&gt;Ingressç„¡æ³•é”åˆ°Service Meshçš„åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/blog/2018/v1alpha3-routing/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜æ–¹èªªæ˜&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For ingress traffic management, you might ask: Why not reuse
Kubernetes Ingress APIs? The Ingress APIs proved to be incapable of
expressing Istioâ€™s routing needs. By trying to draw a common denominator
across different HTTP proxies, the Ingress is only able to support the
most basic HTTP routing and ends up pushing every other feature of
modern proxies into non-portable annotations.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç°¡å–®ä¾†èªªï¼Œåœ¨åŸæœ¬çš„K8s Ingresså…ƒä»¶ï¼Œç„¡æ³•æä¾›Service
Meshçš„éœ€æ±‚ï¼Œåƒ…é©ç”¨ç°¡å–®çš„è·¯ç”±ï¼Œè€Œè¦æœ‰è¾¦æ³•ç²¾ç¢ºçš„æ§åˆ¶Service
Meshï¼Œå¿…é ˆè¦å°‡Ingressçš„è·è²¬åˆ‡åˆ†çš„æ›´ç´°ï¼Œå¦‚ä»¥ä¸‹:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å¤–éƒ¨Load Balancer --&amp;gt; Istio Gatewayå…ƒä»¶ --&amp;gt; Istio VirtualServiceå…ƒä»¶ --&amp;gt; K8s Serviceå…ƒä»¶ --&amp;gt; K8s Podså…ƒä»¶
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®˜æ–¹æä¾›äº†ä¸‹åœ–:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/aSzOvHl.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/aSzOvHl.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Istioå°‡L4-L6å±¤çš„åŠŸèƒ½(å¦‚TCPã€TSLç­‰ç­‰)ï¼Œäº¤çµ¦Gatewayå…ƒä»¶è™•ç†ï¼Œ&lt;/p&gt;
&lt;p&gt;è€ŒL7å±¤çš„æ‡‰ç”¨å±¤å°±å¯ä»¥åœ¨ç‰¹åˆ¥å®¢è£½ï¼Œå¦‚æœè¦é€£æ¥ä¸åŒçš„Serviceå°±äº¤çµ¦VirtualServiceå…ƒä»¶è™•ç†ï¼Œå¦‚æœè¦ç®¡ç†æµé‡å°±é€éDestinationRuleå…ƒä»¶è™•ç†ï¼Œ&lt;/p&gt;
&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–
&lt;/h2&gt;&lt;p&gt;åœ¨K8sæ­é…Istioçš„ç³»çµ±ä¸­ï¼ŒK8sè¨±å¤šæºé€šçš„åŠŸèƒ½æœƒç›¡é‡è®“Istioä¾†åšï¼Œç³»çµ±æœƒè¶Šä¾†è¶Šè¶¨å‘æ–¼&lt;code&gt;Istioè² è²¬å„ç¨®æºé€šã€K8såªè² è²¬å®¹å™¨çš„ç”Ÿå‘½é€±æœŸ&lt;/code&gt;ï¼Œæ‰€ä»¥ä½ æœƒç™¼ç¾Istioæ…¢æ…¢å°‡K8sçš„æºé€šç´°åˆ†æŒæ§ï¼Œé€™æ¨£æ‰èƒ½é”åˆ°Service
Meshçš„å¥½è™•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/martinomburajr/distributed-computing-tcp-vs-http-s-load-balancing-7b3e9efc6167&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;TCP
vs HTTP(S) Load Balancing.. In this article I shall show two mainâ€¦ | by
Martin Ombura Jr.Â | Martin Ombura Jr.Â | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/blog/2018/v1alpha3-routing/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Introducing the Istio v1alpha3 routing API&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10224374&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[Day17]
å¦‚ä½•ç‚ºClusteré¸æ“‡ä¸€å€‹å¥½çš„Gateway - iT é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘ IT
äººçš„ä¸€å¤©&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://jimmysong.io/istio-handbook/concepts/traffic-management-basic.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æµé‡ç®¡ç†åŸºç¡€æ¦‚å¿µ
Â· Istio Handbook - Istio æœåŠ¡ç½‘æ ¼è¿›é˜¶å®æˆ˜ by Jimmy Song(å®‹å‡€è¶…)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/istio-%E6%98%AF%E4%BB%80%E9%BA%BC%E5%8E%9F%E4%BE%86%E6%98%AF%E5%AE%B9%E5%99%A8%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84%E5%A6%BB%E7%AE%A1%E5%9A%B4%E5%97%8E---%E5%AF%A6%E4%BD%9C%E7%AF%87-154741ca22da432ab5901946df766462/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/istio-%E6%98%AF%E4%BB%80%E9%BA%BC%E5%8E%9F%E4%BE%86%E6%98%AF%E5%AE%B9%E5%99%A8%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84%E5%A6%BB%E7%AE%A1%E5%9A%B4%E5%97%8E---%E5%AF%A6%E4%BD%9C%E7%AF%87-154741ca22da432ab5901946df766462/</guid>
        <description>&lt;h1 id=&#34;istio-æ˜¯ä»€éº¼åŸä¾†æ˜¯å®¹å™¨é–“é€šè¨Šçš„å¦»ç®¡åš´å—---å¯¦ä½œç¯‡&#34;&gt;Istio æ˜¯ä»€éº¼ï¼ŒåŸä¾†æ˜¯å®¹å™¨é–“é€šè¨Šçš„å¦»ç®¡åš´å—ï¼ï¼Ÿ - å¯¦ä½œç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 6, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY22&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day22-istio-%E6%98%AF%E4%BB%80%E9%BA%BC-%E5%8E%9F%E4%BE%86%E6%98%AF%E5%AE%B9%E5%99%A8%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84%E5%A6%BB%E7%AE%A1%E5%9A%B4%E5%97%8E-%E5%AF%A6%E4%BD%9C%E7%AF%87-3230f841c9ae&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10249647&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦å°‡ Istio èˆ‡ K8s æ•´åˆï¼Œæ•´åˆä¹‹å¾Œæœƒç™¼ç¾æ¯å€‹ K8s pod éƒ½æœƒå¾
1 å€‹å®¹å™¨è®Šç‚º 2 å€‹å®¹å™¨ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/dXyh8GZ.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/dXyh8GZ.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ˜¯å› ç‚ºå®¹å™¨éƒ½å¤šäº†ä¸€å€‹ envoy proxy
å®¹å™¨ä¾†ç®¡ç†æµé‡ï¼Œå¦‚åœ–ï¼Œä¹‹å¾Œå°±å¯ä»¥å†åˆ©ç”¨ envoy proxy é…åˆ Control Plane
ä¾†æ§åˆ¶ Service Meshã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£-istio&#34;&gt;å®‰è£ Istio
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/setup/getting-started/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜ç¶²&lt;/a&gt;å·²æœ‰ç›¸ç•¶æ¸…æ¥šçš„æ•™å­¸ï¼Œåœ¨æˆ‘
Mac ä¸Šå°±æ˜¯ä¸‹è¼‰æª”æ¡ˆä¸¦ä¸”åŠ å…¥åŸ·è¡Œçš„ç’°å¢ƒè®Šæ•¸å³å¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ curl -L https://istio.io/downloadIstio | sh -$ cd istio-1.7.3
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ export PATH&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;$PWD/bin:$PATH
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é–‹å§‹æ•´åˆ&#34;&gt;é–‹å§‹æ•´åˆ
&lt;/h2&gt;&lt;p&gt;æˆ‘å€‘å°‡ä»¥æ­¤&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Example-Code&lt;/a&gt;ä¾†èªªæ˜ï¼Œ&lt;/p&gt;
&lt;p&gt;Istio è‡³å°‘éœ€è¦ K8s 1.16 ä»¥ä¸Šæ‰æ”¯æŒï¼Œè€Œä¹‹å‰çš„æ–‡ç« æ˜¯ä½¿ç”¨ K8s
1.15ï¼Œæ‰€ä»¥å¿…é ˆå…ˆåˆªé™¤ minikube çš„ K8s 1.15ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube delete
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‰µå»º 1.16 çš„ K8sï¼Œä¸¦é–‹èµ· ingress&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --driver&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;hyperkit --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube addons enable ingress
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å–å¾— minikube ipï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube ip
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°‡ç‰¹å®š&lt;code&gt;api.backend.com&lt;/code&gt;èˆ‡&lt;code&gt;web.backend.com&lt;/code&gt;è½‰æ›æˆ
minikube ipï¼Œä»¥ç¢ºä¿ ingress æ­£å¸¸é‹ä½œï¼Œè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤é–‹å•Ÿæ–‡ä»¶ä¸¦å„²å­˜ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ open /etc/hosts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/mc9HuVS.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/mc9HuVS.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£ Istio è‡³ K8sï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•Ÿç”¨&lt;code&gt;istio-injection&lt;/code&gt;ï¼Œé€™æœƒä½¿åœ¨å»ºç«‹ pod çš„æ™‚å€™ï¼Œè‡ªå‹•åœ¨ pod
ä¸­åŠ å…¥ envoy proxy å®¹å™¨ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†é€é Helm å•Ÿå‹•ä¹‹å‰ï¼Œå› ç‚º K8s 1.16 èˆ‡ 1.15 æœ‰ä¸€äº›&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/blog/2019/07/18/api-deprecations-in-1-16/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;breaking
change&lt;/a&gt;ï¼Œæ‰€ä»¥å¿…é ˆè¦åœ¨ deployment config ä¸­åŠ å…¥ selectorï¼Œå¦‚åœ–ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/IuxHnmo.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/IuxHnmo.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æœ€å¾Œå•Ÿå‹• K8s æ‡‰ç”¨ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;helm install . --generate-name&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/QvobsJT.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/QvobsJT.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Work!è€Œç´…åŒ¡è™•ä¸­å®¹å™¨å¤šäº† envoy proxyï¼Œä½†ç¶ åŒ¡è™•æœƒç™¼ç¾ä¸€ç›´å•Ÿå‹•ä¸äº† envoy
proxyï¼Œé€™å°è‡´&lt;code&gt;api.backend.com&lt;/code&gt;ä¹Ÿæ²’è¾¦æ³•æ­£å¸¸é‹ä½œï¼Œ&lt;/p&gt;
&lt;p&gt;ä¸éä¸ç”¨æ“”å¿ƒï¼Œå› ç‚º Istio æœ¬èº«å°±æ˜¯è¨­è¨ˆæ¯å€‹å®¹å™¨éƒ½è¦æœ‰å€‹ sidecar envoy
proxy äº†ï¼Œå¯¦åœ¨æ²’å¿…è¦å†è¨­è¨ˆä¸€å€‹ envoy çš„ serviceï¼Œæˆ‘å€‘ç›´æ¥ä½¿ç”¨ Istio
åŸç”Ÿçš„åŠŸèƒ½ä¾†è¨­è¨ˆå³å¯ï¼Œå°‡åœ¨ä¹‹å¾Œä»‹ç´¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/setup/getting-started/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Getting Started&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/concepts/what-is-istio/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ What is Istio?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/blog/2019/07/18/api-deprecations-in-1-16/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Deprecated
APIs Removed In 1.16: Hereâ€™s What You Need To Know | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/istio-%E6%98%AF%E4%BB%80%E9%BA%BC%E5%8E%9F%E4%BE%86%E6%98%AF%E5%AE%B9%E5%99%A8%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84%E5%A6%BB%E7%AE%A1%E5%9A%B4%E5%97%8E---%E6%A6%82%E5%BF%B5%E7%AF%87-920ee867b18b44e8ac6e86d6b8dd6f33/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/istio-%E6%98%AF%E4%BB%80%E9%BA%BC%E5%8E%9F%E4%BE%86%E6%98%AF%E5%AE%B9%E5%99%A8%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84%E5%A6%BB%E7%AE%A1%E5%9A%B4%E5%97%8E---%E6%A6%82%E5%BF%B5%E7%AF%87-920ee867b18b44e8ac6e86d6b8dd6f33/</guid>
        <description>&lt;h1 id=&#34;istio-æ˜¯ä»€éº¼åŸä¾†æ˜¯å®¹å™¨é–“é€šè¨Šçš„å¦»ç®¡åš´å—---æ¦‚å¿µç¯‡&#34;&gt;Istio æ˜¯ä»€éº¼ï¼ŒåŸä¾†æ˜¯å®¹å™¨é–“é€šè¨Šçš„å¦»ç®¡åš´å—ï¼ï¼Ÿ - æ¦‚å¿µç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 5, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY21&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day21-istio-%E6%98%AF%E4%BB%80%E9%BA%BC-%E5%8E%9F%E4%BE%86%E6%98%AF%E5%AE%B9%E5%99%A8%E9%96%93%E9%80%9A%E8%A8%8A%E7%9A%84%E5%A6%BB%E7%AE%A1%E5%9A%B4%E5%97%8E-4fe0b9c0a1d8&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10249132&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œåœ¨ K8s å‘Šä¸€æ®µè½å¾Œï¼Œæ¥ä¸‹ä¾†è¦ä¾†ä»‹ç´¹ Istioï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qKTWiW3.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/qKTWiW3.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://levelup.gitconnected.com/grpc-in-microservices-5887caef195&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC
in Microservices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;K8s èˆ‡ Istio éƒ½æ˜¯å¹³å°å±¤çš„æ¶æ§‹ï¼Œè€Œä»–å€‘çš„è·è²¬åˆ†åˆ¥æ˜¯:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;K8s: ç®¡ç†å®¹å™¨ç”Ÿå‘½é€±æœŸ&lt;/li&gt;
&lt;li&gt;Istio: ç®¡ç†å®¹å™¨é–“çš„é€šè¨Š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯èƒ½æœƒæƒ³&lt;code&gt;K8s&lt;/code&gt;ä¸æ˜¯ä¹Ÿèƒ½é€é load balance
ä¾†ç®¡ç†æµé‡ä¹‹é¡çš„é€šè¨Šå—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ˜¯çš„ï¼ŒK8s èˆ‡ Istio æœ‰è‘—è¨±å¤šç›¸ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ K8s
å¾é ­åˆ°å°¾éƒ½æ˜¯ç‚ºäº†&lt;code&gt;ç®¡ç†å®¹å™¨ç”Ÿå‘½é€±æœŸ&lt;/code&gt;è€Œç”Ÿï¼Œ&lt;code&gt;ç®¡ç†å®¹å™¨é–“çš„é€šè¨Š&lt;/code&gt;ä¸¦ä¸æ˜¯ä»–çš„å¼·é …ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®¹å™¨é–“çš„é€šè¨Š&#34;&gt;å®¹å™¨é–“çš„é€šè¨Š
&lt;/h2&gt;&lt;p&gt;åœ¨ä»¥å¾€ï¼Œå®¹å™¨é–“çš„é€šè¨Šï¼Œå¾€å¾€æ˜¯é€éç›´æ¥åœ¨å®¹å™¨è£¡çš„ code ä¾†å¯¦ä½œï¼Œ&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚èªª A service å‘¼å« B service å¤±æ•—äº†ï¼Œé‚£å°±éœ€è¦ retryï¼Œè€Œ retry å°±åœ¨
service çš„ code ä¸­å¯¦ä½œï¼Œ&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥é¸æ“‡åœ¨ code ä¸­å¯¦ä½œï¼Œä½†å‹¢å¿…å°±æœƒé€ æˆ code
ä¸­é™¤äº†æœ‰è¨±å¤š&lt;code&gt;æ‡‰ç”¨å±¤çš„é‚è¼¯&lt;/code&gt;ä»¥å¤–ï¼Œåˆå¤šäº†è¨±å¤š&lt;code&gt;å¹³å°å±¤çš„é‚è¼¯&lt;/code&gt;ï¼Œé€™ä½¿å¾—
microservice è®Šå¾—å¾ˆä¸ microserviceï¼Œå› ç‚ºæ·»åŠ äº†è¨±å¤š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éæ­¤ microservice é‚è¼¯çš„ code&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ–è€…ä½ ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SOA(service-oriented
architecture)&lt;/a&gt;æ¡†æ¶ä¾‹å¦‚ Spring
Cloudã€Go-Microï¼Œé€™æ¨£çš„æ¡†æ¶å¹«ä½ è™•ç†å®Œäº†å®¹å™¨é–“é€šè¨Šçš„å•é¡Œï¼Œä½†é€™é¡æ¡†æ¶é€šå¸¸èˆ‡
K8s æ•´åˆä¸Šæœƒé‡åˆ°äº›å•é¡Œï¼Œä½ å¯ä»¥åƒè€ƒ&lt;a class=&#34;link&#34; href=&#34;https://medium.com/brobridge/%E7%95%B6-spring-cloud-%E9%81%87%E4%B8%8A-kubernetes-5bc9e6ce602f&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ç•¶
Spring Cloud é‡ä¸Š
Kubernetes-å®Œæ•´çš„å¾®æœå‹™æ¡†æ¶å¾æ­¤ä¸å®Œæ•´äº†&lt;/a&gt;ï¼Œæœ€æ ¹æœ¬çš„åŸå› å°±æ˜¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¡†æ¶åŠŸèƒ½èˆ‡ K8s å¹³å°å±¤çš„åŠŸèƒ½é‡ç–Š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Spring Cloud ä¾†èªªï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥ç•¶ä½œä¸€å€‹å®Œæ•´çš„å¾®æœå‹™å¹³å°äº†ï¼Œå…¶å¯¦ä¸éœ€è¦
K8sï¼Œä½†ä½ çš„ backend å°±ç„¡æ³•èˆ‡ä¸»æµ K8s
é æ”ï¼Œå¦‚æœç¡¬é åˆæœƒå¾ˆå¤šçš„è¦‹æ‹›æ‹†æ‹›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;soa-èˆ‡-microservice-çš„å·®ç•°&#34;&gt;SOA èˆ‡ microservice çš„å·®ç•°
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SOA(service-oriented
architecture)&lt;/a&gt;æ˜¯æ¯” microserivce
é‚„æ—©å‡ºç¾çš„ä¸€å€‹åè©ï¼Œä¸­æ–‡ç‚º&lt;code&gt;æœå‹™å°å‘æ¶æ§‹&lt;/code&gt;ï¼Œåœ¨ç²¾ç¥ä¸Šï¼Œmicroservice
ç›¸åŒéƒ½æ˜¯&lt;code&gt;å°‡æœå‹™åˆ‡åˆ†ç‚ºæ›´å°çš„æœå‹™çµ„åˆ&lt;/code&gt;ï¼Œä½†å¦‚åœ–ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/4JXCBNA.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/4JXCBNA.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/48190148/what-is-the-difference-between-soa-and-microservices&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;What
is the difference between SOA and Microservices&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;SOA
æ›´æ³¨é‡åœ¨ä¸€å€‹æ¡†æ¶ä¸­å®Œæˆæ‰€ä»¥æœå‹™çš„çµ„åˆï¼Œå½¼æ­¤é–“çš„å‘¼å«é‚„æ˜¯è¢«æ­¤æ¡†æ¶æŒæ§ï¼Œ&lt;/p&gt;
&lt;p&gt;è€Œç¾åœ¨çš„ microservice
å°ˆæ³¨æ–¼å°‡æœå‹™å®Œå…¨åˆ‡åˆ†ï¼Œæœå‹™èˆ‡æœå‹™çš„å‘¼å«æ˜¯æ²’æœ‰ä¾é ä»»ä½•æ¡†æ¶æˆ–æ’ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœå‹™æºé€šæ—¢æ²’æœ‰ç›´æ¥ä¾è³´æ¡†æ¶æˆ–æ’ä»¶åˆå¯ä»¥ç®¡ç†çš„è°æ˜è¾¦æ³•&#34;&gt;æœå‹™æºé€šæ—¢æ²’æœ‰ç›´æ¥ä¾è³´æ¡†æ¶æˆ–æ’ä»¶ï¼Œåˆå¯ä»¥ç®¡ç†çš„è°æ˜è¾¦æ³•
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Istio Sidecar&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çµ±æ•´ä¸Šè¿°æœ‰å¹¾å€‹å•é¡Œéœ€è¦å¯¦ç¾:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åœ¨ä¸ä¿®æ”¹å®¹å™¨çš„å‰æä¸‹å¯¦ç¾å®¹å™¨é€šè¨Šçš„ç®¡ç†&lt;/li&gt;
&lt;li&gt;å®¹å™¨é€šè¨Šä¸ç›´æ¥ä¾è³´ç‰¹å®šæ¡†æ¶æˆ–æ’ä»¶&lt;/li&gt;
&lt;li&gt;ä»¥ K8s ç‚ºåŸºåº•è¨­è¨ˆ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è€Œ Istio æƒ³åˆ°çš„æ–¹æ³•å°±æ˜¯ Sidecarï¼Œæ¦‚å¿µå¾ˆç°¡å–®:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨æ¯å€‹ microserivce æ—æ–°å¢ä¸€å€‹ Envoy Proxy
ä¾†åŠ«æŒæ‰€æœ‰æµé‡ï¼Œä¸¦çµ±ä¸€æ§åˆ¶æ‰€æœ‰ proxy ä¾†ç®¡ç†é€šè¨Š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/dFVaNT0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/dFVaNT0.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚åœ–ï¼Œåœ–ä¸­æ‰€æœ‰ Envoy Proxy çš„éƒ¨åˆ†éƒ½æ˜¯é™„å±¬åœ¨ microservice
ä¸Šçš„ï¼Œå¦‚æœæˆ‘å€‘æƒ³è¦åŠ å…¥ Istioï¼Œå°æˆ‘å€‘æ•´é«”çš„ K8s
å®¹å™¨æ˜¯æ²’æœ‰å¤ªå¤§å½±éŸ¿çš„ï¼Œå› ç‚ºä»–ä¸¦ä¸æ˜¯å¯¦ä½œåœ¨å®¹å™¨ä¸­ï¼Œè€Œæ˜¯å‘å¦»ç®¡åš´é€™æ¨£å¾æ—æ‹¿å–æ‰€æœ‰æµé‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;çµè«–&#34;&gt;çµè«–
&lt;/h2&gt;&lt;p&gt;Istio
ç®¡ç†é€™äº›å®¹å™¨é€šè¨Šå¯ä»¥ç¨±ç‚º&lt;code&gt;Service Mesh&lt;/code&gt;ï¼Œæœ‰ä»¥ä¸‹å¹¾é»æœ‰ç”¨çš„åŠŸèƒ½:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è«‹æ±‚è½‰ç™¼ï¼šå¦‚æœå‹™ç™¼ç¾ï¼Œè² è¼‰å¹³è¡¡&lt;/li&gt;
&lt;li&gt;æµé‡æ§åˆ¶ï¼šæ›´åŠ å½ˆæ€§çš„åˆ†æµ&lt;/li&gt;
&lt;li&gt;æœå‹™ç™¼å¸ƒï¼šä½¿ç”¨é‡‘çµ²é›€ï¼ŒA/B ç­‰ç­‰æ–¹å¼ä¾†éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;éŒ¯èª¤ç®¡ç†ï¼šç¾æµï¼Œç†”æ–·ï¼Œé‡è©¦ï¼Œ&lt;/li&gt;
&lt;li&gt;å®‰å…¨æ€§ï¼šé©—è­‰ï¼Œæˆæ¬Šï¼ŒåŠ å¯†&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;ä¸¦ä¸” Istio å¯ä»¥è®“ä¸€åˆ‡çš„å®¹å™¨ç®¡ç†æ›´åŠ &lt;code&gt;å¹³å°å±¤åŒ–&lt;/code&gt;ï¼Œé€™æ¨£å¾Œç«¯ RD
å¯ä»¥æ›´å°ˆæ³¨æ¥­å‹™é‚è¼¯é–‹ç™¼ï¼Œè€Œæ¶æ§‹å¸«å¯ä»¥æ›´å°ˆæ³¨å¹³å°ç¶­è­·ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/48105816&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;èš‚èšé‡‘æœ Service
Mesh å®è·µæ¢ç´¢ - çŸ¥ä¹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.ithome.com.tw/news/116053&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å°å…¥å¾®æœå‹™å‰ä¸€å®šè¦çŸ¥é“çš„äº‹
| iThome&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[web&lt;/li&gt;
&lt;li&gt;What is the difference between SOA and Microservices - Stack
Overflow](&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/48190148/what-is-the-difference-between-soa-and-microservices&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/48190148/what-is-the-difference-between-soa-and-microservices&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://levelup.gitconnected.com/grpc-in-microservices-5887caef195&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC
in Microservices. Originally published here. | by Milad Irannejad |
Level Up Coding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[æœå‹™å°å‘æ¶æ§‹&lt;/li&gt;
&lt;li&gt;ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸](&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/brobridge/%E7%95%B6-spring-cloud-%E9%81%87%E4%B8%8A-kubernetes-5bc9e6ce602f&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ç•¶
Spring Cloud é‡ä¸Š Kubernetes. å®Œæ•´çš„å¾®æœå‹™æ¡†æ¶å¾æ­¤ä¸å®Œæ•´äº† | by Fred
Chienï¼ˆéŒ¢é€¢ç¥¥ï¼‰ | Brobridge - å¯¬æ©‹å¾®æœå‹™ | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/zh/docs/examples/virtual-machines/bookinfo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ åœ¨è™šæ‹Ÿæœºä¸Šéƒ¨ç½² Bookinfo åº”ç”¨ç¨‹åº&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/iterator-pattern%E8%BF%AD%E4%BB%A3%E5%90%84%E7%A8%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E7%89%A9%E4%BB%B6-1bcac51af09648c0a44144f73f0841d5/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/iterator-pattern%E8%BF%AD%E4%BB%A3%E5%90%84%E7%A8%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E7%89%A9%E4%BB%B6-1bcac51af09648c0a44144f73f0841d5/</guid>
        <description>&lt;h1 id=&#34;iterator-patternè¿­ä»£å„ç¨®ä¸åŒçš„ç‰©ä»¶&#34;&gt;Iterator Patternï¼Œè¿­ä»£å„ç¨®ä¸åŒçš„ç‰©ä»¶
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 29, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-iterator-pattern&#34;&gt;ä»€éº¼æ˜¯ Iterator Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡ä¸åŒè³‡æ–™ç‰©ä»¶é€éä¸€è‡´çš„æ–¹å¼å–å¾—å…¶ä¸­çš„å…ƒç´ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;string&lt;/code&gt;èˆ‡&lt;code&gt;[]string&lt;/code&gt;æ˜¯å…©ç¨®ä¸åŒçš„è³‡æ–™å‹æ…‹ï¼Œæˆ‘å€‘éœ€è¦è¿­ä»£è£¡é ­å…¨éƒ¨çš„å…ƒç´ ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;è¨­è¨ˆä¸€å€‹&lt;code&gt;Iterator&lt;/code&gt;interface ä»‹é¢ï¼Œè£¡é ­&lt;code&gt;.HasNext()&lt;/code&gt;ç”¨ä¾†ç¢ºèªæ˜¯å¦é‚„æ“æœ‰ä¸‹ä¸€å€‹å…ƒç´ ï¼Œ&lt;code&gt;.Next()&lt;/code&gt;ç”¨ä¾†å–å¾—å…ƒç´ èˆ‡æŠŠå…ƒç´ 
index å¾€å¾Œç§»ã€‚&lt;/p&gt;
&lt;p&gt;å°‡&lt;code&gt;string&lt;/code&gt;èˆ‡&lt;code&gt;[]string&lt;/code&gt;ä»¥&lt;code&gt;IterableString{}&lt;/code&gt;ã€&lt;code&gt;IterableSliceString{}&lt;/code&gt;å¯¦ä½œ&lt;code&gt;Iterator&lt;/code&gt;interfaceï¼Œ&lt;code&gt;PrintAllItems()&lt;/code&gt;ä¾è³´æ­¤ interface å°‡å…ƒç´ å°å‡ºã€‚&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;HasNext&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IterableSliceString&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IterableSliceString&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SliceStringIterator&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;:    &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SliceStringIterator&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IterableSliceString&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SliceStringIterator&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;HasNext&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt; &amp;lt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;SliceStringIterator&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IterableString&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IterableString&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;StringIterator&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;:    &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;StringIterator&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;IterableString&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;StringIterator&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;HasNext&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt; &amp;lt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;StringIterator&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;{} {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; string(&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;original&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;])
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;s&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;item&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PrintAllItems&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;iterator&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;iterator&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;HasNext&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;iterator&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PrintAllItems&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;IterableSliceString&lt;/span&gt;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;c&amp;#34;&lt;/span&gt;}.&lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PrintAllItems&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;IterableString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;abcd&amp;#34;&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Iterator&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éœ€æ³¨æ„çš„æ˜¯ï¼Œgolang å·²ç¶“æœ‰&lt;code&gt;range&lt;/code&gt;é—œéµå­—å¯ä»¥è¿­ä»£&lt;code&gt;string&lt;/code&gt;ã€&lt;code&gt;map&lt;/code&gt;ã€&lt;code&gt;slice&lt;/code&gt;ç­‰å‹æ…‹ï¼Œä½† Iterator Pattern ä¸é™å®šé€™äº›å‹æ…‹ï¼Œè€Œæ˜¯ä»»æ„å‹æ…‹åªè¦æ»¿è¶³&lt;code&gt;Iterator&lt;/code&gt;interface
çš„å¯¦ä½œå³å¯ï¼Œä¾‹å¦‚ golang &lt;code&gt;database/sql&lt;/code&gt;çš„&lt;code&gt;.Next()&lt;/code&gt;å°±æ˜¯ä»¥ Iterator Pattern å° rows ä¸€å€‹ä¸€å€‹è¿­ä»£ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/kompose%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92-kubernetes-%E4%B8%8D%E6%98%AF%E5%A4%A2-4a6fe23124654a8cbde893b8ecb4b8b6/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/kompose%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92-kubernetes-%E4%B8%8D%E6%98%AF%E5%A4%A2-4a6fe23124654a8cbde893b8ecb4b8b6/</guid>
        <description>&lt;h1 id=&#34;komposeå¿«é€Ÿå­¸ç¿’-kubernetes-ä¸æ˜¯å¤¢&#34;&gt;Komposeï¼å¿«é€Ÿå­¸ç¿’ Kubernetes ä¸æ˜¯å¤¢
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 1, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY17&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day17-kompose-%E5%BF%AB%E9%80%9F%E5%AD%B8%E7%BF%92-kubernetes-%E4%B8%8D%E6%98%AF%E5%A4%A2-93c10868e0ee&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10247631&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/YDTq5K0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/YDTq5K0.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œé€™æ¬¡è¦ä»‹ç´¹ komposeï¼Œæˆ‘å€‘å°‡å…ˆ run èµ· K8sï¼Œå†ä¾†ä»‹ç´¹ K8s
çš„ç´°ç¯€ï¼Œé€™æ¨£å¯èƒ½æ¯”è¼ƒå¥½è®“å¤§å®¶ç†è§£(åŒ…æ‹¬æˆ‘ XD)&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£ç›¸é—œå¥—ä»¶&#34;&gt;å®‰è£ç›¸é—œå¥—ä»¶
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/docs/tasks/tools/install-minikube/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;minikube&lt;/a&gt;:
å¯ä»¥åœ¨æœ¬æ©Ÿé›»è…¦å®‰è£ä¸€å€‹ç°¡å–®çš„ K8s ç’°å¢ƒ&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/zh/docs/tasks/configure-pod-container/translate-compose-kubernetes/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;kompose&lt;/a&gt;:
å°‡ docker-compose æª”ç„¡ç—›è½‰ç§»è‡³ K8s çš„ yaml æª”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/4HZwrV1.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/4HZwrV1.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://platform9.com/docs/deploy-kubernetes-the-ultimate-guide/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;deploy-kubernetes-the-ultimate-guide&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;minikube åœ¨æœ¬æ©Ÿé›»è…¦æœƒå®‰è£ä¸€å€‹ VMï¼Œä»¥æ¨¡æ“¬å¢é›†(Cluster)çš„ç’°å¢ƒï¼Œä»¥æ¸›å°‘
K8s çš„é…ç½®æ™‚é–“æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ&#34;&gt;å¯¦ä½œ
&lt;/h2&gt;&lt;p&gt;clone ç¯„ä¾‹ &lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github-Example-Code&lt;/a&gt;ï¼Œä¸¦é€²å…¥æ­¤ç¯‡æ–‡ç« çš„ç¯„ä¾‹
folder&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY17
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•Ÿå‹• minikube &lt;code&gt;1.15.0&lt;/code&gt; çš„ K8s ç‰ˆæœ¬ï¼Œé€™å€‹ç‰ˆæœ¬èˆ‡ kompose
ç›¸å®¹æ€§è¼ƒå¥½&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.15.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ kompose ä¾†å•Ÿå‹• K8s çš„ç›¸é—œ config&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kompose up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç€è¦½å¯¦éš›çš„ç¶²é &lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube service web
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ™‚æœƒçœ‹åˆ° web çš„ç›¸é—œ IP&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/T62NtcY.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/T62NtcY.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ‰“é–‹ç€è¦½å™¨ï¼ŒWork!&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ferJqWn.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ferJqWn.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;è½‰æ›å‡º-yaml-æª”&#34;&gt;è½‰æ›å‡º yaml æª”
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/FTdisWd.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/FTdisWd.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/sHZdiDx.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/sHZdiDx.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é€™äº›å°±æ˜¯åŸ·è¡Œ&lt;code&gt;kompose up&lt;/code&gt;å¯¦éš›çš„ config yaml
æª”ï¼Œè€Œä»–å€‘ä»£è¡¨çš„æ„æ€å°‡åœ¨ä¹‹å¾Œæ–‡ç« ä»‹ç´¹ï¼Œè¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@xyz030206/dockerfile-%E4%B8%AD%E7%9A%84-entrypoint-9653c3b2d2f8&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Dockerfile
ä¸­çš„ ENTRYPOINT. ENTRYPOINT æ˜¯ Dockerfile
å®šç¾©çš„ä¸€å€‹æŒ‡ä»¤ï¼Œä»–çš„ä½œç”¨é¡ä¼¼æ–¼â€¦ | by Justin Chien | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/zh/docs/tasks/configure-pod-container/translate-compose-kubernetes/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å°†
Docker Compose æ–‡ä»¶è½¬æ¢ä¸º Kubernetes èµ„æº | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/docs/setup/learning-environment/minikube/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Installing
Kubernetes with Minikube | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/docs/tasks/tools/install-minikube/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Install
Minikube | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://platform9.com/docs/deploy-kubernetes-the-ultimate-guide/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Deploy
Kubernetes: The Ultimate Guide - Platform9&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/kubernetes%E7%AE%A1%E7%90%86%E4%B8%80%E5%88%87%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9A%84%E4%B8%96%E7%95%8C%E6%A8%B9-698db94a64a243ed83b2d018ab5a24a9/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/kubernetes%E7%AE%A1%E7%90%86%E4%B8%80%E5%88%87%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9A%84%E4%B8%96%E7%95%8C%E6%A8%B9-698db94a64a243ed83b2d018ab5a24a9/</guid>
        <description>&lt;h1 id=&#34;kubernetesç®¡ç†ä¸€åˆ‡å¾®æœå‹™çš„ä¸–ç•Œæ¨¹&#34;&gt;Kubernetesï¼ç®¡ç†ä¸€åˆ‡å¾®æœå‹™çš„ä¸–ç•Œæ¨¹
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 30, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY16&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day16-kubernetes-%E7%AE%A1%E7%90%86%E4%B8%80%E5%88%87%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9A%84%E4%B8%96%E7%95%8C%E6%A8%B9-f46af8e1f424&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10246632&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BPMtKcf.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/BPMtKcf.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œåœ¨å‰é¢ 15
å¤©è¬›è§£å®Œ&lt;code&gt;æ‡‰ç”¨å±¤&lt;/code&gt;ç›¸é—œçš„å¾®æœå‹™å¾Œï¼Œç¾åœ¨çµ‚æ–¼è¦ä¾†ä»‹ç´¹&lt;code&gt;å¹³å°å±¤&lt;/code&gt;ï¼&lt;/p&gt;
&lt;p&gt;è€Œ&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes&lt;/a&gt;(K8s)å³æ˜¯é€™æ¬¡ä¸»è§’ï¼Œä»–åˆ°åº•è·Ÿ
Docker æ˜¯ä»€éº¼æ¨£çš„é—œä¿‚ï¼Ÿä½ çš„å¾Œç«¯éœ€è¦ä»–å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘æœƒä»¥ä¸€å€‹å·¥ç¨‹å¸«ï¼Œå¾&lt;code&gt;ç´”Dockerå¾Œç«¯æ…¢æ…¢åˆ°ç™¼ç¾éœ€è¦K8så“ªäº›å¥½ç”¨çš„åŠŸèƒ½&lt;/code&gt;ï¼Œä¾†èªªæ˜
K8s è§£æ±ºçš„å•é¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;code-å³æ˜¯å¾Œç«¯çš„æ¶æ§‹&#34;&gt;code å³æ˜¯å¾Œç«¯çš„æ¶æ§‹
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ç•¶å¾Œç«¯å®¹å™¨è¶Šä¾†è¶Šå¤šï¼Œå°±æœƒéœ€è¦å¯ä»¥ç®¡ç†å¤§é‡å®¹å™¨çš„æ–¹æ¡ˆ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸€é–‹å§‹ä½¿ç”¨ Docker æ™‚ï¼Œå¾Œç«¯çš„å®¹å™¨ä¸å¤šï¼Œå¯ä»¥å–®ç´”ä½¿ç”¨ docker-compose
å³å¯è§£æ±ºå¤šå€‹å®¹å™¨äº’å‹•çš„éœ€æ±‚ï¼Œä½†åœ¨å®¹å™¨è¶Šä¾†è¶Šå¤šæ™‚ï¼Œæœƒç”¢ç”Ÿä»¥ä¸‹å•é¡Œ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å®¹å™¨çš„é€£æ¥è®Šå¾—è¤‡é›œ&lt;/li&gt;
&lt;li&gt;å®¹å™¨çš„æ›´æ–°é ˆå¯«è…³æœ¬ç¶­è­·&lt;/li&gt;
&lt;li&gt;å®¹å™¨æ˜¯å¦æ›äº†é›£ä»¥ç›£æ§&lt;/li&gt;
&lt;li&gt;å®¹å™¨å¦‚æœæµé‡éœ€æ±‚å¢é«˜ï¼Œè¦è‡ªå‹•å¢åŠ å®¹å™¨ä¾†ç·©è§£æµé‡&lt;/li&gt;
&lt;li&gt;å®¹å™¨é™ç‰ˆ/å‡ç‰ˆéœ€è¦è…³æœ¬ä¾†æ§åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é—œæ–¼é€™äº›å•é¡Œï¼Œæˆ‘æ›¾ç¶“å¯«éè…³æœ¬ä¾†ç¶­è­·ï¼Œä½†ç•¶æœå‹™è¶Šä¾†è¶Šå¤§ï¼Œè…³æœ¬çš„éœ€æ±‚å°±è¶Šä¾†è¶Šå¤šï¼Œéœ€è¦éå¸¸å¤šæˆæœ¬ã€‚è€Œ
K8s æä¾›äº†åƒä»¥ä¸‹&lt;code&gt;config&lt;/code&gt;çš„ yaml
å½¢å¼ä¾†æ§åˆ¶ä»¥ä¸Šå•é¡Œï¼Œè®“ä¸€åˆ‡æ¶æ§‹ä»¥&lt;code&gt;config&lt;/code&gt;ä¾†è¨­è¨ˆä¸¦éè‡ªå·±é€ è¼ªå­å¯«è…³æœ¬ä¾†ç¶­è­·&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion: v1kind: Podmetadata:  name: site  labels:    app: webspec:  containers:    - name: front-end      image: nginx      ports:        - containerPort&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;k8s-æ¶æ§‹&#34;&gt;K8s æ¶æ§‹
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/H3HbcvY.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/H3HbcvY.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;http://pmtechfusion.blogspot.com/2017/07/using-kubernetes-k8s-to-manage.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Project
Management &amp;amp; Technology Fusion: Using Kubernetes (K8S) to manage
Container cluster (Docker)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;K8s æœƒå…ˆå•Ÿå‹•ä¸€å€‹ Master nodeï¼Œåº•ä¸‹æœƒæœ‰è¨±å¤šçš„ Worker Nodeï¼Œè€Œ Worker
node è£¡é ­æœƒæœ‰è¨±å¤šçš„å®¹å™¨ï¼ŒK8s ä¸»è¦çš„ç›®æ¨™å°±æ˜¯ç®¡ç†é€™äº›å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;K8s ä¸»è¦å°±æ˜¯æŠŠå¤šå°æ©Ÿå™¨åŠ ä»¥æŠ½è±¡ï¼Œä½¿ä»–å€‘å°±åƒä¸€å°å¤§æ©Ÿå™¨å·¥ä½ æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;è€Œ K8s ä¸€é–‹å§‹çš„ç›®æ¨™æ˜¯ç®¡ç†å®¹å™¨ï¼Œè€Œä¸ç®¡ç†é‹è¡Œå®¹å™¨çš„
VMï¼Œä¸éå¾Œä¾†æœ‰æ–°å¢&lt;code&gt;Cluster Autoscaler(CA)&lt;/code&gt;æ–¹æ¡ˆä¾†ç®¡ç†
VMï¼Œä½†ä½ ä½¿ç”¨çš„å¹³å°å¿…é ˆè¦æœ‰æ”¯æ´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;hpavpaca&#34;&gt;HPAã€VPAã€CA
&lt;/h2&gt;&lt;p&gt;K8s æœ‰æä¾›ä¸‰ç¨®æ–¹æ³•ä¾†ç®¡ç†&lt;code&gt;å®¹å™¨å°æµé‡çš„éœ€æ±‚&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Horizontal Pod Autoscaler(HPA): ä»¥å¢åŠ å®¹å™¨çš„æ–¹å¼ä¾†æä¾›æµé‡éœ€æ±‚&lt;/li&gt;
&lt;li&gt;Vertical Pod Autoscaler(VPA): ä»¥åˆ†é…å®¹å™¨æ‰€éœ€çš„ CPU/Memory
ä¾†æä¾›æµé‡éœ€æ±‚&lt;/li&gt;
&lt;li&gt;Cluster Autoscaler(CA): å·²å¢åŠ æ•´å€‹å¢é›†ä¾†æä¾›æµé‡éœ€æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.sumologic.com/blog/kubernetes-vs-docker/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
Vs Docker | Sumo Logic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://hackernoon.com/why-and-when-you-should-use-kubernetes-8b50915d97d8&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Why
(and when) you should use Kubernetes | Hacker Noon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.thundra.io/do-you-really-need-kubernetes&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Do
you really need Kubernetes?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.blog/2020/05/29/why-kubernetes-getting-so-popular/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Why
is Kubernetes getting so popular? - Stack Overflow Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.platform9.com/kubernetes/create-cluster-aws-horizontal-autoscale/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Create
Horizontally Auto-Scaling Cluster on AWS | Platform9
Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.servicemesher.com/blog/k8s-autoscaling-all-you-need-to-know/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;ä½ å¿…çŸ¥çš„
Kubernetes è‡ªåŠ¨ç¼©æ”¾ Â· Service Mesh|æœåŠ¡ç½‘æ ¼ä¸­æ–‡ç¤¾åŒº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://weihanglo.tw/posts/2020/k8s-autoscaling/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kuberenetes
Autoscaling ç›¸é—œçŸ¥è­˜å°æ•´ç† â€¢ Weihang Lo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://pmtechfusion.blogspot.com/2017/07/using-kubernetes-k8s-to-manage.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Project
Management &amp;amp; Technology Fusion: Using Kubernetes (K8S) to manage
Container cluster (Docker)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/producer-consumer-pattern%E9%BB%9E%E8%8F%9C%E4%BA%86%E4%B8%89%E4%BB%BD%E7%A9%BF%E8%A4%B2%E5%AD%90%E7%9A%84%E8%B1%AC%E4%B8%80%E7%9B%A4%E7%86%B1%E7%A9%BA%E6%B0%A3%E6%8A%8A%E7%89%9B%E8%AE%8A%E6%88%90%E9%B1%92%E9%AD%9A-f0fe93a548d54e8ab35e79f76eec85d2/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/producer-consumer-pattern%E9%BB%9E%E8%8F%9C%E4%BA%86%E4%B8%89%E4%BB%BD%E7%A9%BF%E8%A4%B2%E5%AD%90%E7%9A%84%E8%B1%AC%E4%B8%80%E7%9B%A4%E7%86%B1%E7%A9%BA%E6%B0%A3%E6%8A%8A%E7%89%9B%E8%AE%8A%E6%88%90%E9%B1%92%E9%AD%9A-f0fe93a548d54e8ab35e79f76eec85d2/</guid>
        <description>&lt;h1 id=&#34;producer-consumer-patterné»èœäº†ä¸‰ä»½ç©¿è¤²å­çš„è±¬ä¸€ç›¤ç†±ç©ºæ°£æŠŠç‰›è®Šæˆé±’é­š&#34;&gt;Producer Consumer Patternï¼Œé»èœäº†ï¼Œä¸‰ä»½ç©¿è¤²å­çš„è±¬ï¼Œä¸€ç›¤ç†±ç©ºæ°£ï¼ŒæŠŠç‰›è®Šæˆé±’é­š
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 8, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-producer-consumer-pattern&#34;&gt;ä»€éº¼æ˜¯ Producer Consumer Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å¤šå€‹ Producer(ç”Ÿç”¢è€…)æä¾›ä»» Job ä»»å‹™ï¼Œå¤šå€‹ Consumer(æ¶ˆè²»è€…)æ¶ˆè²»ä»»å‹™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ‰æ™‚å€™ç³»çµ±çš„ä»»å‹™ä¸æœƒç›´æ¥åŸ·è¡Œï¼Œè€Œç”±å¤šå€‹ Producer ç¨‹åºå­˜åˆ°ä¸€å€‹ queue
ä¸­ï¼Œå†ç”±å…¶ä»– Consumer ç¨‹åºè®€å– queue åŸ·è¡Œï¼Œé€™æ¨£çš„è©±å¯ä»¥ä½¿ Producer èˆ‡
Consumer ç¨‹åºé–“æ²’æœ‰ç›´æ¥é—œä¿‚ï¼Œä»–å€‘åªä¾è³´ queueï¼Œå³å¯è§£è€¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚åœ¨å¾®æœå‹™çš„ç³»çµ±ä¸‹ï¼Œæœƒåˆ©ç”¨ kafka ä¾†åš message queue systemï¼Œé€™æ¨£å³ä½¿å¾®æœå‹™ auto scaling(æ°´å¹³æ“´å¢)ä¹Ÿä¸æœƒç‚ºæœå‹™æ‰¾ä¸åˆ°å½¼æ­¤ï¼Œä»¥ golang çš„ç¶­åº¦å»å°æ¯”é€™å€‹å•é¡Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/0RDIfoI.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/0RDIfoI.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç”±æ–¼ Producer goroutine ç›´æ¥å‘¼å« A Consumer goroutineï¼Œå°è‡´å…©è€…ç¶å®šï¼ŒProducer goroutine æ²’æœ‰æ©ŸæœƒæŠŠè³‡è¨Šå‚³é€çµ¦ B Consumer goroutine æ¶ˆè²»ï¼Œé€™æ¨£è³‡è¨Šä¸€å¤šæ™‚ï¼ŒConsumer
ç¨‹åºæ²’è¾¦æ³•å¢å¼·æ¶ˆè²»èƒ½åŠ›æœƒå°è‡´ç·©æ…¢ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æœƒè¨­è¨ˆä¸€å€‹ job channel ä¾†æœé›†å¤šå€‹ Producer çš„ Jobï¼Œä¸¦äº¤ç”± Consumer è™•ç†ï¼Œgorotine åªç›¸ä¾ channel è€Œä¸æ˜¯å…¶ä»– gorotineï¼Œå°±å¯ä»¥æ“´å¢ gorotine çš„æ•¸é‡ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/V4GT2nX.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/V4GT2nX.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;é¡ä¼¼ Uber çš„è¨ˆç¨‹è»Šç³»çµ±ï¼Œæœƒæœ‰å¤šå€‹ä½¿ç”¨è€…å«è»Šï¼Œä¸åŒçš„å¸æ©Ÿæ¥å–®æœƒæ”¶åˆ°æ­¤ä½¿ç”¨è€…çš„è³‡è¨Šã€‚&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¦ä½œæœ‰å•é¡Œçš„ç³»çµ±å¦‚ä¸‹ï¼Œæœ‰ä¸‰ä½ä½¿ç”¨è€…&lt;code&gt;ç³–ç³–&lt;/code&gt;ã€&lt;code&gt;é¹½é¹½&lt;/code&gt;ã€&lt;code&gt;ä¹–ä¹–&lt;/code&gt;åˆ†åˆ¥æœƒä½¿ç”¨&lt;code&gt;UberProducer()&lt;/code&gt;å»å«è»Šï¼Œç”±æ–¼æ²’æœ‰ job channelï¼Œæ¯ä½ä½¿ç”¨è€…éƒ½åœ¨å«è»Šæ™‚å°±è¦ç«‹å³ç”¨&lt;code&gt;UberConsumer()&lt;/code&gt;æŒ‡å®šå¸æ©Ÿè¼‰äººï¼Œé€™å°è‡´ç³»çµ±æ²’æœ‰åˆ†é… job çµ¦ consumer çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;userInfos&lt;/span&gt; = []&lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç³–ç³–&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¹½é¹½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¹–ä¹–&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberConsumer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;userInfos&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;], &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberConsumer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;userInfo&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;uber consumer %d get %s user\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;userInfo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducerCount&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;userInfos&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducerCount&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€™ä½¿å¾—æ¯æ¬¡å«è»Šéƒ½åªæœƒå«åˆ° consumer 0, 1, 2ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/1xTXGJ0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/1xTXGJ0.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;ä¸‰ä½ä½¿ç”¨è€…ä¸€æ¨£ä½¿ç”¨&lt;code&gt;UberProducer()&lt;/code&gt;å»å«è»Šï¼Œè€Œè¨­è¨ˆä¸€å€‹ job channel æœƒæœé›†é€™ä¸‰ä½ä½¿ç”¨è€…çš„å«è»Šå–®èˆ‡è³‡è¨Šã€‚è€Œ&lt;code&gt;UberConsumer()&lt;/code&gt;å‰‡æœƒåˆ©ç”¨&lt;code&gt;for userInfo := range job&lt;/code&gt;ä¸æ–·ç›£è½ job channel æ˜¯å¦æœ‰æ–°çš„å«è»Šï¼Œå¦‚æœæœ‰çš„è©±å°±åŸ·è¡Œè¼‰å®¢æœå‹™&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;userInfos&lt;/span&gt; = []&lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ç³–ç³–&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é¹½é¹½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¹–ä¹–&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;userInfos&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberConsumer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;userInfo&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;uber consumer %d get %s user\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;userInfo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UserInfo&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducerCount&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;userInfos&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;UberConsumerCount&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducerCount&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberProducer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberConsumerCount&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;UberConsumer&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ–¼ job channel çš„é—œä¿‚ï¼Œåªè¦æ­£åœ¨ç­‰å¾…çš„ consumer éƒ½æœ‰æ©Ÿæœƒç²å¾— jobï¼Œæ‰€ä»¥é‹è¡Œçš„çµæœæ˜¯ consumer 3, 0, 4 è¼‰åˆ°å®¢ï¼Œä¸¦é 0, 1, 2ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Fip4AAX.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/Fip4AAX.png&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/prototype-pattern%E5%89%B5%E5%BB%BA%E7%89%A9%E4%BB%B6%E4%B8%8D%E5%86%8D%E5%BE%9E%E9%A0%AD%E9%96%8B%E5%A7%8B%E6%B5%AA%E8%B2%BB%E6%99%82%E9%96%93-4607517d38ca4ebebb3edb90393b9fb1/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/prototype-pattern%E5%89%B5%E5%BB%BA%E7%89%A9%E4%BB%B6%E4%B8%8D%E5%86%8D%E5%BE%9E%E9%A0%AD%E9%96%8B%E5%A7%8B%E6%B5%AA%E8%B2%BB%E6%99%82%E9%96%93-4607517d38ca4ebebb3edb90393b9fb1/</guid>
        <description>&lt;h1 id=&#34;prototype-patternå‰µå»ºç‰©ä»¶ä¸å†å¾é ­é–‹å§‹æµªè²»æ™‚é–“&#34;&gt;Prototype Patternï¼Œå‰µå»ºç‰©ä»¶ä¸å†å¾é ­é–‹å§‹æµªè²»æ™‚é–“
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 19, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-prototype-pattern&#34;&gt;ä»€éº¼æ˜¯ Prototype Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å°‡ç‰©ä»¶ä»¥æ‹·è²çš„æ–¹å¼å»ºç«‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæŸé¡ç‰©ä»¶åœ¨åˆå§‹åŒ–æ™‚ï¼Œæœƒæ¶ˆè€—å¤§é‡çš„æˆæœ¬ï¼Œä¾‹å¦‚ï¼šã€Œå° DB åš queryã€è®€å– json fileã€è®€å–ä½¿ç”¨è€…æ»‘é¼ çš„è»Œè·¡ã€ï¼Œé‚£åœ¨å»ºç«‹å®Œæ­¤ç‰©ä»¶å¾Œï¼Œåˆé ˆå»ºç«‹æ­¤æ­¤é¡ç›¸ä¼¼çš„ç‰©ä»¶æ™‚ï¼Œæˆ‘å€‘æœƒå¸Œæœ›ç”¨æ‹·è²(copy)çš„ï¼Œä»¥é¿å…åˆå§‹åŒ–çš„æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæ‹·è²é€™ä»¶äº‹ï¼Œåˆæœ‰åˆ†&lt;strong&gt;æ·±æ‹·è²(deep copy)&lt;/strong&gt; èˆ‡&lt;strong&gt;æ·ºæ‹·è²(shallow copy)&lt;/strong&gt;ï¼Œå¦‚æœæ˜¯æœ‰ javascript ç¶“é©—çš„é–‹ç™¼è€…ä¸€å®šå¾ˆç†Ÿæ‚‰é€™å…©å€‹è©ï¼Œåœ¨ golang ä»–å€‘ä¸»è¦æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ·±æ‹·è²(deep copy)ï¼šç•¶æ‹·è²æ™‚æ˜¯æ‹·è²æ•¸æ“šæœ¬èº«ï¼Œæ‰€ä»¥å°æ‹·è²çš„æ•¸æ“šä¿®æ”¹ï¼Œä¸æœƒå½±éŸ¿åˆ°åŸæœ¬çš„æ•¸æ“šï¼ŒIntã€Floatã€Stringã€Boolã€Structã€Array
éƒ½æ¡ç”¨é€™é¡è¤‡è£½&lt;/li&gt;
&lt;li&gt;æ·ºæ‹·è²(shallow copy)ï¼šç•¶æ‹·è²æ™‚æ˜¯æ‹·è²æ•¸æ“šæŒ‡æ¨™ï¼Œæ‰€ä»¥å°æ‹·è²çš„æ•¸æ“šä¿®æ”¹ï¼Œæœƒå½±éŸ¿åˆ°åŸæœ¬çš„æ•¸æ“šï¼ŒSliceã€Map
éƒ½æ¡ç”¨é€™é¡è¤‡è£½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½¿ç”¨æ·ºæ‹·è²é€šå¸¸æ˜¯ç‚ºäº†æ›´ç¯€çœè¨˜æ†¶é«”ï¼Œä½†å¦‚æœè¤‡è£½å‡ºä¾†çš„æ•¸æ“šæœ‰è¦å®Œå…¨ç¨ç«‹çš„éœ€æ±‚å¾—æ¡ç”¨æ·±æ‹·è²ï¼Œ&lt;/p&gt;
&lt;p&gt;å°ç¯€ä¸€ä¸‹ Prototype Pattern çš„å„ªç¼ºé»ï¼š&lt;/p&gt;
&lt;p&gt;å„ªé»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸éœ€è¦åˆå§‹åŒ–çš„æˆæœ¬&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼ºé»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éœ€è¦æ³¨æ„æ·±æ·ºæ‹·è²çš„å·®ç•°ï¼Œä¸ç„¶æœ‰å¯èƒ½æœƒä¿®æ”¹åˆ°åŸå§‹çš„æ•¸æ“š&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;Sony å·²ç¶“åšå‡ºäº† PS5 åŸå‹æ©Ÿï¼Œåœ¨é€™å€‹éç¨‹ä¸­æœ‰ç¶“æ­·ã€Œå»ºæ¨¡ã€åˆ†æç¡¬é«”æ•¸æ“šã€æ•ˆèƒ½æ¸¬è©¦ã€ç­‰å‹•ä½œï¼Œä½†ç¾åœ¨è¦é‡ç”¢ PS5ï¼Œä¸¦ä¸éœ€è¦é€™äº›æµªè²»æ™‚é–“çš„å‹•ä½œï¼Œä¹Ÿä¸éœ€è¦ä½¿ç”¨åŸå‹çš„çµ„ä»¶ä¾†é‡ç”¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Version&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;     []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Modeling&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// æ¨¡æ“¬è€—æ™‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;LoadTest&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// æ¨¡æ“¬è€—æ™‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Analysis&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;// æ¨¡æ“¬è€—æ™‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Clone&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// å°‡åŸºæœ¬ç‰©ä»¶æ‹·è²
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ç”±æ–¼Sliceæ˜¯æ·ºæ‹·è²ï¼Œæ‰€ä»¥å¿…é ˆé€écopyæ–¹æ³•ä¾†æŠŠæ·±å±¤å…ƒç´ æ‹·è²
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, len(&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	copy(&lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;cpu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ç”±æ–¼Mapæ˜¯æ·ºæ‹·è²ï¼Œæ‰€ä»¥éœ€æŠŠå…ƒç´ ä¸€å€‹ä¸€å€‹æ‹¿å‡ºä¾†æ‹·è²
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;k&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;[&lt;span style=&#34;color:#a6e22e&#34;&gt;k&lt;/span&gt;] = &lt;span style=&#34;color:#a6e22e&#34;&gt;v&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePrototypePS5&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Version&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Prototype&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;:     []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åŸå‹CPU&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;:     make(&lt;span style=&#34;color:#66d9ef&#34;&gt;map&lt;/span&gt;[&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GPU&amp;#34;&lt;/span&gt;] = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åŸå‹GPU&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Modeling&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;LoadTest&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Analysis&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePrototypePS5&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Clone&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Version&lt;/span&gt; = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Version-1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é‡ç”¢CPU&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GPU&amp;#34;&lt;/span&gt;] = &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;é‡ç”¢GPU2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;prototypePS5&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¯„ä¾‹ä¸­&lt;code&gt;PS5{}.CPU&lt;/code&gt;èˆ‡&lt;code&gt;PS5{}.GPU&lt;/code&gt;åˆ†åˆ¥æ˜¯ Slice èˆ‡ Mapï¼Œç”±æ–¼éƒ½æ˜¯&lt;strong&gt;æ·ºæ‹·è²&lt;/strong&gt;çš„æ•¸æ“šï¼Œæ‰€ä»¥éœ€è¦æ‰‹å‹•ä»¥&lt;code&gt;copy()&lt;/code&gt;èˆ‡ for è¿´åœˆä¾†å°‡ç‰©ä»¶å…ƒç´ ä¸€å€‹ä¸€å€‹è¤‡è£½ï¼Œè€Œ&lt;code&gt;PS5{}.Version&lt;/code&gt;å°±ä¸éœ€è¦æ‰‹å‹•è¤‡è£½ï¼Œå› ç‚ºæ˜¯&lt;strong&gt;æ·±æ‹·è²&lt;/strong&gt;çš„æ•¸æ“šå½¢æ…‹&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/proxy-pattern%E8%AE%93%E4%BB%A3%E7%90%86%E4%BA%BA%E6%93%8D%E4%BD%9C%E5%AF%A6%E9%9A%9B%E7%9A%84%E7%89%A9%E4%BB%B6-fc42e102d5e3412d84c4a63c3573d5ad/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/proxy-pattern%E8%AE%93%E4%BB%A3%E7%90%86%E4%BA%BA%E6%93%8D%E4%BD%9C%E5%AF%A6%E9%9A%9B%E7%9A%84%E7%89%A9%E4%BB%B6-fc42e102d5e3412d84c4a63c3573d5ad/</guid>
        <description>&lt;h1 id=&#34;proxy-patternè®“ä»£ç†äººæ“ä½œå¯¦éš›çš„ç‰©ä»¶&#34;&gt;Proxy Patternï¼Œè®“ä»£ç†äººæ“ä½œå¯¦éš›çš„ç‰©ä»¶
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 26, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-proxy-pattern&#34;&gt;ä»€éº¼æ˜¯ Proxy Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è®“ä»£ç†ç‰©ä»¶æ“ä½œå¯¦éš›ç‰©ä»¶ï¼Œè®“ä»£ç†ç‰©ä»¶è™•ç†èˆ‡æ¥­å‹™é‚è¼¯ç„¡é—œçš„äº‹æƒ…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/2VKPdO9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/2VKPdO9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ“ä½œç‰©ä»¶æ™‚ï¼Œæœ‰æ™‚å€™æˆ‘å€‘æœ‰åŠ ä¸Š logã€æ¬Šé™ç®¡æ§ç­‰ç­‰åŠŸèƒ½ï¼Œé€™è·Ÿå¯¦éš›æ“ä½œç‰©ä»¶çš„æ¥­å‹™ç„¡é—œï¼Œé€™æ™‚å°±å¯ä»¥ç”¨ Proxy Pattern ä¾†å»è™•ç†ä»£ç†é€™äº›åŠŸèƒ½ï¼Œä¸¦ä¸”ä¿æŒä»‹é¢ç›¸åŒã€‚&lt;/p&gt;
&lt;p&gt;Proxy Pattern èˆ‡ Decorator Pattern ç›¸ä¼¼ï¼Œå…©è€…ä¸»è¦å·®ç•°æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Proxy Pattern: æ˜¯å¢åŠ æ–°çš„åŠŸèƒ½åœ¨åŸç‰©ä»¶ä¸Š&lt;/li&gt;
&lt;li&gt;Decorator Pattern: æ˜¯å¢å¼·åŸç‰©ä»¶çš„åŠŸèƒ½&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;PS5 åœ¨ç©é–‹å•ŸéŠæˆ²æ™‚ï¼Œéœ€è¦æ–°å¢ logï¼Œä½†å¦‚æœåœ¨åŸæœ¬æ¥­å‹™é‚è¼¯ä¸ŠåŠ ä¸Š log æœƒæ¨¡ç³Šæ‰æ¥­å‹™çš„æ„åœ–ï¼Œæˆ‘å€‘éœ€è¦æœ‰æ–¹æ³•è§£æ±ºæ­¤å•é¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/6sOJHEj.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/6sOJHEj.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ–°å¢ä¸€å€‹&lt;code&gt;PS5&lt;/code&gt;interfaceï¼Œ&lt;code&gt;PS5Machine{}&lt;/code&gt;èˆ‡&lt;code&gt;PS5MachineProxy{}&lt;/code&gt;éƒ½ä¾ç…§æ­¤ interface
å¯¦ä½œï¼Œé€™æ¨£ä½¿ç”¨è€…åœ¨ä½¿ç”¨æ™‚åªè¦ä¾è³´&lt;code&gt;PS5&lt;/code&gt;interfaceï¼Œå°±éƒ½å¯ä»¥ä½¿ç”¨&lt;code&gt;PS5Machine{}&lt;/code&gt;èˆ‡&lt;code&gt;PS5MachineProxy{}&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;PS5MachineProxy{}.PlayGame()&lt;/code&gt;è£¡å‘¼å«&lt;code&gt;PS5Machine{}.PlayGame()&lt;/code&gt;ï¼Œä¸¦åœ¨æ•´å€‹å¯¦ä½œæ·»åŠ  logã€‚&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewPS5Machine&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play game&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachineProxy&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewPS5MachineProxy&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Machine&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachineProxy&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachineProxy&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5MachineProxy&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play game cost time: %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewPS5MachineProxy&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;NewPS5Machine&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/read-write-lock-pattern%E4%B8%89%E4%BA%BA%E6%88%90%E8%99%8E%E4%B8%80%E4%BA%BA%E6%89%93%E8%99%8E-4773ba2595ff45e59391255ff250c3c6/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/read-write-lock-pattern%E4%B8%89%E4%BA%BA%E6%88%90%E8%99%8E%E4%B8%80%E4%BA%BA%E6%89%93%E8%99%8E-4773ba2595ff45e59391255ff250c3c6/</guid>
        <description>&lt;h1 id=&#34;read-write-lock-patternä¸‰äººæˆè™ä¸€äººæ‰“è™&#34;&gt;Read-Write-Lock Patternï¼Œä¸‰äººæˆè™ï¼Œä¸€äººæ‰“è™ï¼
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 3, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-read-write-lock-pattern&#34;&gt;ä»€éº¼æ˜¯ Read-Write-Lock Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å¤šè®€å–®å¯«ã€‚å°‡ lock åˆ†ç‚º read èˆ‡ write å…©ç¨®ï¼Œè®“ lock æ•ˆèƒ½æ›´ä½³ï¼Œread
è¡Œç‚ºä¸æœƒæ”¹è®Šè³‡æ–™ï¼Œæ‰€ä»¥ read lock æ™‚å¯ä»¥å†åŒæ™‚ readï¼Œé”åˆ°ã€Œå¤šè®€ã€ï¼Œè€Œ
write è¡Œç‚ºæœƒæ”¹è®Šè³‡æ–™ï¼Œæ‰€ä»¥ write lock ä¸èƒ½å†åŒæ™‚ read èˆ‡ write æ™‚ï¼Œé”åˆ°ã€Œå–®å¯«ã€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;read, write ä¸­åœ¨å–å¾— lock çš„æ™‚å€™ï¼Œåªè¦ç¢°åˆ°ä»¥ä¸‹å…©ç¨®ã€Œè¡çª
conflictã€ç‹€æ…‹ï¼Œå°±æœƒç­‰å¾…æ­¤è¡çªçµæŸï¼Œå†å–å¾— lockï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;read èˆ‡ write çš„ lock åŒæ™‚å­˜åœ¨&lt;/li&gt;
&lt;li&gt;write èˆ‡ write çš„ lock åŒæ™‚å­˜åœ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€Œåœ¨ä»¥ä¸‹æƒ…å½¢ï¼Œæœƒç›´æ¥å–å¾— lockï¼Œä¸æœƒç­‰å¾…æ­¤ç‹€æ…‹çµæŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;read èˆ‡ read çš„ lock åŒæ™‚å­˜åœ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å»¶çºŒä¸Šç¯‡ Single Threaded Execution Pattern çš„æƒ…å¢ƒï¼Œ&lt;/p&gt;
&lt;p&gt;ç•¶è¨­è¨ˆä¸€å€‹é»è®šç³»çµ±ä¸Šç·šï¼Œå…è¨±ä¸€äººæœ‰å¤šå€‹è®šï¼Œæ­¤æ™‚æœƒæœ‰å¤šå€‹ Client
é€²è¡Œé»è®šï¼Œç³»çµ±éœ€ç¢ºä¿é»è®šæ•¸é‡æ­£ç¢ºç„¡èª¤ï¼Œé‚„é ˆç¢ºä¿è®€å¯«æ•ˆèƒ½ä¸å—åˆ°å¤ªå¤§å½±éŸ¿ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å¯èƒ½æœƒç™¼ç”Ÿï¼ŒAã€Bã€Cã€D åŒæ™‚å…©äººé»è®šèˆ‡å…©äººè®€è®šï¼Œç”±æ–¼ A åœ¨è®€å–è®šæ•¸å¾Œï¼ŒA é‚„æ²’å¯«å…¥ Bã€C åˆé€²è¡Œäº†è®€å–ï¼Œéš¨å¾Œ A åŠ ä¸€å¯«å…¥å¾Œï¼ŒBã€C ç¾æœ‰çš„è³‡æ–™é‚„æ˜¯æœªåŠ ä¸€çš„ï¼ŒBã€C å°‡è³‡æ–™æ‹¿å»é¡¯ç¤ºï¼Œå°±æœƒæ˜¯èˆŠçš„æ•¸å­—ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ku8kUvg.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ku8kUvg.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¦ä½œæœ‰å•é¡Œçš„ç³»çµ±å¦‚ä¸‹ï¼ŒAã€D ä¸æ–·åœ°å¯«å…¥ï¼ŒBã€C ä¸æ–·çš„è®€å–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s change count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s read count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŸ·è¡Œå¾Œæœƒç™¼ç¾ç•¶ Aã€D æ”¹è®Š like.count ä¹‹å¾Œï¼ŒBã€C ä¸¦ä¸åŒæ­¥ï¼Œå¦‚åœ– D
å·²ç¶“å°‡ like.count æ”¹æˆ 27ï¼Œä½† B å…¶ä¸­ä¸€æ¬¡è®€å–æ˜¯ 20ï¼ŒC å…¶ä¸­ä¸€æ¬¡è®€å–ä¹Ÿæ˜¯
20&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fJ8BMYb.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/fJ8BMYb.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;åœ¨å¯«å…¥è™•&lt;code&gt;Add()&lt;/code&gt;èˆ‡è®€å–è™•&lt;code&gt;Show()&lt;/code&gt;ä¸­åŠ å…¥&lt;code&gt;sync.Mutex{}&lt;/code&gt;çš„
lockï¼Œä½¿è®€å¯«ä¸åŒæ™‚é€²è¡Œï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/SknzyXc.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/SknzyXc.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Mutex&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s change count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s read count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†åŸ·è¡Œä¹‹å¾Œæœƒç™¼ç¾ï¼ŒBã€C è®€å–å®³ like.count
è¢«æ”¹è®Šçš„æ©Ÿæœƒé™å¾—å¾ˆä½ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Z2IZAqa.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/Z2IZAqa.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é€™æ˜¯å› ç‚ºåªè¦ lock å­˜åœ¨ï¼Œå…¶ä»– lock è«‹æ±‚å°±å¿…é ˆç­‰å¾…ï¼Œå› ç‚º Bã€C çˆ­å– lock
å¤§å¤§é™ä½äº†æ•´å€‹ç³»çµ±å–å¾— lock çš„æ©Ÿæœƒï¼Œä½†æˆ‘å€‘ä»”ç´°æ€è€ƒçœ‹çœ‹ï¼ŒBã€C
çœŸçš„éœ€è¦ç«¶çˆ­æ­¤ lock å—ï¼Ÿç­”æ¡ˆæ˜¯ä¸ç”¨çš„ï¼Œå› ç‚º Bã€C ä¸¦ä¸æœƒæ”¹è®Š
like.countï¼Œæ‰€ä»¥å¯ä»¥åŒæ™‚é‹è¡Œï¼Œç³»çµ±åªéœ€æ³¨æ„ Aã€D è¦æ”¹è®Š like.count
çš„å…¶ä»–äººéƒ½è®€å¯«å®Œç•¢å³å¯ï¼Œæ•´é«”é‹è¡Œçš„æ™‚é–“ä¹Ÿæœƒé™ä½ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/uwFXNIb.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/uwFXNIb.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å°‡&lt;code&gt;sync.Mutex{}&lt;/code&gt;æ›æˆ&lt;code&gt;sync.RWMutex{}&lt;/code&gt;è®€å¯«é–ï¼Œ&lt;code&gt;Show()&lt;/code&gt;éƒ¨åˆ†çš„ lock æ›æˆ read-lockï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;RWMutex&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s change count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;RLock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;RUnlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s read count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;readerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ReadLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Bã€C å¤šè®€ï¼ŒAã€D å–®å¯«ï¼Œä½¿å¾—å¯«å…¥èˆ‡è®€å–çš„æ©Ÿæœƒéƒ½è®Šå¾—æ›´æœ‰æ•ˆç‡ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/iR2Ui3U.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/iR2Ui3U.png&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/rust-%E9%9A%A8%E7%AD%86-e69468ae63bd4546a6b76a5f908a65b5/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/rust-%E9%9A%A8%E7%AD%86-e69468ae63bd4546a6b76a5f908a65b5/</guid>
        <description>&lt;h1 id=&#34;rust-éš¨ç­†&#34;&gt;Rust éš¨ç­†
&lt;/h1&gt;&lt;p&gt;Tags: Rust, éš¨ç­†
Date: July 5, 2023&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Rust%20%E9%9A%A8%E7%AD%86%20e69468ae63bd4546a6b76a5f908a65b5/rust%20trait%28%E7%89%B9%E5%BE%B5%29%E8%B7%9Fjava%20interface%28%E4%BB%8B%E9%9D%A2%29%E7%9A%84%E5%B7%AE%E7%95%B0%2031ce661b33554ee18c978eaac795e6eb.md&#34; &gt;rust trait(ç‰¹å¾µ)è·Ÿjava interface(ä»‹é¢)çš„å·®ç•°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­é é¢&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Rust%20%E9%9A%A8%E7%AD%86%20e69468ae63bd4546a6b76a5f908a65b5/rust%20trait%28%E7%89%B9%E5%BE%B5%29%E8%B7%9Fjava%20interface%28%E4%BB%8B%E9%9D%A2%29%E7%9A%84%E5%B7%AE%E7%95%B0%2031ce661b33554ee18c978eaac795e6eb.md&#34; &gt;rust trait(ç‰¹å¾µ)è·Ÿjava interface(ä»‹é¢)çš„å·®ç•°&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/simple-factory-pattern%E6%8A%8A%E8%A4%87%E9%9B%9C%E7%B4%B0%E7%AF%80%E9%9A%B1%E8%97%8F%E7%9A%84%E5%B0%8F%E5%B7%A5%E5%BB%A0-a1fc0eda960942d4b34b9ff912a2c317/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/simple-factory-pattern%E6%8A%8A%E8%A4%87%E9%9B%9C%E7%B4%B0%E7%AF%80%E9%9A%B1%E8%97%8F%E7%9A%84%E5%B0%8F%E5%B7%A5%E5%BB%A0-a1fc0eda960942d4b34b9ff912a2c317/</guid>
        <description>&lt;h1 id=&#34;simple-factory-patternæŠŠè¤‡é›œç´°ç¯€éš±è—çš„å°å·¥å» &#34;&gt;Simple Factory Patternï¼ŒæŠŠè¤‡é›œç´°ç¯€éš±è—çš„å°å·¥å» 
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 14, 2021&lt;/p&gt;
&lt;p&gt;å·¥å» æ¨¡å¼ä¸»è¦æœ‰ä¸‰ç¨®ä¸åŒçš„å¯¦ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Simple Factory Pattern&lt;/li&gt;
&lt;li&gt;Factory Method Pattern&lt;/li&gt;
&lt;li&gt;Abstract Factory Pattern&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™ä¸‰ç¨®å¯¦ä½œç”±ç°¡å–®åˆ°è¤‡é›œï¼Œä»Šå¤©æœƒä»‹ç´¹æœ€å–®ç´”çš„ Simple Factory Pattern&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-simple-factory-pattern&#34;&gt;ä»€éº¼æ˜¯ Simple Factory Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ç”±ä¸€å€‹å·¥å» å°‡è£½ä½œç”¢å“çš„ç´°ç¯€éš±è—ï¼Œè®“ä½¿ç”¨è€…ä¸éœ€è¦ä¸éœ€è¦çŸ¥é“ç´°ç¯€ä¹Ÿèƒ½ç²å¾—ç”¢å“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨è£½ä½œä¸€å€‹ç‰©ä»¶çš„æ™‚å€™ï¼Œç‰©ä»¶å¸¸å¸¸é‚„éœ€è¦æœ‰å…¶ä»–å¾Œè£½çš„è™•ç†ï¼Œé€™äº›è™•ç†ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“ï¼Œä½¿ç”¨è€…åªéœ€è¦ç²å¾—æ­¤ç”¢å“å³å¯ï¼Œæ‰€ä»¥éœ€è¦å°‡å¾Œè£½è™•ç†ä½œå°è£&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;è¦ç”Ÿç”¢ PS5 ä¸»æ©Ÿ&lt;strong&gt;å…‰ç¢Ÿç‰ˆ&lt;/strong&gt;èˆ‡&lt;strong&gt;æ•¸ä½ç‰ˆ&lt;/strong&gt;çµ¦ä½¿ç”¨è€…ï¼Œä½†ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“ã€Œå¦‚ä½•ç”Ÿç”¢
CPUã€é¡¯ç¤ºæ™¶ç‰‡èˆ‡åŠ è£å…‰ç¢Ÿæ©Ÿã€ï¼Œä½¿ç”¨è€…åªéœ€è¦ç²å¾—æ­¤ç”¢å“å°±è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¯¦ä½œæœ‰å•é¡Œçš„ code å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;factory&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading cd...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cd machine...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading digital file...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// or
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ps5 := PS5WithDigital{}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ps5.AddCPU()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// ps5.AddGPU()
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨è€…æœ‰å¯èƒ½æœƒè³¼è²·å…‰ç¢Ÿç‰ˆ&lt;code&gt;PS5WithCD{}&lt;/code&gt;æˆ–æ•¸ä½ç‰ˆ&lt;code&gt;PS5WithDigital{}&lt;/code&gt;ï¼Œä¸¦ä¸”å›å®¶ç©éŠæˆ²&lt;code&gt;.PlayGame()&lt;/code&gt;ï¼Œä½† PS5 å¾—çµ„è£æ–¹å¼&lt;code&gt;.AddCDMachine()&lt;/code&gt;ã€&lt;code&gt;.AddCPU()&lt;/code&gt;ã€&lt;code&gt;.AddGPU()&lt;/code&gt;éƒ½æ˜¯ä½¿ç”¨è€…ä¸éœ€è¦çŸ¥é“çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;del&gt;æƒ³åƒä¸€ä¸‹ä½ å»è²· PS5 çš„æ™‚å€™è€é—†ç›´æ¥åœ¨ä½ é¢å‰è£ CPU
é‚£ç•«é¢ä¹Ÿæ˜¯å¤ å—†å“ˆå“ˆã€‚&lt;/del&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;æˆ‘å€‘éœ€è¦&lt;code&gt;CreatePS5()&lt;/code&gt;function ä¾†å°‡ PS5 çš„è£½ä½œéç¨‹éš±è—èµ·ä¾†ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;factory&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading cd...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cd machine...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;loading digital file...play!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding cpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;adding gpu...done!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;style&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PS5WithCD&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithCD&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCDMachine&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PS5WithDigital&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddCPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AddGPU&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5WithDigital&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PS5WithCD&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€™æ¨£ä½¿ç”¨è€…å°±åªéœ€è¦&lt;code&gt;CreatePS5()&lt;/code&gt;å¾Œå³å¯ç›´æ¥&lt;code&gt;.PlayGame()&lt;/code&gt;ã€‚&lt;code&gt;CreatePS5()&lt;/code&gt;æœ‰å€‹ç‰¹åˆ¥çš„åœ°æ–¹ï¼Œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å³é€é interface ä¾†å®šç¾©èˆ‡å¤–éƒ¨æºé€šçš„æ–¹å¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±æ–¼&lt;code&gt;PS5WithCD{}&lt;/code&gt;èˆ‡&lt;code&gt;PS5WithDigital{}&lt;/code&gt;å§‹çµ‚æ˜¯ä¸åŒçš„æ±è¥¿ï¼Œæˆ‘å€‘é ˆå°‡é€™å…©å€‹ç‰©ä»¶ã€Œç›¸åŒã€çš„è¡Œç‚ºå®šç¾©å‡ºä¾†ï¼Œä¾†è·Ÿä½¿ç”¨è€…èªªã€Œé€™å€‹ç”¢å“å¯ä»¥ç© PS5 çš„éŠæˆ²ã€ï¼Œæˆ‘å€‘ç¨±é€™å€‹å‹•ä½œç‚ºã€Œ&lt;strong&gt;æŠ½è±¡&lt;/strong&gt;ã€ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ PS5 interface å°‡&lt;code&gt;.PlayGame()&lt;/code&gt;é€™å€‹è¡Œç‚ºæŠ½è±¡å‡ºä¾†ï¼Œåªè¦èƒ½ç© PS5
éŠæˆ²çš„ç”¢å“ï¼Œéƒ½ç¨±ç‚º PS5 ç³»åˆ—ç›¸é—œçš„ç”¢å“ï¼Œå³ PS5 çš„å…‰ç¢Ÿç‰ˆèˆ‡æ•¸ä½ç‰ˆã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¾Œæ•´é«” UML å¦‚ä¸‹ï¼ˆCreatePS5 ä¸æ˜¯ structï¼Œæ‰€ä»¥æˆ‘åœ¨ä¸Šæ–¹æ¨™è¨»é€™æ˜¯ä¸€å€‹ function çš„å€å¡Šï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/pF9K1Xk.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/pF9K1Xk.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PS5WithCD{}&lt;/code&gt;ã€&lt;code&gt;PS5WithDigital{}&lt;/code&gt;ç”±&lt;code&gt;CreatePS5()&lt;/code&gt;ç”Ÿç”¢ï¼Œä»–å€‘ä¾è³´&lt;code&gt;PS5&lt;/code&gt;interfaceï¼Œè€Œ user(main function)é€é interface ä¾†æ“ä½œç”Ÿç”¢å‡ºä¾†çš„ PS5ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/single-threaded-execution-pattern%E9%96%80%E5%B0%B1%E5%8F%AA%E6%9C%89%E4%B8%80%E5%80%8B%E5%A4%A7%E5%AE%B6%E5%A5%BD%E5%A5%BD%E6%8E%92%E9%9A%8A%E5%95%8A-2f8dad23763147d792b532c1f9ae1666/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/single-threaded-execution-pattern%E9%96%80%E5%B0%B1%E5%8F%AA%E6%9C%89%E4%B8%80%E5%80%8B%E5%A4%A7%E5%AE%B6%E5%A5%BD%E5%A5%BD%E6%8E%92%E9%9A%8A%E5%95%8A-2f8dad23763147d792b532c1f9ae1666/</guid>
        <description>&lt;h1 id=&#34;single-threaded-execution-patterné–€å°±åªæœ‰ä¸€å€‹å¤§å®¶å¥½å¥½æ’éšŠå•Š&#34;&gt;Single Threaded Execution Patternï¼Œé–€å°±åªæœ‰ä¸€å€‹å¤§å®¶å¥½å¥½æ’éšŠå•Šï½
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 2, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-single-threaded-execution-pattern&#34;&gt;ä»€éº¼æ˜¯ Single Threaded Execution Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;é€é lockï¼Œåªæœƒæœ‰ä¸€å€‹ goroutine åŸ·è¡Œæ­¤å€æ®µçš„ç¨‹å¼ç¢¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;ç•¶è¨­è¨ˆä¸€å€‹é»è®šç³»çµ±ä¸Šç·šï¼Œå…è¨±ä¸€äººæœ‰å¤šå€‹è®šï¼Œæ­¤æ™‚æœƒæœ‰å¤šå€‹ Client é€²è¡Œé»è®šï¼Œç³»çµ±éœ€ç¢ºä¿é»è®šæ•¸é‡æ­£ç¢ºç„¡èª¤ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å¯èƒ½æœƒç™¼ç”Ÿï¼ŒAã€Bã€Cã€D å››äººåŒæ™‚é»è®šï¼Œç”±æ–¼ A åœ¨è®€å–è®šæ•¸å¾Œï¼ŒA
é‚„æ²’å¯«å…¥ B åˆé€²è¡Œäº†è®€å–ï¼Œéš¨å¾Œ A åŠ ä¸€å¯«å…¥å¾Œï¼ŒB ç¾æœ‰çš„è³‡æ–™é‚„æ˜¯æœªåŠ ä¸€çš„ï¼Œåœ¨
B å¯«å…¥æ™‚å°±æŠŠ A åŠ çš„ä¸€è¦†è“‹ï¼Œå°è‡´è®šæ•¸å°‘åŠ ä¸€ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LvVOPxy.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/LvVOPxy.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œå¯¦ä½œ&#34;&gt;å•é¡Œå¯¦ä½œ
&lt;/h2&gt;&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å››ä½ä½¿ç”¨è€…å„æŒ‰ 10000 æ¬¡è®šï¼Œé æœŸæœƒçµ±è¨ˆåˆ° 40000 å€‹è®šï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Count&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10000&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Count&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;çµæœåªæœ‰ 28366 å€‹è®š:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;run&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;problem&lt;/span&gt;.&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;28366&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ–¼&lt;code&gt;like.Add()&lt;/code&gt;ä¸¦æ²’æœ‰ goroutine
safe(åŸ·è¡Œç·’å®‰å…¨)ï¼Œé€ æˆäº†è®€å¯«&lt;code&gt;like.Count&lt;/code&gt;ç”¢ç”Ÿäº† race
conditionï¼Œå³å››å€‹ goroutine æœƒåŒæ™‚è®€å¯« countï¼Œå°è‡´æœ‰ goroutine
åœ¨å¯«å…¥å¾Œï¼Œå…¶ä»– goroutine å»æ²’æœ‰è®€åˆ°æœ€æ–°è³‡æ–™çš„ç‹€æ³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;å¯ä»¥é€éåœ¨ &lt;code&gt;like.Add()&lt;/code&gt;è£¡æ–°å¢ lock ä¾†ç¢ºä¿
function&lt;code&gt;åªæœƒè¢«ä¸€å€‹goroutineè®€å¯«&lt;/code&gt;ï¼Œç•¶ä¸€å€‹ goroutine å–å¾—
&lt;code&gt;like.Add()&lt;/code&gt;çš„ lockï¼Œå³æœ‰æ¬Šé™åŸ·è¡Œæ­¤ functionï¼Œé™¤éæ­¤
goroutine unlockï¼Œè®“å…¶ä»– goroutine æœ‰æ©Ÿæœƒå–å¾— lockï¼Œå¦å‰‡å…¶ä»– goroutine
åªèƒ½ç­‰å¾…ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NxL0LCq.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/NxL0LCq.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Mutex&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Lock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;defer&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Unlock&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s change count: %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;l&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt; &amp;lt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10000&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Add&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;writerID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AddLikes&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;like&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;èˆ‡èªæ³•å¤šæ¨£çš„-java-å°ç…§&#34;&gt;èˆ‡èªæ³•å¤šæ¨£çš„ java å°ç…§
&lt;/h2&gt;&lt;p&gt;åœ¨ java ä¸­æä¾›äº†æ›´æ–¹ä¾¿çš„ synchronizedï¼Œè®“ lock
æ©Ÿåˆ¶å¯ä»¥åªåŠ ä¸€å€‹é—œéµå­—å°±è§£æ±ºï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;class&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Like&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;private&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; count &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; 0;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;synchronized&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;add&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        System.&lt;span style=&#34;color:#a6e22e&#34;&gt;out&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;like count: &amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;this&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;count&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œ golang æ²’æœ‰ synchronized é—œéµå­—ï¼Œæ˜¯é€é&lt;code&gt;sync.Mutex&lt;/code&gt;ç›´æ¥é€éæ“ä½œ lock çš„æ–¹å¼ã€‚åœ¨ Java çš„è¨­è¨ˆä¸­æå€¡ä»¥ synchronized ä¾†è®“ç¨‹å¼æ›´å®‰å…¨ï¼Œå› ç‚ºç›´æ¥ä½¿ç”¨ lock å¯èƒ½æœƒåœ¨ function çµæŸå¾Œå¿˜è¨˜ unlock é€ æˆ dead lockï¼Œé‚£ golang è©²å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨
lock å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;golang é  defer è§£æ±ºå¿˜è¨˜ unlock çš„å•é¡Œï¼Œåœ¨&lt;code&gt;lock()&lt;/code&gt;ç•¶ä¸‹æˆ‘å€‘å¯ä»¥åœ¨ä¸‹ä¸€è¡Œç¨‹å¼ç¢¼åŠ å…¥&lt;code&gt;defer Unlock()&lt;/code&gt;ï¼Œé€™æ¨£ Golang åœ¨ compile å¾Œå°±æœƒåœ¨ function çš„ return è™•ä¹‹å‰éƒ½åŠ ä¸Š&lt;code&gt;Unlock()&lt;/code&gt;ï¼Œè—‰æ­¤é”åˆ°èˆ‡ synchronized ä¸€æ¨£æ–¹ä¾¿å®‰å…¨çš„æ•ˆæœã€‚defer ä¹Ÿä¸åªç”¨åœ¨ lockï¼Œå‡¡è¦åœ¨ return å‰åŸ·è¡Œçš„å‹•ä½œéƒ½å¯ä»¥ç”¨ deferï¼Œæ³›ç”¨æ€§å¾ˆé«˜ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/singleton-pattern%E8%87%B4%E7%8D%A8%E4%B8%80%E7%84%A1%E4%BA%8C%E7%9A%84%E4%BD%A0-ecb704ba284e47338b2cb53f1f217fd3/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/singleton-pattern%E8%87%B4%E7%8D%A8%E4%B8%80%E7%84%A1%E4%BA%8C%E7%9A%84%E4%BD%A0-ecb704ba284e47338b2cb53f1f217fd3/</guid>
        <description>&lt;h1 id=&#34;singleton-patternè‡´ç¨ä¸€ç„¡äºŒçš„ä½ &#34;&gt;Singleton Patternï¼Œè‡´ç¨ä¸€ç„¡äºŒçš„ä½ 
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 18, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-singleton-pattern&#34;&gt;ä»€éº¼æ˜¯ Singleton Patternï¼Ÿ
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BBvzTg9.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/BBvzTg9.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•´å€‹ç¨‹å¼é‹ä½œåªæœƒæœ‰æ­¤ä¸€å€‹ç‰©ä»¶ï¼Œä¸æœƒå‰µå»ºç¬¬äºŒå€‹é‡è¤‡çš„ç‰©ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨å¯¦éš›æƒ…å¢ƒä¸­æŸäº›ç‰©ä»¶ï¼Œæ¯”å¦‚é€£ç·š DBã€èˆ‡å…¶ä»– service é•·é€£ç·šã€å–å¾—ç’°å¢ƒ configï¼Œæˆ‘å€‘éƒ½å¸Œæœ›å¯ä»¥æ•´å€‹é‹è¡Œç’°å¢ƒã€Œåªæœ‰ä¸€å€‹ã€ï¼Œæ‰ä¸æœƒé€ æˆè³‡æºçš„æµªè²»ï¼Œæˆ–è€…ç³»çµ±æ¯å€‹éƒ¨åˆ†é‹è¡Œå¾—åˆ°çš„å€¼ä¸åŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å–å¾—é€£ç·š DB çš„ç‰©ä»¶ï¼Œä¸¦ä¸”æ•´å€‹ç³»çµ±ä¸æœƒé‡è¤‡å‰µå»ºå°è‡´æµªè²» DB é€£ç·šçš„è³‡æºã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç¨®æ–¹å¼(åˆå§‹åŒ–å³å‰µå»º)ï¼šåœ¨ import æ¨¡çµ„çš„æ™‚å€™ï¼Œå°‡ db é€é&lt;code&gt;init()&lt;/code&gt;å‰µå»º&lt;code&gt;dbInstance{}&lt;/code&gt;(&lt;code&gt;init()&lt;/code&gt;function æœ‰è‘—ç¨‹å¼ runtime æœƒå…ˆè¡Œé‹è¡Œçš„ç‰¹æ€§)ï¼Œæ­¤å¾Œåªæœ‰&lt;code&gt;GetInstance()&lt;/code&gt;é€™å€‹å…¬é–‹æ–¹æ³•å¯ä»¥å–å¾—&lt;code&gt;dbInstance{}&lt;/code&gt;ï¼Œä¸¦ç„¡ä»»ä½•æ–¹æ³•å†å‰µå»º&lt;code&gt;dbInstance{}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å„ªé»ï¼šå¯ä»¥åœ¨åˆå§‹åŒ–å°±å‰µå»º instanceï¼Œä¸ç”¨ç­‰åˆ°å‘¼å«æ‰å‰µå»º(ç¬¬äºŒç¨®æ–¹å¼)
ç¼ºé»ï¼šç„¡æ³•æ§åˆ¶åˆå§‹åŒ–çš„æ™‚é–“é»ï¼Œèˆ‰ä¾‹ä¾†èªªæœ‰å¯èƒ½ã€Œç’°å¢ƒè®Šæ•¸ã€å¥—ä»¶éƒ½é‚„æ²’æœ‰åˆå§‹åŒ–ï¼Œdb
å°±é–‹å§‹åˆå§‹åŒ–äº†ï¼Œå°è‡´è®€ä¸åˆ°æ­£ç¢ºçš„ç’°å¢ƒè®Šæ•¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// db/db.go
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;init&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// main file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DAY-18/db&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç‚ºäº†è§£æ±ºç¼ºé»ï¼Œæ‰€ä»¥è¨±å¤šå°ˆæ¡ˆæœƒä¸ä»¥&lt;code&gt;init()&lt;/code&gt;ä¾†åˆå§‹åŒ–ç‰©ä»¶ï¼Œè€Œæ˜¯ä»»æ„ä¸€å€‹å…¬é–‹æ–¹æ³•ä¾†åˆå§‹åŒ–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// db-2/db-2.go file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;InitDB&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// main file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DAY-18/db-2&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Init&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¬¬äºŒç¨®æ–¹å¼(lazy æ–¹å¼)ï¼šåœ¨å‘¼å«&lt;code&gt;GetInstance()&lt;/code&gt;çš„æ™‚å€™æœƒåšæª¢æŸ¥ï¼Œå¦‚æœ&lt;code&gt;dbInstance{}&lt;/code&gt;ä¸å­˜åœ¨å°±å‰µå»ºï¼Œå­˜åœ¨å°±å›å‚³ç¾å­˜çš„&lt;code&gt;dbInstance{}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å„ªé»ï¼šå¯ä»¥åœ¨çœŸçš„ç”¨åˆ°æ­¤ç‰©ä»¶æ™‚ï¼Œæ‰å‰µå»ºæ­¤ç‰©ä»¶ï¼Œä»¥ç¯€çœè¨˜æ†¶é«”ï¼Œé€™å³æ˜¯ lazy æ–¹å¼çš„å„ªé»
ç¼ºé»ï¼šç”±æ–¼åœ¨ä½¿ç”¨ç‰©ä»¶æ™‚æ‰æœƒå‰µå»ºï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡å‘¼å«æ™‚éœ€è¦å‰µå»ºæœƒèŠ±è¼ƒå¤šçš„æ™‚é–“&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœè¦ºå¾—&lt;code&gt;if dbInstance == nil&lt;/code&gt;çš„æª¢æŸ¥å¾ˆéº»ç…©çš„è©±ï¼Œä¹Ÿå¯ä»¥ç”¨&lt;code&gt;sync.Once{}&lt;/code&gt;ä¾†å¯¦ä½œï¼Œ&lt;code&gt;sync.Once{}.Do(func)&lt;/code&gt;å¯ä»¥è®“ function è£¡çš„ç‰©ä»¶æ°¸é åªåŸ·è¡Œä¸€æ¬¡ï¼Œä»¥é”åˆ° Singleton çš„æ•ˆæœï¼Œè£¡é ­é©ç”¨ CAS æ¼”ç®—æ³•ä¾†å¯¦ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;sync&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;once&lt;/span&gt;       = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sync&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Once&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;once&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Do&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt; = &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DBInstance&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;dbInstance&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GetInstance&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/strategy-pattern%E9%81%B8%E5%AE%9A%E4%B8%8D%E5%90%8C%E7%9A%84%E7%AD%96%E7%95%A5%E4%BE%86%E5%9F%B7%E8%A1%8C-f8553bc48ee94c7c8fe880c7dccc801b/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/strategy-pattern%E9%81%B8%E5%AE%9A%E4%B8%8D%E5%90%8C%E7%9A%84%E7%AD%96%E7%95%A5%E4%BE%86%E5%9F%B7%E8%A1%8C-f8553bc48ee94c7c8fe880c7dccc801b/</guid>
        <description>&lt;h1 id=&#34;strategy-patterné¸å®šä¸åŒçš„ç­–ç•¥ä¾†åŸ·è¡Œ&#34;&gt;Strategy Patternï¼Œé¸å®šä¸åŒçš„ç­–ç•¥ä¾†åŸ·è¡Œ
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 30, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-strategy-pattern&#34;&gt;ä»€éº¼æ˜¯ Strategy Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è¨­è¨ˆç›¸åŒä»‹é¢ä½†ä¸åŒå¯¦ä½œçš„ç‰©ä»¶ï¼Œå†ç”±ä½¿ç”¨ç«¯ä»¥æ­¤ä»‹é¢å»é¸æ“‡è¦ä½¿ç”¨ä½•ç¨®ç‰©ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/wdpjmgf.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/wdpjmgf.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å‡è¨­ PS5
æœƒä½¿ç”¨ä¸åŒå» å•†çš„é¡¯ç¤ºæ™¶ç‰‡ï¼Œéœ€è¦æœ‰ä¸€å€‹æ–¹æ³•è®“éŠæˆ²ä»¥ä¸åŒçš„é¡¯ç¤ºæ™¶ç‰‡é‹è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;PS5{}.gpu&lt;/code&gt;ä¾è³´&lt;code&gt;GPU&lt;/code&gt;interfaceï¼ŒA å» å•†çš„&lt;code&gt;AGPU{}&lt;/code&gt;èˆ‡ B å» å•†çš„&lt;code&gt;BGPU{}&lt;/code&gt;éƒ½æ˜¯ä»¥æ­¤&lt;code&gt;GPU&lt;/code&gt;interface å¯¦ä½œï¼Œæˆ‘å€‘åœ¨&lt;code&gt;CreatePS5()&lt;/code&gt;çš„æ™‚å€™é¸å®šè¦ä½¿ç”¨å“ªå€‹å» å•†çš„ GPUï¼Œç”±ä½¿ç”¨ç«¯å»é¸æ“‡è¦ä½¿ç”¨ä½•ç¨®&lt;strong&gt;ç­–ç•¥&lt;/strong&gt;ä¾†å‰µé€  PS5ï¼Œé¸æ“‡å®Œç­–ç•¥å¾Œï¼Œå°±å¯ä»¥ä½¿ç”¨æ­¤ç­–ç•¥ç‰©ä»¶ä¾†ç©éŠæˆ²&lt;code&gt;PS5{}.PlayGame()&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;UML åœ–å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/GORPVOw.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/GORPVOw.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹:&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Draw&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AGPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AGPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Draw&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;draw!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BGPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;BGPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Draw&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;draw!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CGPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;b&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CGPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Draw&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;draw!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Draw&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play game!&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;AGPU&lt;/span&gt;{} &lt;span style=&#34;color:#75715e&#34;&gt;// BGPU{} or CGPU{}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreatePS5&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gpu&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/test-%E9%9A%A8%E7%AD%86-ae63acd045944c3a8c066c250be40b33/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/test-%E9%9A%A8%E7%AD%86-ae63acd045944c3a8c066c250be40b33/</guid>
        <description>&lt;h1 id=&#34;test-éš¨ç­†&#34;&gt;Test éš¨ç­†
&lt;/h1&gt;&lt;p&gt;Tags: æ¸¬è©¦, éš¨ç­†
Date: February 5, 2022&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Test%20%E9%9A%A8%E7%AD%86%20ae63acd045944c3a8c066c250be40b33/%E6%B8%AC%E8%A9%A6%E6%A1%86%E6%9E%B6%E6%88%96%E5%A5%97%E4%BB%B6%E7%9A%84%E9%81%B8%E6%93%87%2062a527aee9e04c9e814583a902bfd953.md&#34; &gt;æ¸¬è©¦æ¡†æ¶æˆ–å¥—ä»¶çš„é¸æ“‡&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­é é¢&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;Test%20%E9%9A%A8%E7%AD%86%20ae63acd045944c3a8c066c250be40b33/%E6%B8%AC%E8%A9%A6%E6%A1%86%E6%9E%B6%E6%88%96%E5%A5%97%E4%BB%B6%E7%9A%84%E9%81%B8%E6%93%87%2062a527aee9e04c9e814583a902bfd953.md&#34; &gt;æ¸¬è©¦æ¡†æ¶æˆ–å¥—ä»¶çš„é¸æ“‡&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/thread-per-message-pattern%E9%A0%90%E5%82%99-%E7%99%BC%E5%B0%84-96869d35e50344dfaf6f0afd932ea645/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/thread-per-message-pattern%E9%A0%90%E5%82%99-%E7%99%BC%E5%B0%84-96869d35e50344dfaf6f0afd932ea645/</guid>
        <description>&lt;h1 id=&#34;thread-per-message-patterné å‚™ç™¼å°„&#34;&gt;Thread-Per-Message Patternï¼Œé å‚™&amp;hellip;ç™¼å°„ï¼
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 5, 2021&lt;/p&gt;
&lt;p&gt;åœ¨ DAY 2~DAY 4 æˆ‘å€‘ä½¿ç”¨åˆ°äº† goroutineã€lockã€channelï¼Œä¸»è¦ç›®æ¨™åœ¨&lt;strong&gt;ä¿è­·&lt;/strong&gt;ä½µç™¼ä¸‹çš„è³‡æ–™é¿å… race conditionï¼Œæ¥ä¸‹ä¾†æœƒä»¥æé«˜åŸ·è¡Œ&lt;strong&gt;æ•ˆç‡&lt;/strong&gt;ç‚ºè¨è«–é‡é»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-thread-per-message-pattern&#34;&gt;ä»€éº¼æ˜¯ Thread-Per-Message Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æ¯ä¸€å€‹ message é–‹å•Ÿä¸€å€‹ goroutine ä¾†é‹è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæœ‰å¤šå€‹ task éœ€è¦é‹è¡Œï¼Œæ¯å€‹ task çš„åŸ·è¡Œæ™‚é–“éé•·ï¼Œæ¯”å¦‚ IO
æˆ–è€…æ˜¯è¤‡é›œçš„é‹ç®—ï¼Œé‚£ä¸€å€‹ä¸€å€‹åŸ·è¡Œ task æ˜¯ç›¸ç•¶æµªè²»æ™‚é–“çš„ï¼Œåªè¦ task æ²’æœ‰åŸ·è¡Œé †åºçš„éœ€æ±‚ï¼Œå¯ä»¥å°‡æ‰€æœ‰ task éƒ½åŒæ™‚åŸ·è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸¦ä¸” Thread-Per-Message Pattern æ˜¯ç”¨åœ¨ä¸éœ€è¦ goroutine å›å‚³å€¼çš„æƒ…å¢ƒä¸­ï¼Œå¦‚æœéœ€è¦å›å‚³å€¼ï¼Œå¯ä»¥ä½¿ç”¨ Future Patternï¼Œæ¥ä¸‹ä¾†çš„æ–‡ç« æœƒå†ä»‹ç´¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/FjBmPTL.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/FjBmPTL.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;è¨­è¨ˆä¸€å€‹æ¨æ’­æ–°èç³»çµ±ï¼Œæœƒå°‡æ–°çš„æ–°èç›´æ¥æ¨æ’­å‡ºå»ï¼Œæˆ‘å€‘å¸Œæœ›æ¨æ’­ç³»çµ±æ•ˆç‡è¦é«˜ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¯¦ä½œæœ‰å•é¡Œçš„ç³»çµ±å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s cost %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;cost %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ–¼æ¯å‰‡æ–°èéƒ½æ˜¯ä¸€å‰‡ä¸€å‰‡æ¨æ’­ï¼Œæ‰€ä»¥è€—æ™‚äº†ç´„ 9 ç§’&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/coXVtD9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/coXVtD9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;åœ¨&lt;code&gt;PushNews()&lt;/code&gt;åŠ ä¸Š&lt;code&gt;go&lt;/code&gt;å°±å¯ä»¥å•Ÿå‹• goroutine ä¾†æ¨æ’­&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s cost %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±æ–¼æ˜¯åŒæ™‚æ¨æ’­ï¼Œæ‰€ä»¥æ¨æ’­åªèŠ±äº† 3 ç§’&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/xNWDona.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/xNWDona.png&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/thread-specific-storage-pattern%E9%AB%98%E4%BD%B5%E7%99%BC%E7%9A%84%E5%A4%9A%E9%87%8D%E5%AE%87%E5%AE%99%E7%A9%BA%E9%96%93-3cfbf00e9ea64fcca9315fe6e657b3ae/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/thread-specific-storage-pattern%E9%AB%98%E4%BD%B5%E7%99%BC%E7%9A%84%E5%A4%9A%E9%87%8D%E5%AE%87%E5%AE%99%E7%A9%BA%E9%96%93-3cfbf00e9ea64fcca9315fe6e657b3ae/</guid>
        <description>&lt;h1 id=&#34;thread-specific-storage-patterné«˜ä½µç™¼çš„å¤šé‡å®‡å®™ç©ºé–“&#34;&gt;Thread-Specific Storage Patternï¼Œé«˜ä½µç™¼çš„å¤šé‡å®‡å®™ç©ºé–“
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 11, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-thread-specific-storage-pattern&#34;&gt;ä»€éº¼æ˜¯ Thread-Specific Storage Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;ç‚ºæ¯å€‹ goroutine æ“æœ‰è‡ªå·±çš„å„²å­˜ç©ºé–“ï¼Œä¾›ä¸åŒçš„æƒ…å¢ƒè­˜åˆ¥èˆ‡ä½¿ç”¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœæ­£åœ¨è¨­è¨ˆä¸€å€‹ logger ç‰©ä»¶ï¼Œæˆ‘å€‘å¸Œæœ›ä¸åŒ goroutine é€éæ­¤ç‰©ä»¶ç´€éŒ„ log æ™‚ä¹Ÿèƒ½èªªæ˜æ­¤å‹•ä½œæ˜¯å“ªå€‹ goroutine åšçš„ï¼Œé‚£æ­¤ logger ç‰©ä»¶å°±éœ€è¦ã€Œèƒ½è¾¨è­˜ä¸åŒçš„ goroutineã€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;java-çš„æ–¹å¼&#34;&gt;java çš„æ–¹å¼
&lt;/h3&gt;&lt;p&gt;ä»¥ java ä¾†èªªï¼Œè¨­è¨ˆçš„æ–¹å¼æ˜¯ä¸€å€‹ logger ç‰©ä»¶æ“æœ‰ ThreadLocal
é¡åˆ¥ï¼ŒThreadLocal ç°¡å–®ä¾†èªªå³æ˜¯ä¸€å€‹ hashmapï¼Œä½†ä»–åœ¨&lt;code&gt;.get()&lt;/code&gt;èˆ‡&lt;code&gt;.set()&lt;/code&gt;æ™‚éƒ½å¯ä»¥ä»¥ thread
id ä¾†ç•¶ä½œ keyï¼Œä¸¦å­˜å…¥ä»»æ„ valueã€‚&lt;/p&gt;
&lt;p&gt;ä¸åŒçš„ thread å¾æ­¤ç©ºé–“æ‹¿å–è³‡æ–™åªèƒ½ä¾ç…§è‡ªå·±çš„ thread id æ‹¿å–ï¼Œæ‰€ä»¥ä¸æœƒç”¢ç”Ÿ race conditionï¼Œä¹Ÿä¸éœ€è¦ lock ä¿è­·ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/gYvMaSY.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/gYvMaSY.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;golang-çš„æ–¹å¼&#34;&gt;golang çš„æ–¹å¼
&lt;/h3&gt;&lt;p&gt;golang çš„æ¨™æº–åº«ä¸æä¾›å–å¾— goroutine id çš„æ–¹æ³•ï¼Œgopher Andrew Gerrand
èªç‚ºï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We wouldnâ€™t even be having this discussion if thread local storage
wasnâ€™t useful. But every feature comes at a cost, and in my opinion the
cost of threadlocals far outweighs their benefits. Theyâ€™re just not a
good fit for Go.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å³å–å¾— id çš„é–‹éŠ·æ¯”å¯¦éš›çš„æ‡‰ç”¨ä¾†çš„å¤§ï¼Œæ‰€ä»¥ä¸æ¡ç”¨æ­¤æ–¹å¼ã€‚é›–ç„¶æœ‰&lt;a class=&#34;link&#34; href=&#34;https://github.com/jtolio/gls&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gls&lt;/a&gt;é€™æ¨£çš„ libraryï¼Œä½†æ˜¯åˆ©ç”¨
stack çš„ç‰¹æ€§ä¾†å¯¦ä½œï¼Œä¸¦ä¸æ˜¯å¾ˆç©©å®šçš„ä½œæ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ golang æ˜¯æ¡ç”¨ context çš„åšæ³•ä¾†é”åˆ°ã€Œè®“ goroutine æ“æœ‰è‡ªå·±çš„å„²å­˜ç©ºé–“ã€ï¼Œcontext å¯ä»¥åˆ©ç”¨&lt;code&gt;With&lt;/code&gt;ç­‰æ–¹æ³•ï¼ŒæŠŠ context å¤¾å¸¶&lt;strong&gt;æŸäº›å€¼&lt;/strong&gt;ï¼Œå¸¶åˆ°ä¸åŒçš„ goroutineï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;context.WithValue(ctx, key, val)&lt;/code&gt;: å¯ä»¥å°‡åŸæœ‰ context æ–°å¢æŸ keyï¼Œä¸¦å­˜æ”¾è‘—æŸ value&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ä¹Ÿæœ‰å…¶ä»–&lt;code&gt;With&lt;/code&gt;æ–¹æ³•ï¼Œè®“ context å¯ä»¥å¤¾å¸¶&lt;strong&gt;æŸäº›åŠŸèƒ½&lt;/strong&gt;ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;context.WithCancel(ctx, cancelFunc)&lt;/code&gt;: è®“ context
å¤¾å¸¶&lt;strong&gt;å–æ¶ˆåŠŸèƒ½&lt;/strong&gt;ï¼Œç•¶å‘¼å«å–æ¶ˆå¾Œï¼Œ&lt;code&gt;context.Done()&lt;/code&gt;å°±æœƒç™¼å‡º close è¨Šè™Ÿ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;context.WithDeadline(ctx, deadlineTime)&lt;/code&gt;: è®“ context å¤¾å¸¶&lt;strong&gt;ç‰¹å®šæ™‚é–“çµæŸåŠŸèƒ½&lt;/strong&gt;ï¼Œç•¶åˆ°ç‰¹å®šæ™‚é–“å¾Œï¼Œ&lt;code&gt;context.Done()&lt;/code&gt;å°±æœƒç™¼å‡º close è¨Šè™Ÿ&lt;/li&gt;
&lt;li&gt;&lt;code&gt;context.WithTimeout(ctx, timeout)&lt;/code&gt;: è®“ context
å¤¾å¸¶&lt;strong&gt;å€’æ•¸è¨ˆæ™‚çµæŸåŠŸèƒ½&lt;/strong&gt;ï¼Œç•¶å€’æ•¸è¨ˆæ™‚å®Œç•¢å¾Œï¼Œ&lt;code&gt;context.Done()&lt;/code&gt;å°±æœƒç™¼å‡º close è¨Šè™Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¯å€‹ goroutine éƒ½å¯ä»¥ç”¨çš„&lt;code&gt;context.With&lt;/code&gt;ä¾†è¤‡è£½ä¸€ä»½ context ä¸¦æ·»åŠ äº‹ç‰©ï¼Œè—‰æ­¤é”åˆ°ç¨ç«‹çš„å„²å­˜ç©ºé–“ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fAlzza0.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/fAlzza0.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šåœ–æ¯å€‹åœ°é¼ éƒ½æ˜¯ä¸€å€‹ goroutineï¼Œä»–å€‘éƒ½æ“æœ‰è‡ªå·±é€é&lt;code&gt;With&lt;/code&gt;è¤‡è£½çš„ context&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;è¨­è¨ˆä¸€å€‹ server çš„ logger ç³»çµ±ï¼Œåœ¨ä¸åŒ goroutine request
é€²å…¥ç³»çµ±å¾Œï¼Œlog æ™‚éƒ½æœƒé¡¯ç¤º request id&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é€é&lt;code&gt;context.WithValue()&lt;/code&gt;ï¼Œå°‡ä¸åŒ goroutine request çš„ context å¤¾å¸¶å”¯ä¸€çš„ uuidï¼Œåœ¨&lt;code&gt;RequestHandler()&lt;/code&gt;é‹è¡Œæ™‚å°±å¯ä»¥ç”¨&lt;code&gt;ctx.Value(RequestID{})&lt;/code&gt;å–å‡º request id ä¾† logï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;context&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;uuid&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/satori/go.uuid&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;request ID is %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Value&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;RequestID&lt;/span&gt;{}))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Background&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithValue&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestID&lt;/span&gt;{}, &lt;span style=&#34;color:#a6e22e&#34;&gt;uuid&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewV4&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;()))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithValue&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestID&lt;/span&gt;{}, &lt;span style=&#34;color:#a6e22e&#34;&gt;uuid&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewV4&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;()))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WithValue&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestID&lt;/span&gt;{}, &lt;span style=&#34;color:#a6e22e&#34;&gt;uuid&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewV4&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;()))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;//ç­‰å¾…goroutineåŸ·è¡Œå®Œç•¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;äº‹å¯¦ä¸Šé€™å°±æ˜¯å¾ˆå¤šæ¡†æ¶å¦‚&lt;a class=&#34;link&#34; href=&#34;https://github.com/gin-gonic/gin&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gin&lt;/a&gt;, &lt;a class=&#34;link&#34; href=&#34;https://github.com/kataras/iris&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iris&lt;/a&gt;å° request id æ·»åŠ æ–¹å¼ï¼Œæœƒåœ¨ router è¨­å®šè™•æ·»åŠ &lt;code&gt;RequestIDMiddleware()&lt;/code&gt;é€™é¡ middlewareï¼Œä¸¦æœƒåœ¨è£¡é ­è™•ç†èˆ‡&lt;code&gt;context.WithValue()&lt;/code&gt;æ¦‚å¿µç›¸åŒçš„å¯¦ä½œï¼Œå°‡ request id æ·»åŠ åˆ°æ­¤ request çš„ context ä¸Šï¼Œä¾›å¾ŒçºŒ log ä½¿ç”¨ï¼Œgin çš„ç¯„ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RequestIdMiddleware&lt;/span&gt;() &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;HandlerFunc&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Writer&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Header&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;Set&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;X-Request-Id&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;uuid&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewV4&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Next&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;router&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Use&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;RequestIdMiddleware&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// å…¶ä»–routerè¨­å®š
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/two-phase-termination-pattern%E6%88%91%E5%B0%B1%E8%B7%9F%E4%BD%A0%E8%AA%AA%E4%B8%8D%E8%A6%81%E4%BA%82%E6%8B%94%E9%9B%BB%E6%BA%90-ccd25cb3b61144f8aef999e7a3cf8d29/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/two-phase-termination-pattern%E6%88%91%E5%B0%B1%E8%B7%9F%E4%BD%A0%E8%AA%AA%E4%B8%8D%E8%A6%81%E4%BA%82%E6%8B%94%E9%9B%BB%E6%BA%90-ccd25cb3b61144f8aef999e7a3cf8d29/</guid>
        <description>&lt;h1 id=&#34;two-phase-termination-patternæˆ‘å°±è·Ÿä½ èªªä¸è¦äº‚æ‹”é›»æº&#34;&gt;Two-phase Termination Patternï¼Œæˆ‘å°±è·Ÿä½ èªªä¸è¦äº‚æ‹”é›»æºï¼
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 10, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-two-phase-termination-pattern&#34;&gt;ä»€éº¼æ˜¯ Two-phase Termination Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;åˆ†å…©å€‹éšæ®µé—œé–‰ goroutineï¼Œç¬¬ä¸€éšæ®µå…ˆçµæŸ goroutine çš„ç¨‹å¼é‚è¼¯ï¼Œç¬¬äºŒéšæ®µå†çµæŸ goroutine æœ¬èº«&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/MCUxWsp.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/MCUxWsp.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ¨¡å¼çš„æ ¸å¿ƒç›®æ¨™å¦‚ä»¥ä¸‹ä¸‰é»ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰å…¨çš„çµ‚æ­¢ goroutineï¼ˆå®‰å…¨æ€§ï¼‰&lt;/li&gt;
&lt;li&gt;å¿…å®šæœƒé—œé–‰ goroutineï¼ˆç”Ÿå‘½æ€§ï¼‰&lt;/li&gt;
&lt;li&gt;ç™¼å‡ºé—œé–‰è«‹æ±‚å¾Œç›¡å¿«é‹è¡Œé‚è¼¯é—œé–‰çš„è™•ç†ï¼ˆéŸ¿æ‡‰æ€§ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ golang ä¾†èªªæˆ‘å€‘é—œé–‰ goroutine æœƒæ¡å–é—œé–‰ channel çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#75715e&#34;&gt;// é—œé–‰çš„å–„å¾Œç¨‹åº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;				&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;// å…¶ä»– case
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	close(&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€™æ¨£çš„é—œé–‰æ–¹å¼å…¶å¯¦å°±æœ‰æ»¿è¶³ä»¥ä¸Šä¸‰é»äº†ã€‚æ”¶åˆ°&lt;code&gt;done channel&lt;/code&gt;è¢«é—œé–‰çš„è¨Šè™Ÿå¾Œï¼Œgoroutine
æœƒåŸ·è¡Œ&lt;code&gt;case &amp;lt;-done:&lt;/code&gt;å€åŸŸçš„å–„å¾Œç¨‹åºä¸¦ return é—œé–‰ goroutineï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é”åˆ°å®‰å…¨æ€§ï¼šä¸æœƒæœ‰æ„å¤–é€€å‡ºçš„æƒ…å½¢ã€‚&lt;/li&gt;
&lt;li&gt;é”åˆ°ç”Ÿå‘½æ€§ï¼šä¸æœƒæœ‰ goroutine æ˜¯æš«åœç‹€æ…‹çš„æƒ…å½¢è€Œç„¡æ³•é—œé–‰ã€‚&lt;/li&gt;
&lt;li&gt;é”åˆ°éŸ¿æ‡‰æ€§ï¼šè·Ÿç”Ÿå‘½æ€§çš„å•é¡Œç›¸é—œï¼Œä¸æœƒæœ‰ goroutine
æ˜¯æš«åœç‹€æ…‹çš„æƒ…å½¢è€Œæ²’æœ‰è™•ç†é—œé–‰ç¨‹åº&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥åœ¨å¹³å¸¸ä½¿ç”¨ golang çš„æ™‚å€™ä¸¦ä¸æœƒæ€è€ƒé€™äº›å•é¡Œï¼ŒTwo-phase Termination
Pattern ä¸»è¦æ˜¯åœ¨ java é€™é¡ã€Œç›´æ¥æ§åˆ¶ thread ç”Ÿå‘½é€±æœŸã€çš„èªè¨€æ‰æœƒæ‡‰ç”¨åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;java çš„ thread æ˜¯ç”¨ç‰©ä»¶å°è£çš„ï¼Œé–‹ç™¼è€…å¯ä»¥æ§åˆ¶ thread çš„ç”Ÿå‘½é€±æœŸï¼Œä¸¦ä¸”æä¾›äº† &lt;code&gt;Thread.stop()&lt;/code&gt;ä¾†é—œé–‰ threadï¼Œä½†é€™æ˜¯ä¸å®‰å…¨çš„ï¼Œä»–æœƒä½¿é‹è¡Œçš„ thread çªç„¶ä¸­æ­¢ï¼Œå°±å¥½åƒæ­£åœ¨è¨ˆç®—çš„é›»è…¦ï¼Œæ’åº§ç›´æ¥è¢«æ‹”æ‰äº†ä¸€æ¨£ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ java é–‹ç™¼è€…ä¸å»ºè­°ç”¨&lt;code&gt;Thread.stop()&lt;/code&gt;é—œé–‰ threadï¼Œè€Œæ˜¯ç”¨&lt;code&gt;Thread.interrupt()&lt;/code&gt;åŠ ä¸Š&lt;code&gt;flag&lt;/code&gt;çš„æ–¹å¼ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Thread.interrupt()&lt;/code&gt;æ˜¯ç‚ºäº†é—œé–‰æ­£è™•æ–¼&lt;code&gt;Thread.sleep()&lt;/code&gt;ã€&lt;code&gt;Thread.wait()&lt;/code&gt;é€™é¡ã€Œæš«åœç‹€æ…‹ã€çš„ thread&lt;/li&gt;
&lt;li&gt;&lt;code&gt;flag&lt;/code&gt;æ˜¯ç‚ºäº†é—œé–‰æ­£åœ¨é‹è¡Œçš„ thread&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (isRunnable) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        doSomething();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;catch&lt;/span&gt; (InterruptedException e) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} &lt;span style=&#34;color:#66d9ef&#34;&gt;finally&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    doShutdown();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœ thread
æ­£åœ¨é‹è¡Œï¼Œ&lt;code&gt;while (isRunnable)&lt;/code&gt;é€™å€‹&lt;code&gt;flag&lt;/code&gt;æ˜¯&lt;code&gt;false&lt;/code&gt;çš„è©±å°±å¯ä»¥æ§åˆ¶æ˜¯å¦é‹è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœ thread
é‹è¡Œ&lt;code&gt;Thread.sleep()&lt;/code&gt;ã€&lt;code&gt;Thread.wait()&lt;/code&gt;å°è‡´ thread
æš«åœï¼Œ&lt;code&gt;Thread.interrupt()&lt;/code&gt;å°±å¯ä»¥ä½¿ thread
æ‹‹å‡ºç•°å¸¸&lt;code&gt;InterruptedException&lt;/code&gt;ï¼Œä¸¦åŸ·è¡Œæœ€å¾Œçš„&lt;code&gt;doShutdown()&lt;/code&gt;å–„å¾Œç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;java è¨­è¨ˆæœƒä»¥ä¸€å€‹ function
åŸ·è¡Œ&lt;code&gt;Thread.interrupt()&lt;/code&gt;èˆ‡æ”¹è®Š&lt;code&gt;flag&lt;/code&gt;ï¼Œè€Œæ­£åœ¨é‹è¡Œçš„
thread å†åŸ·è¡Œé—œé–‰å‹•ä½œï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;public&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;terminate&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	isRunnable &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	interrupt();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¾&lt;code&gt;Thread.stop()&lt;/code&gt;åˆ°&lt;code&gt;Thread.interrupt()&lt;/code&gt;ï¼Œæœƒè¼ƒèƒ½æ¯”å°å‡º
Two-phase Termination Pattern ã€Œå…©éšæ®µçµ‚æ­¢ã€çš„è¡Œç‚ºã€‚&lt;/p&gt;
&lt;p&gt;è€Œ golang ä¸èƒ½ç›´æ¥æ§åˆ¶ goroutine çš„ç”Ÿå‘½é€±æœŸï¼Œç„¡æ³•åšå‡º java ç›´æ¥é—œé–‰
thread çš„è¡Œç‚ºï¼Œæ‰€ä»¥åŸæœ¬ channel çš„åšæ³•ï¼Œå³ç¬¦åˆ Two-phase Termination
Pattern çš„ç›®æ¨™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;è¨­è¨ˆä¸€å€‹æç¤ºï¼Œæç¤ºé—œé–‰ç¨‹åºå¾Œé¡¯ç¤ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;os&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;os/signal&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;syscall&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Signal&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;signal&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Notify&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Interrupt&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;syscall&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SIGINT&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;syscall&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SIGTERM&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;done&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bye bye&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;				&lt;span style=&#34;color:#a6e22e&#34;&gt;os&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Exit&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;select&lt;/span&gt; {}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;done{}&lt;/code&gt; channel æœƒé€é&lt;code&gt;signal.Notify()&lt;/code&gt;èˆ‡&lt;code&gt;os.Interrupt&lt;/code&gt;ã€&lt;code&gt;syscall.SIGINT&lt;/code&gt;ã€&lt;code&gt;syscall.SIGTERM&lt;/code&gt;é€™äº›é—œé–‰ç›¸é—œçš„ system è¨Šè™Ÿç¶å®šï¼Œä¸¦ä»¥ goroutine çš„æ–¹å¼ä¸€ç›´é‹ä½œåœ¨æ•´å€‹ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;å†åŸ·è¡Œ&lt;code&gt;do something&lt;/code&gt;çš„éƒ¨åˆ†æ™‚ï¼Œåªè¦æˆ‘å€‘ä½¿ç”¨&lt;code&gt;control+c&lt;/code&gt;æˆ–è€…å…¶ä»–é—œé–‰ç¨‹åºçš„æ–¹æ³•ï¼Œchannel
æ¥æ”¶åˆ°é—œé–‰è¨Šè™Ÿå°±æœƒå®‰å…¨åœ°åŸ·è¡Œ&lt;code&gt;case &amp;lt;-done:&lt;/code&gt;ç¯„åœçš„
codeï¼Œå³åœ¨ terminal é¡¯ç¤º&lt;code&gt;bye bye&lt;/code&gt;æç¤ºä¸¦é—œé–‰ç¨‹åºã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/uml-class-diagrams%E5%9C%A8%E6%8A%BD%E8%B1%A1%E4%B8%96%E7%95%8C%E7%9A%84%E5%85%B7%E7%8F%BE%E5%8C%96%E5%AF%B6%E7%9F%B3-34ddbda7fed04af08465905f86a4876e/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/uml-class-diagrams%E5%9C%A8%E6%8A%BD%E8%B1%A1%E4%B8%96%E7%95%8C%E7%9A%84%E5%85%B7%E7%8F%BE%E5%8C%96%E5%AF%B6%E7%9F%B3-34ddbda7fed04af08465905f86a4876e/</guid>
        <description>&lt;h1 id=&#34;uml-class-diagramsåœ¨æŠ½è±¡ä¸–ç•Œçš„å…·ç¾åŒ–å¯¶çŸ³&#34;&gt;UML Class diagramsï¼Œåœ¨æŠ½è±¡ä¸–ç•Œçš„å…·ç¾åŒ–å¯¶çŸ³
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 13, 2021&lt;/p&gt;
&lt;p&gt;åœ¨ DAY 1 ~ DAY 12 å·²ç¶“ä»‹ç´¹äº†æˆ‘èªçŸ¥å¸¸è¦‹çš„ concurrency patternsï¼Œæ¥ä¸‹ä¾†å°±è¦ä»‹ç´¹ç¶“å…¸çš„ GoF design patternï¼Œä½†åœ¨é€™ä¹‹å‰æˆ‘èªç‚ºå¯ä»¥å…ˆä»‹ç´¹ä¸€äº› design pattern
çš„åŸºæœ¬æ¦‚å¿µä¾›å¤§å®¶æœ‰ç›¸åŒçš„èªçŸ¥ï¼Œä»¥ä¾¿æ›´æ¸…æ¥šçš„è¬›è§£ï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†å¹¾ç¯‡æœƒèªªæ˜é€™äº›æ¦‚å¿µã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡è¦ä»‹ç´¹çš„æ˜¯ UML Class diagramsï¼&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-uml-class-diagrams&#34;&gt;ä»€éº¼æ˜¯ UML Class diagramsï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;é€éåœ–å½¢ä¾†èªªæ˜ç‰©ä»¶å»ºç«‹ã€è€¦åˆã€äº’å‹•çš„é—œä¿‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;GoF design pattern ä¸»è¦åœ¨è¬›è§£ç‰©ä»¶èˆ‡ç‰©ä»¶çš„é—œä¿‚ï¼Œå¦‚æœç›´æ¥æŠŠ code è²¼å‡ºä¾†ï¼Œã€Œä¸€è¡Œä¸€è¡Œã€çš„ç¨‹å¼ç¢¼å¾ˆé›£è®“å‰›æ¥è§¸æ­¤ç³»çµ±çš„äººæœ‰ã€Œæ•´é«”ã€çš„æƒ³åƒï¼Œä¿—è©±èªªã€Œä¸€å¼µåœ–ï¼Œå‹éåƒè¨€è¬èªã€ï¼ŒClass diagrams
å°±æ˜¯å¸Œæœ›å°±ç”±åœ–ä¾†è®“äººæ›´å¿«é€Ÿçš„å°æ­¤ç³»çµ±æœ‰åˆæ­¥çš„ç†è§£ï¼Œæ‰€ä»¥æ‡‰ç”¨åœ¨è¬›è§£ GoF design pattern ä¹Ÿæ˜¯åˆé©çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½† Class diagrams çš„å®šç¾©æ²’æœ‰ä¸€å€‹çµ±ä¸€æ¨™æº–ï¼Œæœ‰è¨±å¤šè¦å‰‡çš„æ¼”è®Šï¼Œä½†ä¸¦ä¸æ˜¯æ¯ç¨®éƒ½å¾ˆå¸¸ä½¿ç”¨ï¼Œæˆ‘é¸æ“‡ä»¥ä¸‹å¹¾ç¨®æˆ‘èªç‚ºæœ€é‡è¦çš„è¦å‰‡ï¼Œä¸¦ä¸”ç”¨&lt;a class=&#34;link&#34; href=&#34;https://mermaid-js.github.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mermaid-js&lt;/a&gt;ç¹ªç•«ï¼ˆä½¿ç”¨æ•™å­¸å¯ä»¥çœ‹æˆ‘é€™ç¯‡&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10234553&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è®“ä½ å¿ƒè£¡çš„é‚è¼¯å…·ç¾åŒ–çš„å¿µèƒ½åŠ›å·¥å…·&lt;/a&gt;ï¼‰ï¼Œå¯¦ç”¨èˆ‡è®“äººçœ‹å¾—æ‡‚æœ€ç‚ºé‡è¦ï¼Œå¦‚æœè¦å‰‡å¤ªè¤‡é›œè®“äººç„¡æ³•ç†è§£å°±é©å¾—å…¶åäº†ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆèªªæ˜å¹¾å€‹å°ç´°ç¯€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;+è™Ÿä»£è¡¨æ˜¯å…¬é–‹å±¬æ€§æˆ–æ–¹æ³•&lt;/li&gt;
&lt;li&gt;è™Ÿä»£è¡¨æ˜¯ç§æœ‰å±¬æ€§æˆ–æ–¹æ³•&lt;/li&gt;
&lt;li&gt;ç·šæ¢ä¸Šå¦‚æœæœ‰æ•¸å­—ï¼Œä»£è¡¨æ­¤ç‰©ä»¶åœ¨é€™æ•´å€‹é—œä¿‚ä¸Šçš„æ•¸é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ï¼ˆç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Generalization/Inheritance ç¹¼æ‰¿&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Aj5dXdS.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/Aj5dXdS.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A æœƒå…ˆå®šç¾©å¥½ç›¸é—œçš„å±¬æ€§èˆ‡æ–¹æ³•ä¸¦ä¸”å¯¦ä½œï¼Œè€Œ B ç¹¼æ‰¿ A å¾Œï¼ŒB æœƒæ“æœ‰ A ç›¸é—œçš„å±¬æ€§èˆ‡æ–¹æ³•ï¼Œä¸¦ä¸” B ä¹Ÿå¯æœ‰æœ‰è‡ªå·±çš„å±¬æ€§èˆ‡æ–¹æ³•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼šPS5 æ˜¯ç¹¼æ‰¿è‡ª PS4 è€Œèª•ç”Ÿçš„ï¼ŒPS5 èƒ½æ“æœ‰ç© PS4 éŠæˆ²çš„åŠŸèƒ½ï¼Œä½†ä¹Ÿå¯ä»¥ç© PS5 çš„éŠæˆ²&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹ï¼Œéœ€ç‰¹åˆ¥æ³¨æ„çš„æ˜¯å…¶å¯¦ golang
æ²’æœ‰ç¹¼æ‰¿ï¼Œåªæœ‰çµ„åˆï¼ˆä¸‹æ–¹æœƒä»‹ç´¹ï¼‰ï¼Œä½†çµ„åˆåªçµ„ä¸€é …äº‹ç‰©ï¼Œä¹Ÿå¯ä»¥é”åˆ°ç¹¼æ‰¿çš„æ•ˆæœï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS4&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PS4Game&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS4&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayPS4Game&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PS4Game&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PS4&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Game&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayPS5Game&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;play %s&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PS5Game&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;PS4&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;PS4&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;PS4Game&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;KOF14&amp;#34;&lt;/span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayPS4Game&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Realization/Implementation å¯¦ä½œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/RCdnGvZ.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/RCdnGvZ.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A æœƒå…ˆå®šç¾©å¥½ç›¸é—œçš„æ–¹æ³•ä½†ä¸å¯¦ä½œï¼Œè€Œ B å¿…é ˆä»¥ A çš„å®šç¾©ä¾†å¯¦ä½œç›¸é—œæ–¹æ³•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼šè¡¨æ¼”æ¯”è³½èªªæ˜ä¾†åƒè³½çš„äººåªè¦æœƒå”±æ­Œå³å¯ï¼Œæ‰€ä»¥ä¸åŒçš„äººç¨®éƒ½å¯ä»¥åƒåŠ &lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Contestant&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Sing&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Mike&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Mike&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Sing&lt;/span&gt;() { &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mike singing&amp;#34;&lt;/span&gt;) }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Kevin&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Kevin&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Sing&lt;/span&gt;() { &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;kevin singing&amp;#34;&lt;/span&gt;) }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;York&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;York&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Sing&lt;/span&gt;() { &lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;york singing&amp;#34;&lt;/span&gt;) }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;contestant&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Contestant&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;contestant&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sing&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;Mike&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;Kevin&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Show&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;York&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Composition çµ„åˆ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/IFVLKNs.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/IFVLKNs.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A æ“æœ‰å¤šå€‹éƒ¨ä»¶ï¼Œä¸¦ä¸”é€™äº›éƒ¨ä»¶èˆ‡ A çš„ç”Ÿå‘½é€±æœŸæ˜¯ç›¸åŒçš„ï¼Œä»–å€‘å½¼æ­¤å¼·åˆ¶è¯ç¹«&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼šPS5 æ“æœ‰æ–æ¡¿ã€CPUã€é¡¯ç¤ºæ™¶ç‰‡é€™äº›éƒ¨ä»¶ï¼Œé€™äº›éƒ¨ä»¶æ˜¯ç‚ºäº† PS5
è€Œç”Ÿ&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PS5&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;CPU&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;GPU&lt;/span&gt;{},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ps5&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Aggregation èšåˆ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/2bYoa8v.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/2bYoa8v.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A æ“æœ‰å¤šå€‹éƒ¨ä»¶ï¼Œä¸¦ä¸”é€™äº›éƒ¨ä»¶èˆ‡ A
çš„ç”Ÿå‘½é€±æœŸæ˜¯ä¸ç›¸åŒçš„ï¼Œä»–å€‘å½¼æ­¤ä¸å¼·åˆ¶è¯ç¹«&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è·Ÿçµ„åˆé¡ä¼¼ï¼Œä½†é—œéµå·®ç•°æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;çµ„åˆï¼šæ˜¯åœ¨å®šç¾© struct çš„æ™‚å€™å°±è¦æ±‚æŠŠéƒ¨ä»¶è¯ç¹«åœ¨ä¸€èµ·&lt;/li&gt;
&lt;li&gt;èšåˆï¼šæ˜¯é€é function å»è¨­ç½®éƒ¨ä»¶ï¼Œæ‰€ä»¥ä¸å»è¨­ç½®ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå› æ­¤å½¼æ­¤è¯ç¹«ä¸å¼·åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼šswitch å¯ä»¥è²·é¼“çµ„ä¹Ÿå¯ä»¥è²·å°ˆç”¨æ‰‹æŠŠä¾†ç©å¤ªé¼“é”äººï¼Œä½†ä¸è²·ä¹Ÿæ˜¯å¯ä»¥ç©çš„&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoSwitch&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoSwitch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;controller&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoSwitch&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;use %s to play game&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;n&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Controller&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	} &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;use default controller to play game&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;nintendoSwitch&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NintendoSwitch&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;nintendoSwitch&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;SetController&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;drum&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;nintendoSwitch&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PlayGame&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Association é—œè¯&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/CFAVzND.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/CFAVzND.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A çš„å±¬æ€§ä¸­æ“æœ‰ Bï¼Œä¸¦åœ¨ A å‰µå»ºçš„æ™‚å€™å¸¶å…¥ B&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è·Ÿèšåˆç›¸ä¼¼ï¼Œä½†é—œéµå·®ç•°æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;èšåˆæ˜¯ä½¿ç”¨&lt;code&gt;.SetXXX()&lt;/code&gt;é€™é¡çš„ function å°‡å±¬æ€§è¨­ç½®&lt;/li&gt;
&lt;li&gt;é—œè¯æ˜¯åœ¨å‰µå»ºç‰©ä»¶çš„æ™‚å€™å°±å°‡å±¬æ€§è¨­ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½† golang ä¸¦ä¸èƒ½å†å‰µå»ºç‰©ä»¶æ™‚å°±å°‡å±¬æ€§è¨­ç½®ï¼Œå› ç‚º golang æ²’æœ‰ constructï¼Œæ‰€ä»¥æˆ‘å€‘å¯é€éä¸€å€‹&lt;code&gt;CreateXXX()&lt;/code&gt;ä¾†æ¨¡æ“¬&lt;/p&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼šæˆ‘æ“æœ‰ macï¼Œæˆ‘å¯ä»¥åˆ©ç”¨ mac ä¾†å»è™•ç†éµäººè³½æ–‡ç« &lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Mac&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Mac&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Mac&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;WriteArticle&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;write article&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateMe&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mac&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Mac&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;mac&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;WriteIronmanArticle&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Mac&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WriteArticle&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;me&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateMe&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;Mac&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;me&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;WriteIronmanArticle&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Dependency ç›¸ä¾&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DRdQc4v.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/DRdQc4v.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A ä¸æ“æœ‰å±¬æ€§ Bï¼Œä½† A çš„æŸæ–¹æ³•æœ‰é€éåƒæ•¸ B ä¾†å¯¦ç¾&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‰ä¾‹ä¾†èªªï¼šæˆ‘é›–ç„¶ä¸æ“æœ‰å…¬å¸ç™½æ¿ï¼Œä½†æˆ‘å¯ä»¥é€éå®ƒä¾†è·Ÿå…¶ä»–äººæºé€š&lt;/p&gt;
&lt;p&gt;code å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Whiteboard&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Whiteboard&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;DrawOnWhiteboard&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Println&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;write&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;Discuss&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;whiteboard&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Whiteboard&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;whiteboard&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DrawOnWhiteboard&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;me&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Me&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;me&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Discuss&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;Whiteboard&lt;/span&gt;{})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/worker-pool-pattern%E5%B0%B1%E5%BE%88pool-54c58a218e2349fe92a75bc266d30912/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/worker-pool-pattern%E5%B0%B1%E5%BE%88pool-54c58a218e2349fe92a75bc266d30912/</guid>
        <description>&lt;h1 id=&#34;worker-pool-patternå°±å¾ˆpool&#34;&gt;Worker Pool Patternï¼Œå°±ã€‚å¾ˆã€‚Poolã€‚
&lt;/h1&gt;&lt;p&gt;Tags: Golang, Hey! Go Design Patterns, ithome 2021 ironman
Date: September 9, 2021&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-worker-pool-pattern&#34;&gt;ä»€éº¼æ˜¯ Worker Pool Patternï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è¨­å®šå¥½ pool çš„ goroutine æ•¸é‡ï¼Œé å…ˆå•Ÿå‹•å¤šå€‹ goroutineï¼ŒæŠŠ job
å‚³çµ¦é€™äº› goroutine åŸ·è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;èˆ‡ Thread-Per-Message Pattern é¡ä¼¼ï¼Œéƒ½æ˜¯å°‡ message æˆ– job å‚³çµ¦ goroutine åŸ·è¡Œçš„ patternï¼Œä¸åŒçš„æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Thread-Per-Message Patternt ç•¶æ¥æ”¶åˆ° message çš„æ™‚å€™å•Ÿå‹• goroutine&lt;/li&gt;
&lt;li&gt;Worker Pool Pattern æ˜¯é å…ˆå•Ÿå‹•å¥½ goroutineï¼Œç¨±ä¹‹ç‚º &lt;strong&gt;pool&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é å…ˆå•Ÿå‹•å¥½çš„ goroutine å¯ä»¥å…ˆåšä¸€äº›å‰ç½®å‹•ä½œï¼Œä¾‹å¦‚ DB é€£ç·šã€èˆ‡å…¶ä»– service çš„ socket é€£ç·šç­‰ï¼Œå¯é¿å…æ”¶åˆ° job æ™‚æ‰é–‹å§‹åŸ·è¡Œé€™äº›å‹•ä½œå°è‡´é€Ÿåº¦ç·©æ…¢ï¼Œæˆ–è€…ç„¡æ³•æ§åˆ¶ goroutine æ•¸é‡å°è‡´ç³»çµ±å´©æ½°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•é¡Œæƒ…å¢ƒ&#34;&gt;å•é¡Œæƒ…å¢ƒ
&lt;/h2&gt;&lt;p&gt;å»¶çºŒ&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10267174&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY 5ï¼šThread-Per-Message Pattern&lt;/a&gt;çš„æƒ…å¢ƒ&lt;/p&gt;
&lt;p&gt;è¨­è¨ˆä¸€å€‹æ¨æ’­æ–°èç³»çµ±ï¼Œæœƒå°‡æ–°çš„æ–°èç›´æ¥æ¨æ’­å‡ºå»ï¼Œæˆ‘å€‘å¸Œæœ›æ¨æ’­ç³»çµ±æ•ˆç‡è¦é«˜ï¼Œä¸¦ä¸”æ¯æ¬¡æ¨æ’­éƒ½æœƒè·ŸæŸ service å»ºç«‹ socket æ‹¿å–è³‡æ–™ï¼Œå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/2cYFpbx.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/2cYFpbx.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ä¸­&lt;strong&gt;socket é€£ç·š&lt;/strong&gt;å±¬æ–¼è€—æ™‚çš„ IO è¡Œç‚ºï¼Œæ¯å€‹ goroutine éƒ½é€£ç·š socket æœƒå°è‡´åˆå§‹åŒ–éæ…¢ï¼Œä¸¦ä¸” goroutine ä¸€å¤šèµ·ä¾†ï¼Œsocket é€£ç·šéå¤šæœƒå°è‡´é€£ç·šæå£ã€‚&lt;/p&gt;
&lt;p&gt;è¨­è¨ˆæœ‰å•é¡Œçš„ç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;(ç›¸é—œçš„ code åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/go-design-patterns&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github - go-design-patterns&lt;/a&gt;ã€‚)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬èˆ‡æŸserviceå»ºç«‹socketçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;))  &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s cost %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¹Ÿä¸è¦åƒå¤ªæ’&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt; = append(&lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;PushNews&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;newsChs&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;news %d is sent at %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;index&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;newsCh&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;time.Sleep(time.Duration(10 * time.Second))&lt;/code&gt;æœƒå°è‡´æ¯å€‹ goroutine éƒ½èŠ±äº† 10 ç§’ä¾†ç·´ç·š socketï¼Œå°è‡´é‹è¡Œç·©æ…¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£æ±ºæ–¹å¼&#34;&gt;è§£æ±ºæ–¹å¼
&lt;/h2&gt;&lt;p&gt;å¦‚æœå¯ä»¥ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ§åˆ¶ goroutine æ•¸é‡&lt;/li&gt;
&lt;li&gt;é å…ˆé€£ç·š socket&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å³å¯é¿å… goroutine æ¥åˆ° job åˆå§‹åŒ–éæ…¢çš„å•é¡Œï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;time&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsName&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;FinishTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Worker&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;jobs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;results&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Time&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬èˆ‡æŸserviceå»ºç«‹socketçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;jobs&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sleep&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Duration&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Second&lt;/span&gt;)) &lt;span style=&#34;color:#75715e&#34;&gt;//æ¨¡æ“¬æ¨æ’­é‹è¡Œçš„æ™‚é–“
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%s cost %s by worker %d\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Since&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;startTime&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;results&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;job&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;time&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Now&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; []&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸­ç§‹ç¯€ä¾†äº†&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;è¨˜å¾—&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¸è¦æˆ¶å¤–çƒ¤è‚‰ï½&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;ä¹Ÿä¸è¦åƒå¤ªæ’&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;jobs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;, len(&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;results&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; make(&lt;span style=&#34;color:#66d9ef&#34;&gt;chan&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SendInfo&lt;/span&gt;, len(&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;go&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Worker&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;jobs&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;results&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;start&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;range&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;jobs&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;news&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#75715e&#34;&gt;// do something
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;; &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; len(&lt;span style=&#34;color:#a6e22e&#34;&gt;allNews&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;results&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Printf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;news %s is sent at %s\n&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewsName&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;FinishTime&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;for w := 1; w &amp;lt;= 2; w++&lt;/code&gt;åœ¨ pool å‰µå»ºäº†ä¸‰å€‹ goroutineï¼Œç¨±ä¹‹ç‚º workerï¼Œä»–å€‘æœƒå…ˆåˆå§‹åŒ– socket é€£ç·šï¼Œè®“å¾ŒçºŒæœ‰ job å‚³å…¥æ™‚ä¸éœ€è¦å†åŸ·è¡Œä¸€æ¬¡ socket é€£ç·š&lt;/li&gt;
&lt;li&gt;&lt;code&gt;for _, news := range allNews&lt;/code&gt;å³é–‹å§‹é€ job çµ¦ workerï¼Œç”±æ–¼ worker å·²ç¶“åˆå§‹åŒ–ï¼Œé‹è¡Œä¸æœƒè¢« socket åˆå§‹åŒ–æ‹–æ…¢&lt;/li&gt;
&lt;li&gt;æ§åˆ¶ worker çš„æ•¸é‡ç‚ºä¸‰å€‹ï¼Œä½¿ socket é€£ç·šæ•¸æ˜¯å¯æ§çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¦‚å¿µå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/nop2xy9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/nop2xy9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é‹è¡Œçµæœå¦‚åœ–ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NCgtoG6.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/NCgtoG6.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æ­¤ä¸€ä¾†æ¯æ¬¡é‹è¡Œ goroutine å°±ä¸ç”¨åš socket é€£ç·šï¼Œç¯€çœäº†è¨±å¤šæ™‚é–“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸éï¼Œç”±æ–¼ pool åªæœ‰é‹è¡Œä¸‰å€‹ goroutineï¼Œè€Œ news æœ‰å››å€‹ï¼Œæ‰€ä»¥ç¬¬å››å€‹&lt;code&gt;ä¹Ÿä¸è¦åƒå¤ªæ’&lt;/code&gt;news æœƒåœ¨ pool éƒ½è™•ç†å®Œå‰ä¸‰å€‹ news å¾Œå†åŸ·è¡Œã€‚Worker Pool Pattern å¯ä»¥é™åˆ¶ pool çš„ goroutine æ•¸é‡ï¼Œä»¥é¿å…ç³»çµ±è² è¼‰éå¤§ï¼Œä½†ä¹Ÿéœ€è¦è€ƒæ…® pool æ˜¯å¦éå°ï¼Œå°è‡´ news jobs å¸¸å¸¸éœ€ç­‰å¾… pool çš„æƒ…å½¢ã€‚&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BA%86%E8%A7%A3-k8s-%E4%B8%AD%E7%9A%84-podservicedeployment-1f110478496c4e179460e60bc621a047/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BA%86%E8%A7%A3-k8s-%E4%B8%AD%E7%9A%84-podservicedeployment-1f110478496c4e179460e60bc621a047/</guid>
        <description>&lt;h1 id=&#34;äº†è§£-k8s-ä¸­çš„-podservicedeployment&#34;&gt;äº†è§£ K8s ä¸­çš„ Podã€Serviceã€Deployment
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 2, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY18&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day18-%E4%BA%86%E8%A7%A3-k8s-%E4%B8%AD%E7%9A%84-pod-service-deployment-92408f9244e1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10248019&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/sHZdiDx.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/sHZdiDx.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä»‹ç´¹ K8s åˆ°åº•æœ‰å“ªäº› config yaml
æª”ï¼Œä»–å€‘åˆæ˜¯ä½•ç¨®ç”¨é€”ã€‚&lt;/p&gt;
&lt;h2 id=&#34;k8s-çš„æ•´é«”æ¶æ§‹&#34;&gt;K8s çš„æ•´é«”æ¶æ§‹
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/rsBTtXL.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/rsBTtXL.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;http://nishadikirielle.blogspot.com/2016/02/kubernetes-at-first-glance.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes,
At A First Glance&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;K8s æœ‰éå¸¸å¤šçš„å…ƒä»¶ä¾†å»ºæ§‹è±å¯Œå¤šæ¨£çš„æ¶æ§‹ï¼Œä½†æˆ‘å€‘å¯å·²ç”±é«˜è‡³ä½äº†è§£ä»¥ä¸‹ 4
å€‹ä¸åŒå±¤ç´šçš„é‡è¦å…ƒä»¶ï¼Œæœƒæ¯”è¼ƒå¥½ç†è§£:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cluster: ç®¡ç†å¤šå€‹ Master, Worker Nodeï¼Œå¯ä»¥ç†è§£ç‚ºå¤šå€‹ VM
å¦‚ä½•è®Šç‚ºä¸€å€‹ã€Œå¤§ VMã€çš„æ–¹å¼&lt;/li&gt;
&lt;li&gt;Master Node: å¯¦éš›çš„ VMï¼ŒK8s æœƒç”±ä¸€å€‹ Master Node å»ç®¡ç†åº•ä¸‹å¤šå€‹
Worker Node&lt;/li&gt;
&lt;li&gt;Worker Node: å¯¦éš›çš„ VMï¼Œè£¡é ­ç®¡ç†è‘—ä¸€å€‹ä¸€å€‹ Pod&lt;/li&gt;
&lt;li&gt;Pod: Pod è£¡æ”¾è‘—å®¹å™¨ï¼Œå®¹å™¨é€šå¸¸ç‚ºä¸€å€‹ï¼Œä½†ä¹Ÿå¯ä»¥å¤šå€‹&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;poddeploymentservice&#34;&gt;Podã€Deploymentã€Service
&lt;/h2&gt;&lt;p&gt;yaml config ä»‹ç´¹&lt;/p&gt;
&lt;p&gt;Pod å¯ä»¥ç†è§£ç‚ºä¸€å€‹æˆ–å¤šå€‹ docker å®¹å™¨æ€éº¼å•Ÿå‹•åœ¨ K8s ä¸­ï¼Œè€Œåœ¨ kompose
è½‰æ›ä¸­æ²’æœ‰å‡ºç¾æ­¤ config æª”æ¡ˆï¼Œç‚ºä»€éº¼å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å› ç‚º Pod ä¹‹ä¸Šæœ‰ Deploymentï¼Œä»–é™¤äº†æè¿° Pod
çš„è¡Œç‚ºå¤–ï¼Œé‚„æœƒæè¿°&lt;code&gt;Podåœ¨K8sä¸Šç‹€æ…‹ç™¼ç”Ÿè®ŠåŒ–æ™‚è¦å°æ‡‰çš„æ©Ÿåˆ¶&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è€Œé—œæ–¼&lt;code&gt;å¦‚ä½•é€£ç·šå­˜å–é€™äº›Pod&lt;/code&gt;ï¼Œå°±è¦é€é Service ä¾†è¨­å®š&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Service èˆ‡ Deployment ä¸­æœ‰äº› config ä½¿ç”¨çš„æ¬„ä½ç›¸åŒï¼Œåˆ†åˆ¥æ˜¯:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;apiVersion: ç‚ºæè¿°æ­¤å…ƒä»¶ä½¿ç”¨çš„ K8s API çš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;kind: èªªæ˜æ­¤å…ƒä»¶å±¬æ–¼ä½•ç¨®é¡å‹ï¼Œæœ‰ Serviceã€Deployment ç­‰ç­‰&lt;/li&gt;
&lt;li&gt;metadata: èªªæ˜æ­¤å…ƒä»¶çš„ç›¸é—œè³‡è¨Š&lt;/li&gt;
&lt;li&gt;metadata.labels: å¯ä»¥å°‡æ­¤å…ƒä»¶åˆ†é¡åœ¨ç‰¹å®š label&lt;/li&gt;
&lt;li&gt;metadata.annotations: èªªæ˜ä¸éœ€è¦åˆ†é¡çš„ç›¸é—œè³‡è¨Š&lt;/li&gt;
&lt;li&gt;metadata.creationTimestamp: æ­¤å…ƒä»¶è¢«å‰µç«‹çš„æ™‚é–“&lt;/li&gt;
&lt;li&gt;metadata.name: æ­¤å…ƒä»¶çš„åç¨±&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Deployment çš„æ¬„ä½ä»‹ç´¹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# server-service.yamlapiVersion: extensions/v1beta1kind: Deploymentmetadata:  annotations:    kompose.cmd: kompose convert    kompose.version: 1.16.0 (0c01309)  creationTimestamp: null  labels:    io.kompose.service: server  name: serverspec:  replicas: 1  strategy: {}  template:    metadata:      creationTimestamp: null      labels:        io.kompose.service: server    spec:      containers:        - command:            - go            - run            - cmd/main.go          image: superj80820/digimon-service          name: server          ports:            - containerPort: 6000          resources: {}      restartPolicy: Alwaysstatus: {}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;spec.replicas: æ­¤ Pod æœƒåœ¨ K8s æœ‰å¹¾å€‹æ©«å‘æ“´å±•(Horizontal Pod
Autoscaler)ï¼Œç›®å‰è¨­å®šä¸€å€‹&lt;/li&gt;
&lt;li&gt;spec.strategy: å¯ä»¥è¨­å®šç‹€æ…‹è®ŠåŒ–å°æ‡‰æ©Ÿåˆ¶çš„ç­–ç•¥ï¼Œä¾‹å¦‚ image
é™ç‰ˆè¦è¦ç¶­æŒå¹¾å€‹ Pod ä¹‹é¡ï¼Œé€™é‚Šä½¿ç”¨é è¨­å€¼&lt;/li&gt;
&lt;li&gt;spec.template.spec.containers: è¨­ç½®å®¹å™¨&lt;/li&gt;
&lt;li&gt;spec.template.spec.containers.command: å®¹å™¨çš„å•Ÿå‹• command&lt;/li&gt;
&lt;li&gt;spec.template.spec.containers.image: å®¹å™¨ä½¿ç”¨çš„ image&lt;/li&gt;
&lt;li&gt;spec.template.spec.containers.ports: å®¹å™¨ä½¿ç”¨çš„ port&lt;/li&gt;
&lt;li&gt;spec.template.spec.containers.restartPolicy:
å®¹å™¨æ˜¯å¦ç„¡é æœŸé—œé–‰å¾Œè¦é‡æ–°å•Ÿå‹•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Service çš„æ¬„ä½ä»‹ç´¹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# server-service.yamlapiVersion: v1kind: Servicemetadata:  annotations:    kompose.cmd: kompose convert    kompose.version: 1.16.0 (0c01309)  creationTimestamp: null  labels:    io.kompose.service: server  name: serverspec:  ports:    - name: &amp;#34;6000&amp;#34;      port: 6000      targetPort: 6000  selector:    io.kompose.service: serverstatus:  loadBalancer: {}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;spec.ports.ports: èªªæ˜å°å¤–å¯é€£å…¥çš„ port ç‚ºä½•&lt;/li&gt;
&lt;li&gt;spec.ports.targetPort: èªªæ˜å°å¤–é€£å…¥çš„ port å°æ‡‰åˆ° Pod çš„å“ªå€‹
port&lt;/li&gt;
&lt;li&gt;spec.ports.selector: æ­¤è¦å‰‡è¦å¥—ç”¨åˆ°å“ªå€‹ label ä¸Š&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-basic-concept-tutorial-e033e3504ec0&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆä¸€ï¼‰åŸç†ä»‹ç´¹. Kubernetes å¦‚ä½•é‹ä½œï¼Ÿä»€éº¼æ˜¯ Podï¼Ÿä»€éº¼æ˜¯
Nodeï¼ŸMasterâ€¦ | by èƒ¡ç¨‹ç¶­ï½œ Cheng-Wei Hu | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-implement-ingress-deployment-tutorial-7431c5f96c3e&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆäºŒï¼‰å¯¦ä½œç¯„ä¾‹ï¼šPodã€Serviceã€Deploymentã€Ingress | by èƒ¡ç¨‹ç¶­ï½œ
Cheng-Wei Hu | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-helm-chart-tutorial-fbdad62a8b61&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆä¸‰ï¼‰Helm ä»‹ç´¹èˆ‡å»ºç«‹ Chart | by èƒ¡ç¨‹ç¶­ï½œ Cheng-Wei Hu |
Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10194613&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[Day 10]
Kubernetes ä¸–ç•Œä¸å¯ç¼ºå°‘çš„ - Labels - iT é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘
IT äººçš„ä¸€å¤©&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;community/api-conventions.md
at master Â· kubernetes/community&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;http://nishadikirielle.blogspot.com/2016/02/kubernetes-at-first-glance.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes,
at a first glance | Nishadiâ€™s Tech Blog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://tachingchen.com/tw/blog/kubernetes-rolling-update-with-deployment/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é€é
Kubernetes Deployments å¯¦ç¾æ»¾å‹•å‡ç´š | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BA%86%E8%A7%A3-k8s-%E4%B8%AD%E7%9A%84%E5%A4%A7%E9%96%80%E7%A5%9Eingress-68ee3c5ef255482aba0dfd290e4f7e88/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BA%86%E8%A7%A3-k8s-%E4%B8%AD%E7%9A%84%E5%A4%A7%E9%96%80%E7%A5%9Eingress-68ee3c5ef255482aba0dfd290e4f7e88/</guid>
        <description>&lt;h1 id=&#34;äº†è§£-k8s-ä¸­çš„å¤§é–€ç¥ingress&#34;&gt;äº†è§£ K8s ä¸­çš„å¤§é–€ç¥ï¼Ingress
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 3, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY19&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day19-%E4%BA%86%E8%A7%A3-k8s-%E4%B8%AD%E7%9A%84%E5%A4%A7%E9%96%80%E7%A5%9E-ingress-ee996d8837ae&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10248658&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©æˆ‘å€‘è¦ä»‹ç´¹ K8s
çš„å¦ä¸€å€‹é‡è¦å…ƒä»¶&lt;code&gt;Ingress&lt;/code&gt;ï¼ŒIngress æ˜¯ä¸€å€‹åœ¨ K8s çœ¾å¤š Service
å‰çš„ Reverse Proxyï¼Œä»–å¯ä»¥è®“ K8s çš„é€£ç·šè®Šç‚º:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€å€‹ domainï¼Œç”±ä¸åŒçš„ hostName æˆ– pathName ä¾†é€£ç·š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/AVb15MY.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/AVb15MY.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-implement-ingress-deployment-tutorial-7431c5f96c3e&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆäºŒï¼‰å¯¦ä½œç¯„ä¾‹ï¼šPodã€Serviceã€Deploymentã€Ingress&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚åœ–èˆ‰å€‹ä¾‹å­ï¼Œå¦‚æœæˆ‘å€‘åªæœ‰&lt;code&gt;digimon.com&lt;/code&gt;ä¸€å€‹ domainï¼Œå»æœ‰
a, b, c, d, e 5 å€‹ service æ€éº¼è¾¦ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hostName çš„åˆ†æµåšæ³•: è¨­ç½®å­ç¶²åŸŸ a.digimon.com, b.digimon.com â€¦
ç­‰ç­‰&lt;/li&gt;
&lt;li&gt;pathName çš„åˆ†æµåšæ³•: è¨­ç½®è·¯å¾‘ digimon.com/a, digimon.com/b â€¦
ç­‰ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™æ¨£å°±ä¸ç”¨å¦å¤–å†å»ç”³è«‹ domain äº†ï¼(&lt;del&gt;ç•¶ç„¶å¦‚æœä½ å¾ˆæœ‰éŒ¢ä¹Ÿå¯ä»¥å•¦
XD&lt;/del&gt;)&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ&#34;&gt;å¯¦ä½œ
&lt;/h2&gt;&lt;p&gt;Ingress æœ‰è¨±å¤šä¸åŒç’°å¢ƒçš„ç‰ˆæœ¬ï¼Œingress-gce, ingress-aws, ingress-nginx
ç­‰ç­‰(è©³ç´°åœ¨&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/#additional-controllers&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;additional-controllers&lt;/a&gt;)ï¼Œå¦‚æœæ˜¯ä½¿ç”¨
ingress-awsï¼Œä»–åœ¨å¯¦éš›å¥—ç”¨æ™‚æœƒç›´æ¥èˆ‡ AWS çš„ Load Balancer
åšé€£å‹•ï¼Œè€Œæˆ‘å€‘åœ¨ local ç›´æ¥ä½¿ç”¨é è¨­çš„å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä»¥ pathName ä¾†åšåˆ†æµï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion: extensions/v1beta1kind: Ingressmetadata:  name: digimon-ingressspec:  rules:    - host: digimon.com      http:        paths:          - path: /digimon-service            backend:              serviceName: envoy              servicePort&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;rules.host: è¨­ç½®å¯¦éš›ä¸Šé€£ç·šçš„ domain&lt;/li&gt;
&lt;li&gt;rules.http.paths.path: è¨­ç½®åˆ†æµ
pathï¼Œåœ¨æ­¤æœƒä»¥&lt;code&gt;digimon.com/digimon-service&lt;/code&gt;ä¾†å°åˆ°æ­£ç¢ºçš„
envoy-service&lt;/li&gt;
&lt;li&gt;rules.http.paths.backend.serviceName: è¦å°åˆ°çš„ service name&lt;/li&gt;
&lt;li&gt;rules.http.paths.backend.servicePort: è¦å°åˆ°çš„ service port&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”±æ–¼æˆ‘ä½¿ç”¨ä¸Šç™¼ç¾ ingress è¦å•Ÿç”¨è¦ä½¿ç”¨ hyperkitï¼Œæ‰€ä»¥å¯ä»¥å…ˆåˆªé™¤
minikube åœ¨é‡æ–°å»ºç«‹ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube delete
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --driver&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;hyperkit --kubernetes-version v1.15.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•Ÿç”¨ ingress&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;minikube addons enable ingress
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•Ÿå‹• service, deployment, ingress&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ kompose up
$ kubectl create -f ingress.yaml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç²å– minikube ip&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ minikube ip
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”±æ–¼ domain
ä¸¦ä¸çœŸçš„å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ä»¥ä¿®æ”¹&lt;code&gt;/etc/hosts&lt;/code&gt;çš„æ–¹å¼ï¼Œä¾†å°‡
domain å°åˆ° minikube ip&lt;/p&gt;
&lt;p&gt;æˆ‘å¾—åˆ°çš„ minikube ip æ˜¯&lt;code&gt;127.0.0.1&lt;/code&gt;ï¼Œå› æ­¤æˆ‘å¯ä»¥ä¸‹æ­¤æŒ‡ä»¤å°‡
domain.com å°åˆ° 127.0.0.1&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;echo 127.0.0.1   digimon.com  &amp;gt;&amp;gt; /etc/hosts
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-implement-ingress-deployment-tutorial-7431c5f96c3e&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆäºŒï¼‰å¯¦ä½œç¯„ä¾‹ï¼šPodã€Serviceã€Deploymentã€Ingress | by èƒ¡ç¨‹ç¶­ï½œ
Cheng-Wei Hu | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/zh/docs/tasks/configure-pod-container/translate-compose-kubernetes/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å°†
Docker Compose æ–‡ä»¶è½¬æ¢ä¸º Kubernetes èµ„æº | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/kubernetes/ingress-nginx/issues/349&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ingress
path does not work Â· Issue #349 Â· kubernetes/ingress-nginx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/docs/tasks/access-application-cluster/ingress-minikube/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Set
up Ingress on Minikube with the NGINX Ingress Controller |
Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/kubernetes/minikube/issues/7332&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;docker:
Ingress not exposed on MacOS Â· Issue #7332 Â·
kubernetes/minikube&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/#additional-controllers&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ingress
Controllers | Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BB%80%E9%BA%BC%E4%BD%A0%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC%E7%94%B1%E6%96%87%E4%BB%B6%E7%94%A2%E7%94%9F%E9%80%99%E6%A8%A3%E4%B8%8D%E5%B0%B1%E4%B8%8D%E7%94%A8%E8%A3%9C%E6%96%87%E4%BB%B6%E4%BA%86%E5%97%8E---docs-tool-%E7%AF%87-fa7ff7cf353d4c7aa600874423c9ab90/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BB%80%E9%BA%BC%E4%BD%A0%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC%E7%94%B1%E6%96%87%E4%BB%B6%E7%94%A2%E7%94%9F%E9%80%99%E6%A8%A3%E4%B8%8D%E5%B0%B1%E4%B8%8D%E7%94%A8%E8%A3%9C%E6%96%87%E4%BB%B6%E4%BA%86%E5%97%8E---docs-tool-%E7%AF%87-fa7ff7cf353d4c7aa600874423c9ab90/</guid>
        <description>&lt;h1 id=&#34;ä»€éº¼ä½ çš„ç¨‹å¼ç¢¼ç”±æ–‡ä»¶ç”¢ç”Ÿé€™æ¨£ä¸å°±ä¸ç”¨è£œæ–‡ä»¶äº†å—---docs-tool-ç¯‡&#34;&gt;ä»€éº¼ï¼ä½ çš„ç¨‹å¼ç¢¼ç”±æ–‡ä»¶ç”¢ç”Ÿï¼Œé€™æ¨£ä¸å°±ä¸ç”¨è£œæ–‡ä»¶äº†å—ï¼ï¼Ÿ - Docs tool ç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 19, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY05&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day5-%E4%BB%80%E9%BA%BC-%E4%BD%A0%E7%9A%84%E7%A8%8B%E5%BC%8F%E7%A2%BC%E7%94%B1%E6%96%87%E4%BB%B6%E7%94%A2%E7%94%9F-%E9%80%99%E6%A8%A3%E4%B8%8D%E5%B0%B1%E4%B8%8D%E7%94%A8%E8%A3%9C%E6%96%87%E4%BB%B6%E4%BA%86%E5%97%8E-docs-tool-%E7%AF%87-3e9a734d063e&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10240175&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY04&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY04&lt;/a&gt;
Docker-Compose çš„ä»‹ç´¹å¾Œï¼Œæˆ‘å€‘çµ‚æ–¼æœ‰äº†ä¸€å€‹é–‹ç™¼ç’°å¢ƒï¼Œæ¥ä¸‹ä¾†è¦å¯¦ä½œå¤ éå„ç¨®
Docs tool ä¾†å»ºæ§‹å„ç¨®æ–‡ä»¶èˆ‡ç¨‹å¼ä»‹é¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç‚ºä»€éº¼éœ€è¦é€™äº›-docs-tool&#34;&gt;ç‚ºä»€éº¼éœ€è¦é€™äº› Docs tool
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;æ–‡ä»¶èˆ‡å¯¦ä½œåŒæ­¥ï¼Œç‚ºä¸åŒåœ˜éšŠæä¾›ä¸€å€‹ç°¡æ½”çš„ç³»çµ±ä»‹ç´¹ï¼Œè€Œä¸æ˜¯é‡åˆ°ä»»ä½•å•é¡Œå°±çœ‹code&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»¥å‰æ¥å—äº†è¨±å¤šå°ˆæ¡ˆï¼Œæ–‡æª”æä¾›ä¸å®Œå…¨ï¼Œå°è‡´è¨±å¤š API
æ ¹æœ¬ä¸æ¸…æ¥šä½œç”¨ï¼Œè€Œæ˜¯è¦é€é&lt;code&gt;çœ‹code&lt;/code&gt;ä¾†äº†è§£æ•´é«”æƒ…å¢ƒï¼Œé€™èŠ±è²»äº†å·¨é‡çš„æ™‚é–“ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿä¸æ˜¯èªªçœ‹ code ä¸å¥½ï¼Œåœ¨&lt;a class=&#34;link&#34; href=&#34;https://www.tenlong.com.tw/products/9789862017050&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Clean
Code&lt;/a&gt;æ›¸ä¸­ä¹Ÿæœ‰æåˆ° :&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;code å¿…é ˆè¦æ¸…æ¥šè¡¨é”æ„åœ–ï¼Œè€Œä¸æ˜¯é å„ç¨®è¨»è§£è§£æ±º&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œæ–‡ä»¶è·Ÿè¨»è§£æœ‰å¹¾åˆ†ç›¸ä¼¼ï¼Œæ˜¯å¦å¦‚æœ code å¯«å¾—å¥½å°±ä¸éœ€è¦æ–‡ä»¶äº†å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘èªç‚ºé‚„æ˜¯è¦çš„ï¼Œä»¥ä¸‹æ˜¯æˆ‘è¦ºå¾—éœ€è¦å¯«æˆæ–‡ä»¶çš„éƒ¨åˆ†:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€é€£ä¸²ä¸åŒ API é”æˆçš„æƒ…å¢ƒ: å› ç‚ºå–®ç´”çœ‹ code
æ˜¯ç„¡æ³•èªªæ˜ä¸€æ•´å€‹æƒ…å¢ƒçš„ã€‚&lt;/li&gt;
&lt;li&gt;API æ‰€è¦ç¯„çš„ä»‹é¢: å„åœ˜éšŠå¯ä»¥æ ¹æ“šæ­¤è¦ç¯„ä¾†ä¸²æ¥ APIï¼Œä»¥é¿å…å¾Œç«¯èªªè¦å¸¶ a
è³‡æ–™å‰ç«¯å»å¸¶ b è³‡æ–™çš„çª˜å¢ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç‚ºä»€éº¼æ–‡ä»¶å¾€å¾€è¶•ä¸ä¸Šå¯¦ä½œ&#34;&gt;ç‚ºä»€éº¼æ–‡ä»¶å¾€å¾€è¶•ä¸ä¸Šå¯¦ä½œï¼Ÿ
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;å› ç‚ºå¯«æ–‡ä»¶çš„æˆæœ¬å¾€å¾€é«˜æ–¼å¯« code&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘èªç‚ºæœ‰ä»¥ä¸‹é—œä¿‚:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç•¶æ›´æ–°äº† code çš„åŠŸèƒ½ï¼Œæˆ‘å€‘å°±è¦é»é–‹å„å¼å„æ¨£çš„æ–‡ä»¶å»æ›´æ–°&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶è»Ÿé«”ç”¨èµ·ä¾†æœ‰å¤ ä¸é †æ‰‹ï¼Œå¥‡æ€ªæˆ‘æ˜¯ç¨‹å¼è¨­è¨ˆçš„ç‚ºä»€éº¼è¦ä¸€å¤©åˆ°æ™šç•«åœ–&lt;/li&gt;
&lt;li&gt;ç‚ºä»€éº¼æ–‡ä»¶å¯«çš„è·Ÿ code ä¸ä¸€æ¨£ï¼Œç®—äº†é€™å€‹æ–‡ä»¶ä¸çœ‹ç™½ä¸çœ‹ï¼Œé‚„æ˜¯çœ‹
code&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘å·²ä»¥ä¸‹åŸå‰‡ä¾†å¯«æ–‡ä»¶ï¼Œæˆ‘èªç‚ºå¯ä»¥æ¸›ä½ä»¥ä¸Šå•é¡Œçš„æˆæœ¬ XD:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;çµ±ä¸€éƒ½ç”¨ Markdown ä¾†å¯«ï¼Œæµç¨‹åœ–èˆ‡é—œä¿‚åœ–ç”¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/mermaid-js/mermaid&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mermaid-js&lt;/a&gt;èˆ‡&lt;a class=&#34;link&#34; href=&#34;https://github.com/hediet/vscode-drawio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;vscode-drawio&lt;/a&gt;ä¸€æ¬¡è§£æ±º&lt;/li&gt;
&lt;li&gt;å› ç‚ºæ¡ç”¨ Markdown
æ‰€ä»¥ä¸ç”¨å†&lt;code&gt;ç‚ºäº†é‚è¼¯è€Œç•«åœ–&lt;/code&gt;ï¼Œè€Œæ˜¯å¯«å¥½é‚è¼¯å°±è‡ªå‹•ç”¢ç”Ÿåœ–&lt;/li&gt;
&lt;li&gt;ç”¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;ä¾†ç”¢ç”Ÿç¨‹å¼ä»‹é¢ï¼Œå†ä¾†é–‹ç™¼ï¼Œé€™æ¨£å°±å¯ä»¥&lt;code&gt;ç”¨æ–‡ä»¶ç”¢ç”Ÿç¨‹å¼ä»‹é¢&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ç”¨æ–‡ä»¶ç”¢ç”Ÿç¨‹å¼ä»‹é¢&#34;&gt;ç”¨æ–‡ä»¶ç”¢ç”Ÿç¨‹å¼ä»‹é¢ï¼Ÿï¼
&lt;/h2&gt;&lt;p&gt;æ²’éŒ¯ï¼ä½ å¯ä»¥é€™æ¨£åšï¼Œåœ¨ GraphQL
å•ä¸–å¾Œï¼Œå¤§å®¶æ…¢æ…¢ç™¼ç¾å¯ä»¥é€™æ¨£åšï¼Œè¦æ›´æ”¹ç¨‹å¼å—ï¼Ÿé‚£è«‹å…ˆæ›´æ–° GraphQL
schemaï¼Œå¦‚æ­¤ä¸€ä¾†æ–‡ä»¶æ°¸é ä¸æœƒè½å¾Œï¼Œå‰å¾Œç«¯çš„ code
ä¹Ÿå¯ä»¥é€éé€™å€‹æ–‡ä»¶ç”¢ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;è€Œ gRPC ä¹Ÿæ˜¯æœ‰åŒæ¨£çš„æ¦‚å¿µåœ¨è£¡é ­ï¼ŒgRPC æ˜¯é€éå®šç¾©å¥½ Protobuf
æ–‡ä»¶ä¾†ç”¢ç”Ÿç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¼ƒå°‘äººçŸ¥é“ï¼ŒRestful API å…¶å¯¦ä¹Ÿæ˜¯å¯ä»¥é€™æ¨£åšçš„ï¼Œå³æ˜¯å®šç¾©å¥½ Open
APIï¼Œä¸¦é€éä¸Šè¿°&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;ä¾†ç”¢ç”Ÿç¨‹å¼ç¢¼ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/KI8pd9e.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/KI8pd9e.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;docs-tool-ä»‹ç´¹&#34;&gt;Docs tool ä»‹ç´¹
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/mermaid-js/mermaid&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mermaid-js&lt;/a&gt;:
æä¾›ç”¨ç°¡å–®çš„ Markdown ä¾†æ’°å¯«æµç¨‹åœ–çš„åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/hediet/vscode-drawio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;vscode-drawio&lt;/a&gt;:
å¯ä»¥è®“ vscode å¯ä»¥ç›´æ¥åœ¨&lt;code&gt;.jpg/.png&lt;/code&gt;ä¸­ç·¨è¼¯åœ–ç‰‡ä¸¦åŒæ­¥æ›´æ–°åœ¨
Markdown ä¸­&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;:
&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger&lt;/a&gt;æ˜¯ä¸€å€‹æ’°å¯« Open API
ä»‹é¢çš„æ–¹æ¡ˆï¼Œå¤§å®¶å¸¸å¸¸æ‹¿å®ƒä¾†æ’°å¯«ä»‹é¢ï¼Œä½†å…¶å¯¦ä»–ä¹Ÿå¯ä»¥é€éé€™äº›æ–‡ä»¶ä¾†ç”Ÿç”¢å‡º&lt;code&gt;ä¸åŒèªè¨€çš„Serverç«¯èˆ‡Clientç«¯&lt;/code&gt;ï¼Œå°æ–¼è¦ç¯„å¥½ä¸åŒåœ˜éšŠèªè¨€çš„æ¥å£å¾ˆæ–¹ä¾¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://insomnia.rest/products/designer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Insomnia
Designer&lt;/a&gt;: å¯ä»¥ç”¨ Open API ä¾†ç”¢ç”Ÿ Postman æ¸¬è©¦ç«¯é»çš„è»Ÿé«”ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é–‹å§‹ä¾†åŸºæ–¼&#34;&gt;é–‹å§‹ä¾†åŸºæ–¼
&lt;/h2&gt;&lt;p&gt;Digimon-Service ä¾†æ’°å¯«æ–‡ä»¶ï½&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY05&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Example
Github code åœ¨æ­¤&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/mtnMhIk.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/mtnMhIk.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;From Youtube: 2019 Bandai 20th
Anniversary Digimon Virtual Pet Unboxing &amp;amp; Review [4K
UHD]&lt;/p&gt;
&lt;p&gt;é‚„è¨˜å¾—å°æ™‚å€™ç©çš„æ•¸ç¢¼è‚²æˆæ©Ÿå—ï¼Ÿä¸€é–‹å§‹æœƒæœ‰ä¸€é¡†æ•¸ç¢¼è›‹ï¼Œæˆ‘å€‘è¦æ…¢æ…¢åŸ¹è‚²ä»–ï¼Œéš¨è‘—æ™‚é–“é€™é¡†æ•¸ç¢¼è›‹å°±æœƒå­µåŒ–å‡ºæ•¸ç¢¼ç¸ï¼Œä¸¦èˆ‡æˆ‘å€‘ä¸€èµ·æˆé•·ã€‚Digimon-Service
å¸Œæœ›å¯ä»¥æä¾›é€™äº›åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥åŸºæ–¼é€™äº›éœ€æ±‚ï¼Œæˆ‘å€‘é–‹å§‹æŠŠæ–‡ä»¶æ’°å¯«å‡ºä¾†ï½&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Digimon-Service çµæ§‹åœ– - ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/hediet/vscode-drawio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;vscode-drawio&lt;/a&gt;å®Œæˆ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qgvVX2C.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/qgvVX2C.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æä¾›çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æä¾›ä¸€å€‹æ•¸ç¢¼è›‹ï¼Œè®“ client ç«¯å¯ä»¥é ˜å–ã€‚&lt;/li&gt;
&lt;li&gt;æ•¸ç¢¼è›‹æœƒéš¨è‘—æ™‚é–“å­µåŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;å¯¦ä½œæˆ‘å€‘æ¡ç”¨ Restful APIï¼Œä»¥ä¸‹æ˜¯ API - ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://insomnia.rest/products/designer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Insomnia
Designer&lt;/a&gt;å®Œæˆ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# swagger.yamlopenapi: 3.0.1info:  title: Digimon Service API  description: æä¾›å­µåŒ–æ•¸ç¢¼è›‹èˆ‡åŸ¹è‚²ç­‰æ•¸ç¢¼å¯¶è²é¤Šæˆæœå‹™  version: 1.0.0servers:  - url: http://localhost:5000/api/v1paths:  /digimons:    post:      summary: ç”¢ç”Ÿæ•¸ç¢¼è›‹      description: ç”¢ç”Ÿä¸€é¡†æ•¸ç¢¼è›‹ï¼Œä¾›requestç«¯é¤Šæˆ      requestBody:        description: å®¢è£½æ•¸ç¢¼è›‹çš„è«‹æ±‚        required: true        content:          application/json:            schema:              $ref: &amp;#34;#/components/schemas/DigimonInfoRequest&amp;#34;      responses:        &amp;#34;200&amp;#34;:          description: æ•¸ç¢¼è›‹çš„è³‡è¨Š          content:            application/json:              schema:                $ref: &amp;#34;#/components/schemas/DigimonInfo&amp;#34;        &amp;#34;500&amp;#34;:          $ref: &amp;#34;#/components/responses/500InternalError&amp;#34;  /digimons/{digimonID}:    get:      summary: æŸ¥çœ‹æ•¸ç¢¼ç¸ç‹€æ…‹      parameters:        - in: path          name: digimonID          schema:            type: string          required: true          description: æ•¸ç¢¼è›‹çš„å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œæ ¼å¼ç‚ºuuid v4      responses:        &amp;#34;200&amp;#34;:          description: æ•¸ç¢¼è›‹çš„è³‡è¨Š          content:            application/json:              schema:                $ref: &amp;#34;#/components/schemas/DigimonInfo&amp;#34;        &amp;#34;500&amp;#34;:          $ref: &amp;#34;#/components/responses/500InternalError&amp;#34;  /digimons/{digimonID}:foster:    post:      summary: åŸ¹è‚²æ•¸ç¢¼ç¸      description: å°æ•¸ç¢¼ç¸é€²è¡ŒåŸ¹è‚²ï¼Œä»¥æ”¹å–„æ•¸ç¢¼ç¸çš„ç‹€æ…‹      parameters:        - in: path          name: digimonID          schema:            type: string          required: true          description: æ•¸ç¢¼è›‹çš„å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œæ ¼å¼ç‚ºuuid v4      requestBody:        description: åŸ¹è‚²çš„é£Ÿç‰©        required: true        content:          application/json:            schema:              $ref: &amp;#34;#/components/schemas/FosterRequest&amp;#34;      responses:        &amp;#34;200&amp;#34;:          description: åŸ¹è‚²å®Œç•¢å¾Œçš„æ•¸ç¢¼ç¸çš„è³‡è¨Š          content:            application/json:              schema:                $ref: &amp;#34;#/components/schemas/DigimonInfo&amp;#34;        &amp;#34;500&amp;#34;:          $ref: &amp;#34;#/components/responses/500InternalError&amp;#34;components:  schemas:    DigimonInfo:      type: object      properties:        id:          type: string          description: æ•¸ç¢¼è›‹çš„å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œæ ¼å¼ç‚ºuuid v4          example: 56e400bd-c98b-49b9-ad8c-0607800e026f        name:          type: string          description: æ•¸ç¢¼è›‹çš„åç¨±          example: Agumon        status:          type: string          description: æ•¸ç¢¼è›‹æ­¤æ™‚çš„ç‹€æ…‹          example: healthy    FosterRequest:      type: object      properties:        food:          type: object          description: åŸ¹è‚²æ‰€ä½¿ç”¨çš„é£Ÿç‰©          properties:            name:              type: string              description: é£Ÿç‰©åç¨±              example: apple    DigimonInfoRequest:      type: object      properties:        name:          type: string          description: æ•¸ç¢¼è›‹çš„åå­—      required:        - name      example:        name: Agumon    Error:      type: object      properties:        message:          type: string          description: éŒ¯èª¤è¨Šæ¯        code:          type: number          description: &amp;gt;            éŒ¯èª¤ä»£ç¢¼:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;             * &lt;span style=&#34;color:#ae81ff&#34;&gt;`3000` - Internal error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#f92672&#34;&gt;required:        - message        - code      example:        message&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Internal error. Parsing failed&amp;#34;&lt;/span&gt;        &lt;span style=&#34;color:#f92672&#34;&gt;code: 3000  responses:    500InternalError:      description: ä¼ºæœå™¨éŒ¯èª¤      content:        application/json:          schema:            $ref&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;#/components/schemas/Error&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://insomnia.rest/products/designer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Insomnia
Designer&lt;/a&gt;çš„è¨­è¨ˆä»‹é¢éå¸¸å‹å¥½ï¼Œä¸¦ä¸”ï¼ç•¶ä½ é»äº†ä¸Šæ–¹çš„&lt;code&gt;DEBUG&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/GZT8BZz.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/GZT8BZz.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä»–ç«Ÿäººç”¢ç”Ÿäº†æ¸¬è©¦ç«¯é»ï¼é€£ç«¯é»éƒ½ä¸ç”¨æ…¢æ…¢åŠ äº†ï¼Œå¤ªç¥å•¦ï½ï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/mmrEOXg.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/mmrEOXg.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è³‡æ–™åº«å¦‚ä¸‹ - ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/hediet/vscode-drawio&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;vscode-drawio&lt;/a&gt;å®Œæˆ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/TUI9Sr5.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/TUI9Sr5.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Digimons: ç´€éŒ„æ•¸ç¢¼ç¸ç‹€æ…‹&lt;/li&gt;
&lt;li&gt;Diets: ç´€éŒ„æ•¸ç¢¼ç¸é£²é£Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;æµç¨‹ä¸Šå¦‚ä¸‹ - ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/mermaid-js/mermaid&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mermaid-js&lt;/a&gt;å®Œæˆ:&lt;/p&gt;
&lt;p&gt;ç”¢ç”Ÿæ•¸ç¢¼è›‹&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIENsaWVudFxuICAgIHBhcnRpY2lwYW50IHMgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgZGIgYXMgUG9zdGdyZVNRTFxuICAgIGMtPj5zOiDkvb_nlKggQVBJIFBPU1QgYXBpL3YxL2RpZ2ltb25zXG4gICAgcy0-PnM6IOeUoueUn-aVuOeivOibi--8jOWNs-aYr0RpZ2ltb25zIHRhYmxl6ZyA6KaB55qE6LOH5paZXG4gICAgcy0-PmRiOiDlsIfmlbjnorzom4vlrZjpgLJEaWdpbW9ucyB0YWJsZVxuICAgIHMtLT4-Yzog5Zue5YKz5oiQ5YqfXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9fQ&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIENsaWVudFxuICAgIHBhcnRpY2lwYW50IHMgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgZGIgYXMgUG9zdGdyZVNRTFxuICAgIGMtPj5zOiDkvb_nlKggQVBJIFBPU1QgYXBpL3YxL2RpZ2ltb25zXG4gICAgcy0-PnM6IOeUoueUn-aVuOeivOibi&amp;ndash;8jOWNs-aYr0RpZ2ltb25zIHRhYmxl6ZyA6KaB55qE6LOH5paZXG4gICAgcy0-PmRiOiDlsIfmlbjnorzom4vlrZjpgLJEaWdpbW9ucyB0YWJsZVxuICAgIHMtLT4-Yzog5Zue5YKz5oiQ5YqfXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9fQ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åŸ¹è‚²æ•¸ç¢¼ç¸&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIENsaWVudFxuICAgIHBhcnRpY2lwYW50IHMgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgZGIgYXMgUG9zdGdyZVNRTFxuICAgIGMtPj5zOiDkvb_nlKggQVBJIFBPU1QgYXBpL3YxL2RpZ2ltb25zLzpkaWdpbW9uSUQvZm9zdGVyXG4gICAgcy0-PmRiOiDlsIdyZXF1ZXN055qEZGlldOizh-aWmeWtmOWFpURpZXRzIHRhYmxlXG4gICAgcy0-PmRiOiDmm7TmlrBEaWdpbW9uIHRhYmxl55qEc3RhdHVz6Iez5YGl5bq3XG4gICAgcy0tPj5jOiDlm57lgrPmiJDlip9cbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In19&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIENsaWVudFxuICAgIHBhcnRpY2lwYW50IHMgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgZGIgYXMgUG9zdGdyZVNRTFxuICAgIGMtPj5zOiDkvb_nlKggQVBJIFBPU1QgYXBpL3YxL2RpZ2ltb25zLzpkaWdpbW9uSUQvZm9zdGVyXG4gICAgcy0-PmRiOiDlsIdyZXF1ZXN055qEZGlldOizh-aWmeWtmOWFpURpZXRzIHRhYmxlXG4gICAgcy0-PmRiOiDmm7TmlrBEaWdpbW9uIHRhYmxl55qEc3RhdHVz6Iez5YGl5bq3XG4gICAgcy0tPj5jOiDlm57lgrPmiJDlip9cbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In19&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æ•¸ç¢¼ç¸&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIENsaWVudFxuICAgIHBhcnRpY2lwYW50IHMgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgZGIgYXMgUG9zdGdyZVNRTFxuICAgIGMtPj5zOiDkvb_nlKggQVBJIEdFVCBhcGkvdjEvZGlnaW1vbnMvOmRpZ2ltb25JRFxuICAgIHMtPj5kYjog5pKI5Y-WRGlnaW1vbiB0YWJsZeeahOaVuOeivOeNuOizh-aWmVxuICAgIHMtLT4-Yzog5Zue5YKz5pW456K854246LOH5paZXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9fQ&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIENsaWVudFxuICAgIHBhcnRpY2lwYW50IHMgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgZGIgYXMgUG9zdGdyZVNRTFxuICAgIGMtPj5zOiDkvb_nlKggQVBJIEdFVCBhcGkvdjEvZGlnaW1vbnMvOmRpZ2ltb25JRFxuICAgIHMtPj5kYjog5pKI5Y-WRGlnaW1vbiB0YWJsZeeahOaVuOeivOeNuOizh-aWmVxuICAgIHMtLT4-Yzog5Zue5YKz5pW456K854246LOH5paZXG4iLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9fQ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç¸½çµ&#34;&gt;ç¸½çµ
&lt;/h2&gt;&lt;p&gt;æœ‰äº†é€™äº›ä¾¿æ·çš„å·¥å…·å¾Œï¼Œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ–‡ä»¶å°±ä¸æ˜¯å€‹å¾ˆèŠ±è²»æ™‚é–“åˆé‡å·¥çš„äº‹æƒ…äº†ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨åœ¨é–‹ç™¼ä¸Šçš„å¥½å¹«æ‰‹ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¥ä¸‹ä¾†è¦ä»‹ç´¹å¦‚ä½•é€é&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;ç”Ÿç”¢å‡º
Golang Server çš„ä»‹é¢ä¸¦ä¸”é€é Clean Architecture ä¾†å¯¦ä½œï¼Œä¸¦é€é&lt;a class=&#34;link&#34; href=&#34;https://insomnia.rest/products/designer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Insomnia
Designer&lt;/a&gt;æ¸¬è©¦&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï¼Œä¹Ÿæ­¡è¿åˆ†äº«è¨è«–æŒ‡æ­£ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.youtube.com/watch?v=FuzMB5y8rOw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;2019 Bandai
20th Anniversary Digimon Virtual Pet Unboxing &amp;amp; Review [4K
UHD]&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BB%8A%E6%99%9A%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E-golang-server-%E5%8A%A0-postgresql---docker-compos-f887430364af4816b02fa12608526316/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BB%8A%E6%99%9A%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E-golang-server-%E5%8A%A0-postgresql---docker-compos-f887430364af4816b02fa12608526316/</guid>
        <description>&lt;h1 id=&#34;ä»Šæ™šæˆ‘æƒ³ä¾†é»-golang-server-åŠ -postgresql---docker-compose-ç¯‡&#34;&gt;ä»Šæ™šï¼Œæˆ‘æƒ³ä¾†é» Golang Server åŠ  PostgreSQL - Docker-Compose ç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 18, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY04&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day4-%E4%BB%8A%E6%99%9A-%E6%88%91%E6%83%B3%E4%BE%86%E9%BB%9E-golang-server-%E5%8A%A0-postgresql-docker-compose-%E7%AF%87-21f8cb625ed&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10239305&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY03&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY03&lt;/a&gt;Docker
çš„ä»‹ç´¹å¾Œï¼Œæ¥ä¸‹ä¾†è¦ä»‹ç´¹å¦‚ä½• Docker-Compose ä¾†ç®¡ç†å¤šå€‹ç’°å¢ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç‚ºä½•éœ€è¦-docker-compose-&#34;&gt;ç‚ºä½•éœ€è¦ Docker-Compose ?
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DWOgVSr.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/DWOgVSr.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é‚„è¨˜å¾—æ˜¨å¤©çš„ Service æ¶æ§‹åœ–å—ï¼Ÿè£¡é ­é™¤äº† PostgreSQL ä»¥å¤–é‚„æœ‰ Golang
Serverï¼Œæˆ‘å€‘ä¸€æ¨£å¯ä»¥é€é Docker ä¾†å° Golang Server
çš„ç’°å¢ƒåšå°è£ï¼Œä»¥æä¾›æ‰€æœ‰çš„é–‹ç™¼äººå“¡éƒ½åœ¨åŒä¸€å€‹ç’°å¢ƒé–‹ç™¼ã€‚&lt;/p&gt;
&lt;p&gt;è€Œç•¶æœ‰ä¸€å † Docker æ™‚ï¼Œæˆ‘å€‘å¸Œæœ›æœ‰å€‹æ–¹æ³•å¯ä»¥æŠŠ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker
çš„å•Ÿå‹•æ–¹æ³•ã€ç’°å¢ƒè®Šæ•¸ã€å®¹å™¨é–“çš„é—œä¿‚å¯«æˆæˆé…ç½®æ–‡ä»¶ï¼Œä¸¦åˆ©ç”¨æ­¤æ–‡ä»¶ç°¡å–®çš„å•Ÿå‹•æ‰€æœ‰å®¹å™¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€™æ™‚ Docker-Compose å°±å‡ºé¦¬äº†ï¼&lt;/p&gt;
&lt;h2 id=&#34;çµ±ä¸€-golang-ç’°å¢ƒçš„å¥½è™•&#34;&gt;çµ±ä¸€ Golang ç’°å¢ƒçš„å¥½è™•
&lt;/h2&gt;&lt;p&gt;å¯ä»¥é¿å…ä¸åŒäººå“¡è£äº†ä¸åŒç‰ˆæœ¬çš„
Golangï¼Œå°è‡´ç¨‹å¼é‹è¡Œç‹€æ³æœ‰æ‰€å·®ç•°çš„å•é¡Œã€‚ä¸åŒé–‹ç™¼äººå“¡ä¹Ÿä¸ç”¨ç‚ºäº†è¦å®‰è£ç›¸åŒçš„
Golang è€Œé£½å—&lt;code&gt;æ›´æ–°&lt;/code&gt;ã€&lt;code&gt;é™ç‰ˆ&lt;/code&gt;åœ°ç„ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯èƒ½æœƒå•ï¼Œä»€éº¼æ™‚å€™æœƒéœ€è¦é€™éº¼å¤šç‰ˆæœ¬çš„ Golangï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ç•¶ç®¡ç†ä¸€å †å°ˆæ¡ˆæ™‚ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥å‰æˆ‘ç®¡ç†ä¸€å † Python å°ˆæ¡ˆæ™‚ï¼ŒPython2 è·Ÿ Python3
çš„æ­·å²æ·µæºå°è‡´å¥—ä»¶ç‰ˆæœ¬ç›¸ä¾å•é¡Œéå¸¸åš´é‡ï¼Œå°è‡´æˆ‘èˆ‡å¤¥ä¼´å€‘æ˜¯&lt;code&gt;ä¸‰å¤©ä¸€å°äº‚ï¼Œäº”å¤©ç›´æ¥é‡çŒ&lt;/code&gt;ï¼Œè€Œå¾Œä¾†æ”¹ç”¨
Docker ä¹‹å¾Œé€™å€‹å•é¡Œå°±å®Œç¾çš„è§£æ±ºäº†ã€‚&lt;/p&gt;
&lt;p&gt;é›–ç„¶ Golang
ç›®å‰ç‰ˆæœ¬å·®ç•°ä¸å¤§æ‡‰è©²ä¸å¤ªæœƒæœ‰å¤§å•é¡Œï¼Œä½†æœªä¾†æ€éº¼æ¨£èª°çŸ¥é“å‘¢ï¼Ÿä½ é‚„æ˜¯å¯ä»¥è©¦çœ‹çœ‹é€™å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£-docker-compose&#34;&gt;å®‰è£ Docker-Compose
&lt;/h2&gt;&lt;p&gt;åœ¨å®˜ç¶²ä¸Šéƒ½æœ‰æŠŠå®‰è£çš„&lt;a class=&#34;link&#34; href=&#34;https://docs.docker.com/compose/install/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ•™å­¸&lt;/a&gt;å¯«å¾—å¾ˆæ¸…æ¥šäº†ï¼Œé€™ç¯‡æ–‡ç« å°±é—œæ³¨å¯¦ä½œè€Œä¸æ˜¯å®‰è£äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;docker-compose-æª”æ¡ˆé…ç½®example&#34;&gt;Docker-Compose æª”æ¡ˆé…ç½®([Example
&lt;/h2&gt;&lt;p&gt;code](&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY04&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY04&lt;/a&gt;))&lt;/p&gt;
&lt;p&gt;è£½ä½œ Golang Server çš„ &lt;code&gt;Dockerfile&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# Golang Server&amp;#39;s DockerfileFROM golang:1.14.6-alpine
RUN apk add --no-cache git
RUN go get github.com/lib/pq
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;FROM golang:1.14.6-alpine&lt;/code&gt;: é¸ç”¨ Golang ç’°å¢ƒçš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RUN apk add --no-cache git&lt;/code&gt;: å› ç‚º Golang ä¸‹è¼‰æ¨¡çµ„éœ€è¦
Gitï¼Œæˆ‘å€‘é€é apk ä¾†å®‰è£&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RUN go get github.com/lib/pq&lt;/code&gt;: å®‰è£ Golang é€£ç·š
PostgreSQL çš„æ¨¡çµ„&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è£½ä½œ&lt;code&gt;docker-compose.yaml&lt;/code&gt;æª”ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;version&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;3.5&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;services:  server:    build:      context: ./docker/golang      dockerfile: Dockerfile    working_dir: /server    volumes:      - .:/server    ports&lt;/span&gt;:      - &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5000:5000&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;depends_on:      - db    entrypoint: go run main.go    restart: always  db:    image: postgres:12.4-alpine    ports&lt;/span&gt;:      - &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;5432:5432&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#f92672&#34;&gt;environment:      - POSTGRES_USER=user      - POSTGRES_PASSWORD=mysecretpassword      - PGDATA=/var/lib/postgresql/data/pgdata    restart&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;always&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;version: &amp;quot;3.5&amp;quot;&lt;/code&gt;: é¸å®š docker-compose
çš„ç‰ˆæœ¬ï¼Œæ¯å€‹ç‰ˆæœ¬æä¾›çš„ API æ–¹æ³•æœ‰æ‰€å·®ç•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;services&lt;/code&gt;:
æ­¤æ¬„ä½åº•ä¸‹æœƒæœ‰æ‰€æœ‰çš„å®¹å™¨ï¼Œä»¥ä¸‹åˆ†åˆ¥æœ‰&lt;code&gt;server&lt;/code&gt;èˆ‡&lt;code&gt;db&lt;/code&gt;å…©å€‹
å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;build&lt;/code&gt;: èªªæ˜æ­¤å®¹å™¨è¦ä½¿ç”¨ç‰¹å®š Dockerfile ä¾†
buildï¼Œ&lt;code&gt;context&lt;/code&gt;ç‚ºæª”æ¡ˆç›®éŒ„ï¼Œ&lt;code&gt;dockerfile&lt;/code&gt;ç‚º
Dockerfile çš„åå­—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;working_dir&lt;/code&gt;: æŒ‡å®š docker
å•Ÿå‹•æ™‚æ‰€åœ¨çš„ç›®éŒ„ï¼Œå¦‚æœç›®éŒ„ä¸å­˜åœ¨æœƒè‡ªå‹•å‰µå»ºä¸€å€‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;volumes&lt;/code&gt;: å°‡æœ¬æ©Ÿæª”æ¡ˆæ›è¼‰è‡³ docker å…§éƒ¨ï¼Œæœ¬æ©Ÿæª”æ¡ˆæ›´æ–°æ™‚
docker å…§éƒ¨çš„æ›è¼‰æª”æ¡ˆä¹Ÿæœƒæ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ports&lt;/code&gt;: å°‡æœ¬æ©Ÿçš„ port åš mapping èˆ‡ docker å…§éƒ¨çš„
poartã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;depends_on&lt;/code&gt;: èªªæ˜ a å®¹å™¨èˆ‡ b å®¹å™¨æœ‰ç›¸é—œï¼Œæœƒç­‰åˆ° b
å®¹å™¨å•Ÿå‹•å®Œç•¢å¾Œï¼Œå†å•Ÿå‹• a å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;entrypoint&lt;/code&gt;: æŒ‡å®š docker å•Ÿå‹•æ™‚çš„é è¨­æŒ‡ä»¤ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;restart&lt;/code&gt;: ç•¶å®¹å™¨ä¸æ­£å¸¸é—œé–‰æ™‚ï¼Œæœƒé‡æ–°å•Ÿå‹•å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;image&lt;/code&gt;: å¦‚æœä¸ä½¿ç”¨ Dockerfile ä¾†å»ºç«‹å®¹å™¨ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨
docker image ä¾†å•Ÿå‹•å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;environment&lt;/code&gt;: æŒ‡å®šå®¹å™¨å…§çš„ç’°å¢ƒè®Šæ•¸ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°&lt;code&gt;docker-compose.yaml&lt;/code&gt;å¾ˆæ–¹ä¾¿ï¼ŒæŠŠæ˜¨å¤©æ–‡ç« ä¸­è¦è¼¸å…¥çš„&lt;code&gt;environment&lt;/code&gt;è®Šæ•¸éƒ½è®Šæˆäº†è¨­å®šæª”ã€‚&lt;/p&gt;
&lt;p&gt;é€é&lt;code&gt;working_dir&lt;/code&gt;é…åˆ&lt;code&gt;volumes&lt;/code&gt;æˆ‘å€‘å¯ä»¥æŠŠç•¶ä¸‹ç›®éŒ„(å³æ˜¯&lt;code&gt;.&lt;/code&gt;ç›®éŒ„)çš„æª”æ¡ˆæ›è¼‰è‡³
docker ä¸­ï¼Œé€™å¯ä»¥ä½¿æˆ‘å€‘é–‹ç™¼äº†ç¨‹å¼ç¢¼å¾Œï¼Œå³åŒæ­¥åœ¨ docker
å…§éƒ¨ï¼Œä½¿é–‹ç™¼æ›´å¿«é€Ÿã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;entrypoint&lt;/code&gt;ä¸­æŒ‡å®šäº†&lt;code&gt;go run main.go&lt;/code&gt;ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿå¿…é ˆå‰µå»ºä¸€å€‹&lt;code&gt;main.go&lt;/code&gt;æª”ï¼Œæ‰æœƒè®“
docker å•Ÿå‹•æ™‚æœ‰æª”æ¡ˆåŸ·è¡Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// main.gopackage main
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;database/sql&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;fmt&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;log&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/lib/pq&amp;#34;&lt;/span&gt;)&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; (  &lt;span style=&#34;color:#75715e&#34;&gt;// æŒ‡å®šè¦é€£æ¥çš„DBä½ç½®    HOST     = &amp;#34;db&amp;#34;    DATABASE = &amp;#34;postgres&amp;#34;    USER     = &amp;#34;user&amp;#34;    PASSWORD = &amp;#34;mysecretpassword&amp;#34;)func main() {  // é€£æ¥DB    db, err := sql.Open(        &amp;#34;postgres&amp;#34;,        fmt.Sprintf(&amp;#34;host=%s user=%s password=%s dbname=%s sslmode=disable&amp;#34;, HOST, USER, PASSWORD, DATABASE),    )    if err != nil {        panic(err)    }  // æª¢æŸ¥é€£æ¥æ˜¯å¦æˆåŠŸ    if err = db.Ping(); err != nil {        panic(err)    }    fmt.Println(&amp;#34;Successfully created connection to database&amp;#34;)  // å•Ÿå‹•ä¸€å€‹ç°¡å–®çš„http server    http.HandleFunc(&amp;#34;/&amp;#34;, func(w http.ResponseWriter, r *http.Request) {        fmt.Fprintf(w, &amp;#34;Hello World!!&amp;#34;)    })    log.Fatal(http.ListenAndServe(&amp;#34;:5000&amp;#34;, nil))}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨&lt;code&gt;æŒ‡å®šè¦é€£æ¥çš„DBä½ç½®&lt;/code&gt;é€™å¹¾è¡Œä¸­ï¼Œ&lt;code&gt;HOST&lt;/code&gt;ç‚º docker
å®¹å™¨çš„åç¨±ï¼Œé€™é‚Šè¦æ³¨æ„ä¸€ä¸‹ä¸¦ä¸æ˜¯ä½¿ç”¨ä»€éº¼&lt;code&gt;localhost&lt;/code&gt;ä¾†é€£æ¥ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç”¨
Docker-Compose æ™‚é€™é‚Šå¡äº†å¾ˆä¹…
XDï¼Œè€Œå…¶ä»–çš„æ¬„ä½å°±æ˜¯&lt;code&gt;docker-compose.yaml&lt;/code&gt;ä¸­&lt;code&gt;db&lt;/code&gt;è£¡è¨­ç½®çš„&lt;code&gt;environment&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å•Ÿå‹•-docker-compose&#34;&gt;å•Ÿå‹• Docker-Compose
&lt;/h2&gt;&lt;p&gt;å°‡ docker å…§éƒ¨éœ€è¦ build çš„å®¹å™¨éƒ½ build&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker-compose up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;build å®Œç•¢å¾Œå•Ÿå‹•&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker-compose up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/N0mREyT.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/N0mREyT.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ç•¶ä½ çœ‹åˆ°&lt;code&gt;Successfully created connection to database&lt;/code&gt;å­—ä¸²æ™‚å°±ä»£è¡¨æˆåŠŸå•¦ï½&lt;/p&gt;
&lt;p&gt;æœ‰äº†å¥½ç’°å¢ƒå¾Œå°±å¯ä»¥é–‹å§‹é–‹ç™¼å›‰ï¼Œæ¥ä¸‹ä¾†ä¸‹ç¯‡è¦ä»‹ç´¹å¦‚ä½•é€éå„å¼å„æ¨£çš„ Docs
tool ä¾†å¹«åŠ©æˆ‘å€‘é–‹ç™¼æ›´é †æš¢ï¼&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï¼Œä¹Ÿæ­¡è¿åˆ†äº«è¨è«–æŒ‡æ­£ï½&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BB%A5-grpc-%E5%AF%A6%E4%BD%9C%E5%85%A9%E5%80%8B%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9A%84%E6%BA%9D%E9%80%9A-25fda3d225ed406992178770c4660311/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BB%A5-grpc-%E5%AF%A6%E4%BD%9C%E5%85%A9%E5%80%8B%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9A%84%E6%BA%9D%E9%80%9A-25fda3d225ed406992178770c4660311/</guid>
        <description>&lt;h1 id=&#34;ä»¥-grpc-å¯¦ä½œå…©å€‹å¾®æœå‹™çš„æºé€š&#34;&gt;ä»¥ gRPC å¯¦ä½œå…©å€‹å¾®æœå‹™çš„æºé€š
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 28, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY14&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day14-%E4%BB%A5-grpc-%E5%AF%A6%E4%BD%9C%E5%85%A9%E5%80%8B%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9A%84%E6%BA%9D%E9%80%9A-283968a42d0a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10245943&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œåœ¨è¬›è§£å®Œ gRPC
çš„æ¦‚å¿µèˆ‡ä½¿ç”¨å¾Œï¼Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å¯¦éš›å¾®æœå‹™æºé€šçš„å¯¦ä½œï¼Œé‚„è¨˜å¾—&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY07&lt;/a&gt;ç²å¾—æ•¸ç¢¼ç¸çš„
Digimon-Service å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹ä¾†è¦å†è¨­è¨ˆä¸€å€‹&lt;code&gt;å°ˆé–€æ‹¿å–å¤©æ°£&lt;/code&gt;çš„
Weather-Serviceï¼Œä¸¦ä»¥é›™å‘ä¸²æµæä¾›ç‰¹å®š&lt;code&gt;ä½ç½®A&lt;/code&gt;çš„å¤©æ°£ã€‚æˆ‘å€‘å‡å®šæ•¸ç¢¼ç¸éƒ½åœ¨&lt;code&gt;ä½ç½®A&lt;/code&gt;ï¼Œé€éèˆ‡
Weather-Service æºé€šæˆ‘å€‘å¯ä»¥ç²å¾—æ•¸ç¢¼ç¸æ‰€åœ¨ä½ç½®çš„å¤©æ°£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/nt0oZrI.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/nt0oZrI.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¯¦éš›é‹ä½œ&#34;&gt;å¯¦éš›é‹ä½œ
&lt;/h2&gt;&lt;p&gt;gRPC schemas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY14/schemas/digimon/schema.proto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC.Digimon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY14/schemas/weather/schema.proto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC.Weather&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹æµç¨‹å¯ä»¥èˆ‡ä¸Šæ–¹ schema åšå°ç…§ï¼Œæœƒæ¯”è¼ƒæ¸…æ¥šï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIGNsaWVudFxuICAgIHBhcnRpY2lwYW50IGQgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgdyBhcyBXZWF0aGVyLVNlcnZpY2VcbiAgICBjLT4-ZDogZ1JQQy5EaWdpbW9uLkNyZWF0ZTxicj7libXlu7rmlbjnorznjbhcbiAgICBkLS0-PmM6IOWbnuWCs-aVuOeivOeNuOizh-ioilxuICAgIGxvb3AgU2VydmVyLVN0cmVhbeS4sua1gVxuICAgICAgYy0-PmQ6IGdSUEMuRGlnaW1vbi5RdWVyeVN0cmVhbTxicj7ku6XmlbjnorznjbhJROaSiOWPluaVuOeivOeNuOizh-ioilxuICAgICAgbG9vcCDpm5nlkJHkuLLmtYFcbiAgICAgICAgZC0-Pnc6IGdSUEMuV2VhdGhlci5RdWVyeTxicj7mkojlj5bmraTmlbjnorznjbgn5L2N572uQSfnmoTlpKnmsKNcbiAgICAgICAgdy0tPj5kOiDlm57lgrPlpKnmsKNcbiAgICAgIGVuZFxuICAgICAgZC0tPj5jOiDlm57lgrPmlbjnorznjbjnmoTos4foqIroiIflpKnmsKNcbiAgICBlbmRcbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In19&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cbiAgICBwYXJ0aWNpcGFudCBjIGFzIGNsaWVudFxuICAgIHBhcnRpY2lwYW50IGQgYXMgRGlnaW1vbi1TZXJ2aWNlXG4gICAgcGFydGljaXBhbnQgdyBhcyBXZWF0aGVyLVNlcnZpY2VcbiAgICBjLT4-ZDogZ1JQQy5EaWdpbW9uLkNyZWF0ZTxicj7libXlu7rmlbjnorznjbhcbiAgICBkLS0-PmM6IOWbnuWCs-aVuOeivOeNuOizh-ioilxuICAgIGxvb3AgU2VydmVyLVN0cmVhbeS4sua1gVxuICAgICAgYy0-PmQ6IGdSUEMuRGlnaW1vbi5RdWVyeVN0cmVhbTxicj7ku6XmlbjnorznjbhJROaSiOWPluaVuOeivOeNuOizh-ioilxuICAgICAgbG9vcCDpm5nlkJHkuLLmtYFcbiAgICAgICAgZC0-Pnc6IGdSUEMuV2VhdGhlci5RdWVyeTxicj7mkojlj5bmraTmlbjnorznjbgn5L2N572uQSfnmoTlpKnmsKNcbiAgICAgICAgdy0tPj5kOiDlm57lgrPlpKnmsKNcbiAgICAgIGVuZFxuICAgICAgZC0tPj5jOiDlm57lgrPmlbjnorznjbjnmoTos4foqIroiIflpKnmsKNcbiAgICBlbmRcbiIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In19&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¦ç‰¹åˆ¥æ³¨æ„çš„æ˜¯ï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY14/schemas/digimon/schema.proto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC.Digimon&lt;/a&gt;çš„&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rpc QueryStream (QueryRequest) returns (stream QueryResponse) {}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç‚º Server-Streamï¼Œé€™ä»£è¡¨ Client ç«¯å¯ä»¥è«‹æ±‚ä¸€æ¬¡ä¹‹å¾Œå°±æŒçºŒæ”¶åˆ° Server
çš„ Responsesã€‚&lt;/p&gt;
&lt;p&gt;è€Œ&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY14/schemas/weather/schema.proto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC.Weather&lt;/a&gt;çš„&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rpc Query (stream QueryRequest) returns (stream QueryResponse) {}&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç‚ºé›™å‘ä¸²æµï¼Œé€™ä»£è¡¨ Digimon-Service å¯ä»¥ä¸€ç›´è¦æ±‚ä¸åŒçš„ä½ç½®ï¼Œè€Œ
Weather-Service
æœƒæŠŠä¸åŒçš„ä½ç½®ä¾ä¾å›å‚³ï¼Œä¸¦ä¸”&lt;code&gt;ä¸æœƒæ–·ç·š&lt;/code&gt;ï¼Œé›™æ–¹ä¸€ç›´æ˜¯é•·é€£ç·šã€‚&lt;/p&gt;
&lt;p&gt;(ä¸éä½ç½®ç›®å‰åªæœ‰&lt;code&gt;ä½ç½®A&lt;/code&gt;ï¼Œæ²’æœ‰å¯¦ä½œå…¶ä»–ä½ç½®ï¼Œå› ç‚ºæ²’æ™‚é–“
XD)&lt;/p&gt;
&lt;h2 id=&#34;å…ˆ-run-èµ·ä¾†å†èªª&#34;&gt;å…ˆ run èµ·ä¾†å†èªª
&lt;/h2&gt;&lt;p&gt;å…ˆ run èµ·ä¾†å¯èƒ½æœƒæ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œè«‹ clone &lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github-Example-Code&lt;/a&gt;ï¼Œä¸¦å°‡
Server run èµ·ä¾†ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cd DAY14
$ docker-compose up
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ test
è³‡æ–™å¤¾çš„&lt;code&gt;grpc.go&lt;/code&gt;ä¾†å‰µå»ºæ•¸ç¢¼ç¸ä¸¦ä½¿ç”¨&lt;code&gt;gRPC.Digimon.QueryStream&lt;/code&gt;æ’ˆå–è³‡æ–™ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cd go-server/test
$ go run grpc.go
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ç²å–äº† 4 æ¬¡è³‡æ–™ï¼Œä¸¦ä¸”å¤©æ°£æœƒéš¨è‘—æ™‚é–“æœ‰æ‰€è®ŠåŒ–ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/qchlU5X.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/qchlU5X.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;weather-service-è¬›è§£&#34;&gt;Weather-Service è¬›è§£
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/b1cwX1p.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/b1cwX1p.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸€æ¨£ä½¿ç”¨ Clean Architecture ä¾†è¨­è¨ˆï¼Œè€Œåœ¨ repository
å±¤æ²’æœ‰çœŸçš„æ¥ä¸Šå¤©æ°£ç›¸é—œçš„ APIï¼Œå–®ç´”ä»¥ random çš„å½¢å¼å›å‚³å¤©æ°£ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// Query ...
func (w *WeatherHandler) Query(srv pb.Weather_QueryServer) error {
    for {
        msg, err := srv.Recv()
        if err == io.EOF {
            return nil
        }
        if err != nil {
            logrus.Error(err)
            return err
        }

        aWeather, err := w.WeatherUsecase.GetByLocation(context.Background(), msg.GetLocation())
        if err != nil {
            logrus.Error(err)
        }

        gRPCWriterEnum, err := mappingGRPCWeatherEnum(aWeather.Weather)
        if err != nil {
            logrus.Error(err)
        }

        srv.Send(&amp;amp;pb.QueryResponse{
            Location: aWeather.Location,
            Weather:  gRPCWriterEnum,
        })
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ¯”è¼ƒè¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œç”±æ–¼&lt;code&gt;gRPC.Weather.Query&lt;/code&gt;æ˜¯é›™å‘ä¸²æµï¼Œæ‰€ä»¥å¯¦ä½œä¸Šè¦é€é&lt;code&gt;for{}&lt;/code&gt;ä¾†æ¨¡æ“¬&lt;code&gt;while&lt;/code&gt;è¿´åœˆçš„æ©Ÿåˆ¶ä¾†æƒæ&lt;code&gt;srv.Recv()&lt;/code&gt;æ˜¯å¦æœ‰æ–°è¨Šæ¯å‚³å…¥ï¼Œè™•ç†å®Œå‚³å…¥è¨Šæ¯å¾Œå†é€é&lt;code&gt;srv.Send()&lt;/code&gt;å›å‚³çµ¦
client ç«¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;digimon-service-è¬›è§£&#34;&gt;Digimon-Service è¬›è§£
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/0hOE03k.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/0hOE03k.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ Digimon-Service æ–°å¢äº†ä¸€å€‹ weather
è³‡æ–™å¤¾ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±æ–¼å¤©æ°£çš„ä¾†æºæ˜¯ gRPCï¼Œæ‰€ä»¥æˆ‘åœ¨ repository
å±¤æ–°å¢äº† &lt;code&gt;grpc.go&lt;/code&gt;ï¼Œé€™æ˜¯æˆ‘è¦ºå¾—æ¯”è¼ƒåˆç†çš„å¯¦ä½œï¼Œè€Œåœ¨æ­¤å±¤æˆ‘å°‡
gRPC çš„&lt;code&gt;Weather_QueryServer&lt;/code&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type Weather_QueryServer interface {
    Send(*QueryResponse) error
    Recv() (*QueryRequest, error)
    grpc.ServerStream
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è½‰æ›æˆ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;type StreamWeather interface {
    Send(*Weather) error
    Recv() (*Weather, error)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¿å… usecase
å±¤å¯¦éš›ä¾è³´&lt;code&gt;QueryResponse&lt;/code&gt;èˆ‡&lt;code&gt;QueryRequest&lt;/code&gt;ï¼Œä»¥é”åˆ°ä¾è³´åè½‰(DI)ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è€Œåœ¨ QueryStream çš„ delivery
å¯¦ä½œä¸Šï¼Œä»¥&lt;code&gt;ä½ç½®A&lt;/code&gt;è®“&lt;code&gt;WeatherUsecase&lt;/code&gt;ç”¢ç”Ÿ&lt;code&gt;weatherClient&lt;/code&gt;ï¼Œæ¯
5 ç§’æ’ˆå–ä¸€æ¬¡å¤©æ°£ï¼Œä¸¦èˆ‡æ•¸ç¢¼ç¸çš„è³‡è¨Šä¸€èµ·ä»¥&lt;code&gt;srv.Send()&lt;/code&gt;å›å‚³çµ¦
client ç«¯&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// QueryStream ...
func (d *DigimonHandler) QueryStream(req *pb.QueryRequest, srv pb.Digimon_QueryStreamServer) error {
    weatherClient, err := d.WeatherUsecase.GetStreamByLocation(context.Background(), &amp;#34;A&amp;#34;)
    if err != nil {
        logrus.Error(err)
        return err
    }

    for {
        if err := weatherClient.Send(&amp;amp;domain.Weather{
            Location: &amp;#34;A&amp;#34;,
        }); err != nil {
            logrus.Error(err)
            return err
        }

        time.Sleep(time.Duration(5) * time.Second)

        aWeather, err := weatherClient.Recv()
        if err != nil {
            logrus.Error(err)
            return err
        }

        aDigimon, err := d.DigimonUsecase.GetByID(context.Background(), req.GetId())
        if err != nil {
            logrus.Error(err)
            return err
        }

        srv.Send(&amp;amp;pb.QueryResponse{
            Id:       aDigimon.ID,
            Name:     aDigimon.Name,
            Status:   aDigimon.Status,
            Location: aWeather.Location,
            Weather:  aWeather.Weather,
        })
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BB%A5-grpc-web-%E5%AF%A6%E4%BD%9C%E5%89%8D%E7%AB%AF%E8%88%87%E5%BE%8C%E7%AB%AF%E7%9A%84%E6%BA%9D%E9%80%9A-19d06781c2744372963ad98f9c556507/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BB%A5-grpc-web-%E5%AF%A6%E4%BD%9C%E5%89%8D%E7%AB%AF%E8%88%87%E5%BE%8C%E7%AB%AF%E7%9A%84%E6%BA%9D%E9%80%9A-19d06781c2744372963ad98f9c556507/</guid>
        <description>&lt;h1 id=&#34;ä»¥-grpc-web-å¯¦ä½œå‰ç«¯èˆ‡å¾Œç«¯çš„æºé€š&#34;&gt;ä»¥ gRPC-Web å¯¦ä½œå‰ç«¯èˆ‡å¾Œç«¯çš„æºé€š
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 29, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY15&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Medium&lt;/li&gt;
&lt;li&gt;iT é‚¦å¹«å¿™&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œå¯¦ä½œå®Œå¾®æœå‹™çš„æºé€šå¾Œï¼Œæ¥ä¸‹ä¾†è¦ä¾†å¯¦ä½œå‰ç«¯èˆ‡å¾Œç«¯çš„ gRPC-Web
éƒ¨åˆ†ï¼Œæ•´é«”çš„æœå‹™çµ‚æ–¼æœ‰é»å¾®æœå‹™çš„æ¨£å­äº† XD&lt;/p&gt;
&lt;p&gt;æ•´é«”æ¶æ§‹å¦‚ä¸‹ï¼Œé™¤äº†å¤–éƒ¨çš„&lt;code&gt;Web&lt;/code&gt;å‰ç«¯ä»¥å¤–ï¼Œé‚„éœ€è¦&lt;code&gt;Envoy&lt;/code&gt;ä¾†è½‰æ›
HTTP1.1 è‡³ HTTP2(è©³ç´°åŸå› åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/tree/master/DAY11&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY11&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LpNiBo4.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/LpNiBo4.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¯¦éš›é‹ä½œ&#34;&gt;å¯¦éš›é‹ä½œ
&lt;/h2&gt;&lt;p&gt;gRPC schemas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY15/schemas/digimon/schema.proto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC.Digimon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY15/schemas/weather/schema.proto&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC.Weather&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹æµç¨‹å¯ä»¥èˆ‡ä¸Šæ–¹ schema åšå°ç…§ï¼Œæœƒæ¯”è¼ƒæ¸…æ¥šï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cblx0XHRwYXJ0aWNpcGFudCBjIGFzIFdlYlxuXHRcdHBhcnRpY2lwYW50IGUgYXMgRW52b3lcbiAgICBwYXJ0aWNpcGFudCBkIGFzIERpZ2ltb24tU2VydmljZVxuICAgIHBhcnRpY2lwYW50IHcgYXMgV2VhdGhlci1TZXJ2aWNlXG4gICAgYy0-PmU6IGdSUEMuRGlnaW1vbi5DcmVhdGU8YnI-5Ym15bu65pW456K85424XG5cdFx0ZS0-PmQ6IOi9ieeZvFxuXHRcdGQtLT4-ZTog6L2J55m8XG4gICAgZS0tPj5jOiDlm57lgrPmlbjnorznjbjos4foqIpcbiAgICBsb29wIFNlcnZlci1TdHJlYW3kuLLmtYFcbiAgICAgIGMtPj5lOiBnUlBDLkRpZ2ltb24uUXVlcnlTdHJlYW08YnI-5Lul5pW456K85424SUTmkojlj5bmlbjnorznjbjos4foqIpcblx0XHRcdGUtPj5kOiDovYnnmbxcbiAgICAgIGxvb3Ag6ZuZ5ZCR5Liy5rWBXG4gICAgICAgIGQtPj53OiBnUlBDLldlYXRoZXIuUXVlcnk8YnI-5pKI5Y-W5q2k5pW456K85424J-S9jee9rkEn55qE5aSp5rCjXG4gICAgICAgIHctLT4-ZDog5Zue5YKz5aSp5rCjXG4gICAgICBlbmRcbiAgICAgIGQtLT4-ZTog5Zue5YKz5pW456K8542455qE6LOH6KiK6IiH5aSp5rCjXG5cdFx0XHRlLS0-PmM6IOi9ieeZvFxuICAgIGVuZFxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifX0&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mermaid.ink/img/eyJjb2RlIjoiXG5zZXF1ZW5jZURpYWdyYW1cblx0XHRwYXJ0aWNpcGFudCBjIGFzIFdlYlxuXHRcdHBhcnRpY2lwYW50IGUgYXMgRW52b3lcbiAgICBwYXJ0aWNpcGFudCBkIGFzIERpZ2ltb24tU2VydmljZVxuICAgIHBhcnRpY2lwYW50IHcgYXMgV2VhdGhlci1TZXJ2aWNlXG4gICAgYy0-PmU6IGdSUEMuRGlnaW1vbi5DcmVhdGU8YnI-5Ym15bu65pW456K85424XG5cdFx0ZS0-PmQ6IOi9ieeZvFxuXHRcdGQtLT4-ZTog6L2J55m8XG4gICAgZS0tPj5jOiDlm57lgrPmlbjnorznjbjos4foqIpcbiAgICBsb29wIFNlcnZlci1TdHJlYW3kuLLmtYFcbiAgICAgIGMtPj5lOiBnUlBDLkRpZ2ltb24uUXVlcnlTdHJlYW08YnI-5Lul5pW456K85424SUTmkojlj5bmlbjnorznjbjos4foqIpcblx0XHRcdGUtPj5kOiDovYnnmbxcbiAgICAgIGxvb3Ag6ZuZ5ZCR5Liy5rWBXG4gICAgICAgIGQtPj53OiBnUlBDLldlYXRoZXIuUXVlcnk8YnI-5pKI5Y-W5q2k5pW456K85424J-S9jee9rkEn55qE5aSp5rCjXG4gICAgICAgIHctLT4-ZDog5Zue5YKz5aSp5rCjXG4gICAgICBlbmRcbiAgICAgIGQtLT4-ZTog5Zue5YKz5pW456K8542455qE6LOH6KiK6IiH5aSp5rCjXG5cdFx0XHRlLS0-PmM6IOi9ieeZvFxuICAgIGVuZFxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifX0&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç™¼ç¾æµç¨‹åœ–èˆ‡æ˜¨å¤©çš„ç›¸ä¼¼ï¼Œä¸éå¤šäº† Envoy ä¾†è½‰ç™¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…ˆ-run-èµ·ä¾†å†èªª&#34;&gt;å…ˆ run èµ·ä¾†å†èªª
&lt;/h2&gt;&lt;p&gt;å…ˆ run èµ·ä¾†å¯èƒ½æœƒæ¯”è¼ƒæœ‰æ„Ÿè¦ºï¼Œè«‹ clone &lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github-Example-Code&lt;/a&gt;ï¼Œä¸¦å°‡
Server run èµ·ä¾†ï¼Œ&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cd DAY15
$ docker-compose up
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰“é–‹&lt;code&gt;localhost:8060&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/GcOZ8ZP.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/GcOZ8ZP.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å°±å¯ä»¥çœ‹åˆ° Web ç«¯å·²ç¶“å¯ä»¥æ”¶åˆ° Server-Stream äº†ï¼&lt;/p&gt;
&lt;h2 id=&#34;web-è¬›è§£&#34;&gt;Web è¬›è§£
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;QueryRequest&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateRequest&lt;/span&gt; } &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;../proto/schema_pb.js&amp;#34;&lt;/span&gt;);&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; { &lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonPromiseClient&lt;/span&gt; } &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;require&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;../proto/schema_grpc_web_pb.js&amp;#34;&lt;/span&gt;);&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;createDigimon&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;createRequest&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;CreateRequest&lt;/span&gt;();  &lt;span style=&#34;color:#a6e22e&#34;&gt;createRequest&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setName&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;name&lt;/span&gt;);  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;createResponse&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;create&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;createRequest&lt;/span&gt;, {});  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;createResponse&lt;/span&gt;;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;queryDigimonStream&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonID&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;let&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;queryRequest&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;QueryRequest&lt;/span&gt;();  &lt;span style=&#34;color:#a6e22e&#34;&gt;queryRequest&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;setId&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonID&lt;/span&gt;);  &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;queryRequest&lt;/span&gt;, {});  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt;;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;async&lt;/span&gt; () =&amp;gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;try&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonPromiseClient&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;http://localhost:8080&amp;#34;&lt;/span&gt;    );    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;createResponse&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;createDigimon&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Agumon&amp;#34;&lt;/span&gt;);    &lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;queryDigimonStream&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPromiseClient&lt;/span&gt;,      &lt;span style=&#34;color:#a6e22e&#34;&gt;createResponse&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getId&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    );    &lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;data&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getId&lt;/span&gt;(),        &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getName&lt;/span&gt;(),        &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getStatus&lt;/span&gt;(),        &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getLocation&lt;/span&gt;(),        &lt;span style=&#34;color:#a6e22e&#34;&gt;response&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;getWeather&lt;/span&gt;().&lt;span style=&#34;color:#a6e22e&#34;&gt;toString&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      );    });    &lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt;);      &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;details&lt;/span&gt;);      &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;log&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;status&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;metadata&lt;/span&gt;);    });    &lt;span style=&#34;color:#a6e22e&#34;&gt;queryStream&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;end&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;end&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      &lt;span style=&#34;color:#75715e&#34;&gt;// stream end signal    });  } catch (err) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;code&lt;/span&gt;);    &lt;span style=&#34;color:#a6e22e&#34;&gt;console&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;message&lt;/span&gt;);  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})();
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Web çš„ Code ä¸¦ä¸é•·ï¼Œå…ˆä»¥&lt;code&gt;DigimonPromiseClient()&lt;/code&gt;å»ºç«‹ gRPC
Clientï¼Œä¹‹å¾Œå°±å¯ä»¥ä½¿ç”¨&lt;code&gt;queryStream&lt;/code&gt;ä¾†ç²å¾— stream çš„ç‰©ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;stream ç‰©ä»¶æœ‰ä¸€å€‹ on functionï¼Œå¯ä»¥ä»¥ callback åˆ†åˆ¥è¨»å†Š:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;data: æ¥æ”¶åˆ° Server-Stream çš„è³‡æ–™&lt;/li&gt;
&lt;li&gt;status: é€£ç·šç‹€æ…‹&lt;/li&gt;
&lt;li&gt;end: é€£ç·šçµæŸçš„è™•ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BD%A0%E7%9A%84-backend-%E5%8F%AF%E4%BB%A5%E6%9B%B4%E6%9C%89%E5%BD%88%E6%80%A7%E4%B8%80%E9%BB%9E---clean-architecture-%E6%A6%82%E5%BF%B5%E7%AF%87-efbeffa8389345aeb0adc1a974975657/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BD%A0%E7%9A%84-backend-%E5%8F%AF%E4%BB%A5%E6%9B%B4%E6%9C%89%E5%BD%88%E6%80%A7%E4%B8%80%E9%BB%9E---clean-architecture-%E6%A6%82%E5%BF%B5%E7%AF%87-efbeffa8389345aeb0adc1a974975657/</guid>
        <description>&lt;h1 id=&#34;ä½ çš„-backend-å¯ä»¥æ›´æœ‰å½ˆæ€§ä¸€é»---clean-architecture-æ¦‚å¿µç¯‡&#34;&gt;ä½ çš„ Backend å¯ä»¥æ›´æœ‰å½ˆæ€§ä¸€é» - Clean Architecture æ¦‚å¿µç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Clean Architecture, Kubernetes, ithome 2020 ironman
Date: September 20, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day6-%E4%BD%A0%E7%9A%84-backend-%E5%8F%AF%E4%BB%A5%E6%9B%B4%E6%9C%89%E5%BD%88%E6%80%A7%E4%B8%80%E9%BB%9E-clean-architecture-%E6%A6%82%E5%BF%B5%E7%AF%87-ab74d6d910f4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10240228&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY05&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY05&lt;/a&gt; Docs tool çš„ä»‹ç´¹å¾Œï¼Œæˆ‘å€‘è¦åˆ©ç”¨é€™äº› Docs ä¾†ç”¢ç”Ÿ Golang Server ä»‹é¢ï¼Œä¸¦ä»¥ Clean Architecture å¯¦ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä½†ç¯‡å¹…å¯¦åœ¨æœ‰é»å¤ªé•·ï¼Œæˆ‘æƒ³é€™ç¯‡é‚„æ˜¯å…ˆä»‹ç´¹ Clean Architecture
æ¦‚å¿µç‚ºè¼ƒå¥½ï¼Œä¸‹ç¯‡æœ‰å¤§é‡çš„ codeï¼Œå‰æ–¹é«˜èƒ½è«‹å°å¿ƒ XDã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€éº¼æ˜¯-clean-architecture&#34;&gt;ä»€éº¼æ˜¯ Clean Architecture
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;The Clean Architecture&lt;/a&gt;æ˜¯è»Ÿé«”ç•Œå¤§ç¥&lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Robert_C._Martin&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Robert C. Martin&lt;/a&gt;æå‡ºï¼Œä»–æ‰€å¯«çš„è‘—åä½œå“æœ‰&lt;a class=&#34;link&#34; href=&#34;https://www.books.com.tw/products/0010579897&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Clean Code&lt;/a&gt;, &lt;a class=&#34;link&#34; href=&#34;http://books.com.tw/products/0010598217&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Clean Coder&lt;/a&gt;é€™äº›å¥½æ›¸ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å·¥ç¨‹å¸«ï¸°æˆ‘å·²ç¶“æ‹œè®€äº†ã€ŠClean Codeã€‹ï¼Œé‚„æœ‰å¿…è¦è®€ã€ŠClean Architectureã€‹å—ï¼Ÿ æ¶æ§‹å¸«ï¸°å–”ï¼Œä½ æœƒåšç£šé ­ï¼Œé‚£ä½ æœƒè“‹æˆ¿å­å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Clean Architecturer å°‡æ›´é¢æƒ³æ•´é«”çš„ Code è€Œé Code çš„å–®ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæˆ‘ä½¿ç”¨çš„ Clean Architecture çµæ§‹æ˜¯å­¸ç¿’&lt;a class=&#34;link&#34; href=&#34;https://github.com/bxcodec&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bxcodec&lt;/a&gt;çš„&lt;a class=&#34;link&#34; href=&#34;https://github.com/bxcodec/go-clean-arch&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;go-clean-arch&lt;/a&gt;ï¼Œå¦‚åœ–ï¼Œæ­¤çµæ§‹å·²ç¶“ç¶“éè¨±å¤šäººé©—è­‰ï¼Œæ˜¯å¾ˆ nice çš„çµæ§‹ XDã€‚&lt;/p&gt;
&lt;h2 id=&#34;clean-architecturer-çš„çµæ§‹&#34;&gt;Clean Architecturer çš„çµæ§‹
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/c3we5K6.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/c3we5K6.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;From: bxcodec/go-clean-arch&lt;/p&gt;
&lt;p&gt;å¦‚æœçœ‹äº†æœ‰é»çŸ‡æ²’é—œä¿‚ï¼Œæˆ‘å€‘å¯ä»¥ç”¨å‚³çµ±çš„ MVC ä¾†ç†è§£ä»–ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/8Qj2ZR9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/8Qj2ZR9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;model-å±¤è®Šç‚º-repository-å±¤&#34;&gt;Model å±¤è®Šç‚º Repository å±¤
&lt;/h3&gt;&lt;p&gt;ä»¥å¾€å–®é«”å¼ Server é‚„ä¸å¤ªéœ€è¦èˆ‡é‚£éº¼å¤šå¾®æœå‹™æºé€šï¼Œæ‰€ä»¥ Model
å±¤å¯ä»¥å–®ç´”é€£æ¥ DB å°±å¥½ã€‚&lt;/p&gt;
&lt;p&gt;ä½†ç¾åœ¨å…¶å¯¦é‚„æœ‰å¾ˆå¤šå¾®æœå‹™è¦æºé€šï¼Œæ‰€ä»¥æˆ‘å€‘å°±çµ±ä¸€ç¨±ä½œ&lt;code&gt;Repository&lt;/code&gt;å±¤å§ï¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‡¡å¾å¤–éƒ¨é€²ä¾†çš„äº‹ç‰©ï¼Œéƒ½å¯ä»¥æ”¾åœ¨Repositoryå±¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘å¸¸çœ‹åˆ° Server å°ˆæ¡ˆçš„æ¶æ§‹æ˜¯å‚³çµ± MVCï¼Œä½†å¾®æœå‹™æºé€šé€™å±¤å»ä¸çŸ¥é“å¾€å“ªè£¡æ“ºï¼Œæœ‰äº›ç›´æ¥æ”¾åœ¨ Controllerï¼Œæœ‰äº›åˆç‰¹åˆ¥æ‹‰å‡ºä¸€å±¤ï¼Œå°è‡´æ¯å€‹å°ˆæ¡ˆæ¶æ§‹å·®ç•°æ…å¤§ã€‚ç¾åœ¨ä¸ç”¨ç®¡äº†çµ±ä¸€æ”¾åœ¨&lt;code&gt;Repository&lt;/code&gt;å±¤ï¼&lt;/p&gt;
&lt;h3 id=&#34;controllerdelivery-å±¤å¤šäº†-usecase-å±¤&#34;&gt;Controller/Delivery å±¤å¤šäº† Usecase å±¤
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;æ¥­å‹™é‚è¼¯æ”¾ç½® Usecase å±¤ã€‚è€Œ Controller/Delivery åªè² è²¬äº¤ä»£å¦‚ä½•æŠŠé€™äº› Usecase å¸¶çµ¦ View å±¤ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæ²’æœ‰ Usecase å±¤ï¼Œå¸¸å¸¸æœƒå°è‡´ Controller å±¤çš„é‚è¼¯å¤šåˆ°æ»¿å‡ºä¾†ï¼Œæˆ‘å¸¸ç¢°åˆ°çš„å•é¡Œæ˜¯ Controller å…¶å¯¦ä¹Ÿæ˜¯æœ‰è¨±å¤šé‚è¼¯é©åˆåˆ†äº«ï¼Œä½†æ˜¯å‚³çµ± MVC å»æ²’æœ‰æ–¹å¼å»å‚³éä»–ï¼Œç¾åœ¨æœ‰ Usecase å±¤ï¼Œå°±æœƒä½¿ Controller å±¤å°±æ¸…çˆ½è¨±å¤šã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨æ²’æœ‰ä»»ä½•æ¥­å‹™é‚è¼¯ä¸‹ Controller å±¤æ›´åŠ å°ˆå¿ƒè² è²¬äº¤ä»˜ï¼Œå› æ­¤ç¨±ä¹‹ç‚º Delivery å±¤æœƒæ›´åŠ åˆé©ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;view-å±¤è®Šå¾—å¤šæ¨£ä¸”å½ˆæ€§&#34;&gt;View å±¤è®Šå¾—å¤šæ¨£ä¸”å½ˆæ€§
&lt;/h3&gt;&lt;p&gt;ç”±æ–¼ Delivery å±¤è² è²¬äº¤ä»˜ Usecase çµ¦ View å±¤ï¼Œæ‰€ä»¥&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¦æ›´æ›ä»»ä½• View å±¤åªéœ€è¦é‡å¯« Delivery å±¤ï¼Œæ¥­å‹™é‚è¼¯çš„ Usecase æ˜¯ä¸éœ€è¦æ”¹çš„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;é€™å¯¦åœ¨æ˜¯éå¸¸æ£’ï¼æŸæ¬¡è¦å¾ Restful API æ›´æ›æˆ Websocket ä»‹é¢æ™‚ï¼Œæˆ‘ç›´æ¥&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/F1iY76L.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/F1iY76L.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å†å›é ­çœ‹çœ‹æŸäº›å°ˆæ¡ˆï¼Œåªæœ‰ Controller å±¤å°è‡´æ¥­å‹™é‚è¼¯å·²ç¶“å®Œå…¨é»åœ¨ View å±¤ï¼Œæˆ‘åªæƒ³å¤§å–Šï¼šã€Œä½ ç‚ºä»€éº¼ä¸æ—©èªª QQã€ã€‚&lt;/p&gt;
&lt;p&gt;é †å¸¶ä¸€æï¼ŒMVC çš„ View å…¶å¯¦æœ€åˆæ˜¯çœŸçš„è¦æœ‰&lt;code&gt;çœ‹å¾—åˆ°çš„ç¶²é é é¢&lt;/code&gt;çš„æƒ…å¢ƒï¼Œå› ç‚ºä»¥å‰çš„ Server
éƒ½æ˜¯ç›´æ¥åç¶²ç«™çš„ï¼Œä¸éç¾åœ¨ Server çš„è¨­è¨ˆå·²ç¶“è·Ÿéå¾€å¤§ä¸ç›¸åŒï¼Œæ‰€ä»¥æˆ‘å–œæ­¡æŠŠ View ç¨±ç‚º&lt;code&gt;è¦å‘ˆç¾çµ¦Clientç«¯çš„æ–¹æ³•&lt;/code&gt;ï¼Œæ‰€ä»¥ Restful API, Websocket, gRPC æˆ‘éƒ½èªç‚ºç®—æ˜¯ä¸€ç¨® Viewã€‚&lt;/p&gt;
&lt;h3 id=&#34;çµ¦æ¯å±¤å»ºç«‹ä»‹é¢çš„-domain-å±¤&#34;&gt;çµ¦æ¯å±¤å»ºç«‹ä»‹é¢çš„ Domain å±¤
&lt;/h3&gt;&lt;p&gt;é™¤äº† Delivery å±¤å¯ä»¥æ›¿æ›ï¼ŒRepository å±¤ä¹Ÿæ˜¯å¯ä»¥æ›¿æ›çš„ï¼Œæ¯”å¦‚èªª RDBMS è¦å¾ MySQL æ›æˆ PostgreSQLã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¦é”æˆé€™å€‹ç›®æ¨™æˆ‘å€‘å¿…é ˆå…ˆè¨‚å¥½ä¸€å€‹ä»‹é¢ï¼Œæ¯”å¦‚èªªå„²å­˜ digimons table å¯ä»¥å…ˆè¨‚å¥½ä»¥ä¸‹ä»‹é¢:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;UUID&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonRepository&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ›´æ› DB å¼•æ“ä¸¦ä¸æœƒé€ æˆ Usecase å±¤çš„ Call çš„æ™‚å€™çˆ†ç‚¸ï¼Œå› ç‚ºä»‹é¢æ²’è®Šã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å€‘åªéœ€é—œå¿ƒå¯¦ä½œä¸åŒ DB çš„å„²å­˜æ–¹å¼å³å¯ï¼Œæ‰€ä»¥é€™æ¨£çš„ç‰¹æ€§é€ æˆ:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¯å±¤éƒ½é«˜ç¨ç«‹æ€§çš„æ¶æ§‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ç‚ºä»€éº¼æ›´æ›-db-å¼•æ“åªè¦ä»‹é¢ä¸è®Šå°±ä¸æœƒçˆ†ç‚¸&#34;&gt;ç‚ºä»€éº¼æ›´æ› DB å¼•æ“ï¼Œåªè¦ä»‹é¢ä¸è®Šå°±ä¸æœƒçˆ†ç‚¸ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;å¦‚æœä½ æ˜¯å¾ Node.js è½‰åˆ° Golangï¼Œä½ å¯èƒ½æœƒå°é€™å€‹æ¦‚å¿µæ„Ÿåˆ°é™Œç”Ÿ(å°±åƒæˆ‘
XD)ï¼Œä»¥ä¸‹èˆ‰ä¸€å€‹ Node.js å¤§å®¶å¸¸æœƒé‡åˆ°çš„å›°é›£ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callAPI&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;caller&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;caller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://api&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€™æ™‚å€™æœƒæœ‰ä¸€å€‹å•é¡Œï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å‚³é€²ä¾†çš„ caller çœŸçš„æœ‰ get é€™å€‹ method å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç‚ºäº†é©—è­‰æˆ‘å€‘æœƒç›´æ¥è·‘èµ·ä¾†ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;callAPI&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ACaller&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å› ç‚ºæ²’æœ‰geté€™å€‹method
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æœƒé¡¯ç¤º`Uncaught TypeError: caller.get is not a function`
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;callAPI&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;BCaller&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å› ç‚ºæœ‰geté€™å€‹methodï¼Œæ‰€ä»¥é‹ä½œæ­£å¸¸
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†æˆ‘å€‘çœŸçš„åªèƒ½&lt;code&gt;è·‘èµ·ä¾†&lt;/code&gt;æ‰èƒ½é©—è­‰&lt;code&gt;æœ‰æ²’æœ‰é€™å€‹method&lt;/code&gt;å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ä¸ç”¨çš„ï¼Œé‚£å°±æ˜¯é€éç¨‹å¼çš„éœæ…‹åˆ†æï¼Œåœ¨ç¨‹å¼é‚„æ²’è·‘èµ·ä¾†å‰åˆ†æ type(å‹åˆ¥)æˆ–è€…æ˜¯ interface(ä»‹é¢)é©åˆç¬¦åˆé æœŸï¼Œæ‰€ä»¥å‰›å‰›çš„ callAPI å¯ä»¥é€™æ¨£åŠ å…¥ interface çµ¦åƒæ•¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// interfaceAæœƒæª¢æŸ¥æ­¤åƒæ•¸æ˜¯å¦æœ‰get method
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;callAPI&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;caller&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;interfaceA&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;caller&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;get&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;https://api&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœaæœ‰get methodå°±ä¸æœƒå™´éŒ¯ï¼Œè€Œæ²’æœ‰å°±æœƒå™´éŒ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;callAPI&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å›åˆ°åŸæœ¬ä¸æœƒçˆ†ç‚¸çš„å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥æ›¿ DB å¼•æ“&lt;code&gt;åŒ…ä¸Šä¸€å±¤interface&lt;/code&gt;ï¼Œå†ç”¨ JavaScript ä¾†èˆ‰ä¾‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-jsx&#34; data-lang=&#34;jsx&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ­¤codeä¸èƒ½é‹è¡Œï¼Œç‚ºèˆ‰ä¾‹çš„pseudocode
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;interfaceA&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;function&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;insertRow&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;foo&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;postgresDB&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// é€™è£¡æ‰æ˜¯çœŸçš„DBå¼•æ“çš„insertï¼Œæˆ‘å€‘ç‚ºä»–åŒ…è£äº†ä¸€å±¤interfaceï¼Œä½¿å‘¼å«æ–¹ä¸æœƒçˆ†ç‚¸
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;postgres&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mysqlDB&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// DBå¼•æ“æ›äº†ï¼Œä½†æ˜¯å¤–å±¤interfaceèˆ‡postgresDBç›¸åŒ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;mysqlDB&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;insert&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å…©è€…éƒ½å¯ä»¥é‹è¡Œï¼Œå› ç‚ºéƒ½ç¬¦åˆinterfaceAçš„å®šç¾©
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;insertRow&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;postgresDB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;insertRow&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mysqlDB&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰€ä»¥ï¼ŒGolang å› ç‚ºæœ‰ interface ä¾†è·Ÿä½¿ç”¨çš„çš„ç¨‹å¼èªªè©²è¦æœ‰å“ªäº› methodï¼Œæ›´æ› DB å¼•æ“å°±ä¸æœƒçˆ†ç‚¸äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;clean-architecturer&#34;&gt;Clean Architecturer
&lt;/h2&gt;&lt;p&gt;çš„é«˜å¯æ¸¬è©¦æ€§&lt;/p&gt;
&lt;p&gt;Clean Architecturer æå€¡&lt;code&gt;DI - ä¾è³´æ³¨å…¥ (Dependency injection)&lt;/code&gt;ï¼Œç¶²è·¯æœ‰å¾ˆå¤šå¾ˆä»”ç´°çš„ä»‹ç´¹ï¼Œä½†æˆ‘èªç‚ºå¯ä»¥ç”¨ä»¥ä¸‹ä¾‹å­å¾ˆç°¡å–®èªªæ˜ä»–çš„&lt;code&gt;ç²¾ç¥&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;âŒ&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;connectDB&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;storeString&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;store&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;String&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;âœ…&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;storeString&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DB&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;store&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;String&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;å¸Œæœ›ç¨‹å¼çš„å¯¦ä½œä¾è³´å¯ä»¥ç”±å¤–éƒ¨æ³¨å…¥ï¼Œè€Œä¸æ˜¯è¢«å›ºå®šåœ¨åº•å±¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ›´ç™½è©±é»&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è™•ç†çš„äººå¾åƒæ•¸å¸¶é€²ä¾†å•¦ï¼Œä¸ç„¶ä½ å¯«æ­»åœ¨ function è£¡æˆ‘æ€éº¼æ›äºº&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æœ‰äº†é€™å€‹æ¦‚å¿µå¾Œï¼Œå¦‚æœæƒ³æ¸¬è©¦ DigimonRepository å±¤ï¼Œä½ ä¸éœ€è¦çœŸçš„é€£ä¸Š DBï¼Œè€Œæ˜¯ä½¿ç”¨é‹è¡Œåœ¨ç¨‹å¼ä¸Šçš„&lt;a class=&#34;link&#34; href=&#34;https://github.com/DATA-DOG/go-sqlmock&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mock DB&lt;/a&gt;ï¼Œä¸¦ä¸”é€é DI æ›¿æ› DB å¯¦é«”:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;storeString&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DB&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;store&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;String&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç”¨çœŸçš„DB
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;connectDB&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;storeString&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ç”¨MockDB
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;connectMockDB&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;storeString&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/bxcodec/go-clean-arch&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bxcodec/go-clean-arch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/hackernoon/golang-clean-archithecture-efd6d7c43047&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Trying Clean Architecture on Golang&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-grafana-%E5%8F%AF%E8%A6%96%E5%8C%96%E5%BE%8C%E7%AB%AF%E7%9A%84%E6%B5%81%E9%87%8F-699ef616ac874b65afa21a1701317ed5/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-grafana-%E5%8F%AF%E8%A6%96%E5%8C%96%E5%BE%8C%E7%AB%AF%E7%9A%84%E6%B5%81%E9%87%8F-699ef616ac874b65afa21a1701317ed5/</guid>
        <description>&lt;h1 id=&#34;ä½¿ç”¨-istio-çš„-grafana-å¯è¦–åŒ–å¾Œç«¯çš„æµé‡&#34;&gt;ä½¿ç”¨ Istio çš„ Grafana å¯è¦–åŒ–å¾Œç«¯çš„æµé‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 12, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY28&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä»‹ç´¹ Istio çš„ Grafanaï¼ŒGrafana
æ˜¯å¯ä»¥å°‡å¾®æœå‹™ç¶²è·¯å¯è¦–åŒ–çš„å·¥å…·ï¼Œåœ¨å¾®æœå‹™è®Šå¤šä¹‹å¾Œï¼Œæœå‹™ A
è·Ÿå“ªäº›æœå‹™é€£æ¥äº†ï¼Œå°±æœƒè®Šå¾—éŒ¯ç¶œè¤‡é›œï¼Œç”±æ–¼æˆ‘å€‘ç¾åœ¨æœ‰äº† Istio çš„ envoy
proxy sidecarï¼Œå„å€‹ sidecar å°±æœƒä¸€ç›´å›å ±è³‡è¨Šçµ¦
Grafanaï¼Œä»¥é”åˆ°ç¶²è·¯å¯è¦–åŒ–çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£&#34;&gt;å®‰è£
&lt;/h2&gt;&lt;p&gt;å•Ÿå‹• K8s é›†ç¾¤ï¼Œæ­¥é©Ÿä¸å†è´…è¿°ï¼Œè©³ç´°ä»‹ç´¹å¯ä»¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10250134&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY23&lt;/a&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;è¦æ³¨æ„çš„æ˜¯æœ‰åˆ©ç”¨&lt;code&gt;$ kubectl apply -f&lt;/code&gt;å®‰è£äº†&lt;code&gt;Prometheus&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/prometheus.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/Grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY28/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name$ minikube tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹å¾Œæˆ‘å€‘é€£çºŒé–‹å•Ÿäº”å€‹&lt;code&gt;web.backend.com&lt;/code&gt;ï¼Œè®“æ•´å€‹ Service Mesh
æ“æœ‰æµé‡ï¼Œ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å•Ÿå‹• Grafana çš„ Dashboard&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;istioctl dashboard grafana
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€²å…¥ Grafana ä¹‹å¾Œå°±å¯ä»¥çœ‹åˆ°è£¡é ­çš„ service çš„å€‹æµé‡æ•¸å€¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/uz2C7vL.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/uz2C7vL.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/tasks/observability/metrics/using-istio-dashboard/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Visualizing
Metrics with Grafana&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-jaeger-%E8%BF%BD%E8%B9%A4%E5%9C%A8%E5%90%84%E5%80%8B-service-%E7%A9%BF%E6%A2%AD%E7%9A%84%E8%AB%8B%E6%B1%82-f6e0d128600a4a5dabe49a9e62ffb83d/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-jaeger-%E8%BF%BD%E8%B9%A4%E5%9C%A8%E5%90%84%E5%80%8B-service-%E7%A9%BF%E6%A2%AD%E7%9A%84%E8%AB%8B%E6%B1%82-f6e0d128600a4a5dabe49a9e62ffb83d/</guid>
        <description>&lt;h1 id=&#34;ä½¿ç”¨-istio-çš„-jaeger-è¿½è¹¤åœ¨å„å€‹-service-ç©¿æ¢­çš„è«‹æ±‚&#34;&gt;ä½¿ç”¨ Istio çš„ Jaeger è¿½è¹¤åœ¨å„å€‹ Service ç©¿æ¢­çš„è«‹æ±‚
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 13, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY29&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä»‹ç´¹ Istio çš„ Jaegerï¼ŒJaeger
å¯ä»¥å°è«‹æ±‚æµé‡é€²è¡Œè·Ÿè¹¤ï¼Œæ˜¯å¾®æœå‹™ä¸­è¤‡é›œè«‹æ±‚çš„è¿½è¹¤æ–¹æ¡ˆ&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£&#34;&gt;å®‰è£
&lt;/h2&gt;&lt;p&gt;å•Ÿå‹• K8s é›†ç¾¤ï¼Œæ­¥é©Ÿä¸å†è´…è¿°ï¼Œè©³ç´°ä»‹ç´¹å¯ä»¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10250134&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY23&lt;/a&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;è¦æ³¨æ„çš„æ˜¯æœ‰åˆ©ç”¨&lt;code&gt;$ kubectl apply -f&lt;/code&gt;å®‰è£äº†&lt;code&gt;Prometheus&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ã€&lt;code&gt;Jaeger&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/jaeger.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/prometheus.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/Grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY29/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name$ minikube tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ Istio é è¨­å€¼&lt;code&gt;values.pilot.traceSampling&lt;/code&gt;æ˜¯è¨­ç‚º
1%ï¼Œæ„æ€æ˜¯ 100 å€‹ requests æ¡æ¨£ä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆæ‰“é–‹ç¶²é ä¸¦å°‡
&lt;code&gt;Create&lt;/code&gt; request è¤‡è£½èµ·ä¾†ï¼Œåˆ©ç”¨ bash æ‰“ 100
æ¬¡ï¼Œé€²å…¥&lt;code&gt;web.backend.com&lt;/code&gt;ä¹‹å¾Œé–‹å•Ÿ&lt;code&gt;é–‹ç™¼è€…æ¨¡å¼&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/EeGRhyf.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/EeGRhyf.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸¦ä»¥ for è¿´åœˆè«‹æ±‚ 100 æ¬¡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i in &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;seq &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; 100&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;è¤‡è£½çš„cURL&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥æˆ‘ä¾†èªªæœƒå¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i in &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;seq &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; 100&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; curl &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://api.backend.com/digimon.Digimon/Create&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Connection: keep-alive&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Accept: application/grpc-web-text&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;X-User-Agent: grpc-web-javascript/0.1&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;X-Grpc-Web: 1&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.75 Safari/537.36&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type: application/grpc-web-text&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Origin: http://web.backend.com&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Referer: http://web.backend.com/&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Accept-Language: en-US,en;q=0.9,zh-TW;q=0.8,zh;q=0.7&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; --data-binary &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;AAAAAAgKBkFndW1vbg==&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; --compressed &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; --insecure; &lt;span style=&#34;color:#66d9ef&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;é–‹å•Ÿ Jaeger&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl dashboard jaeger
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é¸å–&lt;code&gt;istio-ingressgateway&lt;/code&gt;ä¹‹å¾Œé»é¸æœå°‹ï¼Œæœƒç™¼ç¾ç¸½å…±æœ‰ 100
å€‹è¿½è¹¤ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BUE6uUt.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/BUE6uUt.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é»é¸å…¶ä¸­ä¸€å€‹è¿½è¹¤ï¼Œæœƒåˆ—å‡ºæ­¤è«‹æ±‚åœ¨ç¶“éäº†å“ªäº› serviceï¼Œå› ç‚º
&lt;code&gt;Create&lt;/code&gt; request æœ¬èº«æ²’æœ‰ç¶“éä¸åŒçš„ service æ‰€ä»¥ dashboard
åªé¡¯ç¤ºäº†ä¸€å€‹ serviceï¼Œé»é¸ service å°±æœƒåœ¨é¡¯ç¤ºæ­¤ request åœ¨æ­¤ service
ä¸Šçš„ tag ç‹€æ…‹ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LoJ2UjL.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/LoJ2UjL.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä»¥å®˜æ–¹çš„ä¾‹å­ï¼Œå¦‚æœæ˜¯çœ¾å¤š servicesï¼Œrequest åœ¨ä¸åŒ service
èµ°å‹•èŠ±è²»çš„æ™‚é–“å°±æœƒå¦‚ä¸‹é¡¯ç¤ºï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/goBCDZH.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/goBCDZH.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/ops/integrations/jaeger/#installation&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Jaeger&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/tasks/observability/distributed-tracing/jaeger/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Jaeger&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/jaegertracing/jaeger&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;jaegertracing/jaeger:
CNCF Jaeger, a Distributed Tracing Platform&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10207800&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Day 26 -
å®‰è£ä½¿ç”¨åˆ†æ•£å¼è·Ÿè¹¤ç³»çµ± - Jaeger - iT é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘ IT
äººçš„ä¸€å¤©&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-kiali-%E5%8F%AF%E8%A6%96%E5%8C%96%E5%BE%8C%E7%AB%AF%E7%9A%84-service-mesh-efff41c66bed4b83adced4fb24499afa/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-kiali-%E5%8F%AF%E8%A6%96%E5%8C%96%E5%BE%8C%E7%AB%AF%E7%9A%84-service-mesh-efff41c66bed4b83adced4fb24499afa/</guid>
        <description>&lt;h1 id=&#34;ä½¿ç”¨-istio-çš„-kiali-å¯è¦–åŒ–å¾Œç«¯çš„-service-mesh&#34;&gt;ä½¿ç”¨ Istio çš„ Kiali å¯è¦–åŒ–å¾Œç«¯çš„ Service Mesh
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 11, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY27&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä»‹ç´¹ Istio çš„ Kialiï¼ŒKiali
æ˜¯å¯ä»¥å°‡å¾®æœå‹™ç¶²è·¯å¯è¦–åŒ–çš„å·¥å…·ï¼Œåœ¨å¾®æœå‹™è®Šå¤šä¹‹å¾Œï¼Œæœå‹™ A
è·Ÿå“ªäº›æœå‹™é€£æ¥äº†ï¼Œå°±æœƒè®Šå¾—éŒ¯ç¶œè¤‡é›œï¼Œç”±æ–¼æˆ‘å€‘ç¾åœ¨æœ‰äº† Istio çš„ envoy
proxy sidecarï¼Œå„å€‹ sidecar å°±æœƒä¸€ç›´å›å ±è³‡è¨Šçµ¦
Kialiï¼Œä»¥é”åˆ°ç¶²è·¯å¯è¦–åŒ–çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£&#34;&gt;å®‰è£
&lt;/h2&gt;&lt;p&gt;å•Ÿå‹• K8s é›†ç¾¤ï¼Œæ­¥é©Ÿä¸å†è´…è¿°ï¼Œè©³ç´°ä»‹ç´¹å¯ä»¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10250134&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY23&lt;/a&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;è¦æ³¨æ„çš„æ˜¯æœ‰åˆ©ç”¨&lt;code&gt;$ kubectl apply -f&lt;/code&gt;å®‰è£äº†&lt;code&gt;Prometheus&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ã€&lt;code&gt;Kiali&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/prometheus.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/kiali.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY27/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name$ minikube tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹å¾Œæˆ‘å€‘é€£çºŒé–‹å•Ÿäº”å€‹&lt;code&gt;web.backend.com&lt;/code&gt;ï¼Œè®“æ•´å€‹ Service Mesh
æ“æœ‰æµé‡ï¼Œ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å•Ÿå‹• Kiali çš„ Dashboard&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl dashboard kiali
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ Dashboard ä¸­å¯ä»¥é€é Graph
é é¢ï¼Œé»é¸ä¸åŒçš„åœ–å½¢ï¼Œä»¥è§€çœ‹å…¶ç‹€æ…‹ï¼Œä»¥ä¸‹åœ–ä¾†èªªå°±å¯çœ‹åˆ° db
æ¥ç²çš„æµé‡ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/RFfzn0m.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/RFfzn0m.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/tasks/observability/kiali/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Visualizing
Your Mesh&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-prometheusjaeger-%E7%9B%A3%E6%8E%A7%E6%B5%81%E9%87%8F%E8%AB%8B%E6%B1%82-d7923f28bcfc44e0a066aefc7438ebb2/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E4%BD%BF%E7%94%A8-istio-%E7%9A%84-prometheusjaeger-%E7%9B%A3%E6%8E%A7%E6%B5%81%E9%87%8F%E8%AB%8B%E6%B1%82-d7923f28bcfc44e0a066aefc7438ebb2/</guid>
        <description>&lt;h1 id=&#34;ä½¿ç”¨-istio-çš„-prometheusjaeger-ç›£æ§æµé‡è«‹æ±‚&#34;&gt;ä½¿ç”¨ Istio çš„ PrometheusJaeger ç›£æ§æµé‡è«‹æ±‚
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 14, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY30&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©è¦ä»‹ç´¹ Istio çš„ Prometheusï¼ŒPrometheus
æ˜¯ä¸€å€‹æ™‚åºè³‡æ–™åº«ï¼Œå¯ä»¥å°æ–¼æµé‡è«‹æ±‚å¯ä»¥è¨­å®šä¸åŒçš„ Alert
èˆ‡å„ç¨®åœ–å½¢ç›£æ§&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£&#34;&gt;å®‰è£
&lt;/h2&gt;&lt;p&gt;å•Ÿå‹• K8s é›†ç¾¤ï¼Œæ­¥é©Ÿä¸å†è´…è¿°ï¼Œè©³ç´°ä»‹ç´¹å¯ä»¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10250134&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY23&lt;/a&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;è¦æ³¨æ„çš„æ˜¯æœ‰åˆ©ç”¨&lt;code&gt;$ kubectl apply -f&lt;/code&gt;å®‰è£äº†&lt;code&gt;Prometheus&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ã€&lt;code&gt;Grafana&lt;/code&gt;ã€&lt;code&gt;prometheus&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/jaeger.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/prometheus.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.7/samples/addons/Grafana.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY30/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name$ minikube tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘å€‘å°‡ç¶²é ä¸¦å°‡ &lt;code&gt;Create&lt;/code&gt; request è¤‡è£½èµ·ä¾†ï¼Œåˆ©ç”¨ bash æ‰“ 100
æ¬¡ï¼Œé€²å…¥&lt;code&gt;web.backend.com&lt;/code&gt;ä¹‹å¾Œé–‹å•Ÿ&lt;code&gt;é–‹ç™¼è€…æ¨¡å¼&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/EeGRhyf.jpg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/EeGRhyf.jpg&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸¦ä»¥ for è¿´åœˆè«‹æ±‚ 100 æ¬¡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i in &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;seq &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; 100&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;{&lt;/span&gt;è¤‡è£½çš„cURL&lt;span style=&#34;color:#f92672&#34;&gt;}&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥æˆ‘ä¾†èªªæœƒå¦‚ä¸‹:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; i in &lt;span style=&#34;color:#66d9ef&#34;&gt;$(&lt;/span&gt;seq &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt; 100&lt;span style=&#34;color:#66d9ef&#34;&gt;)&lt;/span&gt;; &lt;span style=&#34;color:#66d9ef&#34;&gt;do&lt;/span&gt; curl &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;http://api.backend.com/digimon.Digimon/Create&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Connection: keep-alive&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Accept: application/grpc-web-text&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;X-User-Agent: grpc-web-javascript/0.1&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;X-Grpc-Web: 1&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.75 Safari/537.36&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Content-Type: application/grpc-web-text&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Origin: http://web.backend.com&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Referer: http://web.backend.com/&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; -H &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;Accept-Language: en-US,en;q=0.9,zh-TW;q=0.8,zh;q=0.7&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; --data-binary &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;AAAAAAgKBkFndW1vbg==&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; --compressed &lt;span style=&#34;color:#ae81ff&#34;&gt;\ &lt;/span&gt; --insecure; &lt;span style=&#34;color:#66d9ef&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;é–‹å•Ÿ Prometheus&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl dashboard prometheus
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¼¸å…¥&lt;code&gt;istio_requests_total&lt;/code&gt;å†é»é¸
Executeï¼Œæœƒçœ‹åˆ°æ‰€æœ‰çš„æµé‡è«‹æ±‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/HVRVEWO.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/HVRVEWO.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è€Œé»é¸å·¦é‚Šçš„ Graph æœƒçœ‹åˆ°æµé‡çš„ç·šæ¢åœ–&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/QefaiXc.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/QefaiXc.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;çµ‚æ–¼ 30
å¤©å®Œè³½äº†ï¼Œåœ¨å¾Œé¢é€™å¹¾å¤©ç›£æ§æœƒç™¼ç¾ï¼Œå…¶å¯¦å®‰è£èˆ‡é–‹å•Ÿéƒ¨åˆ†éƒ½å·®ä¸å¤šï¼Œé€™æ˜¯ Istio
å¾ˆå¤§çš„å¥½è™•ï¼Œå³&lt;code&gt;å„ç¨®ç›£æ§å·²ç¶“æ•´åˆè‡³å¹³å°å±¤ï¼Œä¸éœ€å†å¦å¤–è¨­è¨ˆ&lt;/code&gt;ï¼Œæ²’æœ‰ç‰¹åˆ¥å¯«å®Œè³½æ–‡æ˜¯å› ç‚ºï¼Œæœ€å¾Œé€™å¹¾å¤©éƒ½æ˜¯åˆæ¢é€™äº›å·¥å…·ï¼Œåœ¨æœªä¾†æˆ‘å¸Œæœ›å¯ä»¥åœ¨å¾ŒçºŒæ–‡ç« è£œé½Šä½¿ç”¨çš„å¿ƒå¾—èˆ‡æ„Ÿæƒ³ï¼Œè¬è¬å„ä½ä¸€è·¯é™ªä¼´ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E5%88%A9%E7%94%A8-helm-%E6%8A%8A-k8s-%E5%85%83%E4%BB%B6%E9%83%BD%E5%8C%85%E8%A3%9D%E8%B5%B7%E4%BE%86%E5%90%A7-dcf67cd68fc1408ab76d3a6adfce380f/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E5%88%A9%E7%94%A8-helm-%E6%8A%8A-k8s-%E5%85%83%E4%BB%B6%E9%83%BD%E5%8C%85%E8%A3%9D%E8%B5%B7%E4%BE%86%E5%90%A7-dcf67cd68fc1408ab76d3a6adfce380f/</guid>
        <description>&lt;h1 id=&#34;åˆ©ç”¨-helm-æŠŠ-k8s-å…ƒä»¶éƒ½åŒ…è£èµ·ä¾†å§&#34;&gt;åˆ©ç”¨ Helm æŠŠ K8s å…ƒä»¶éƒ½åŒ…è£èµ·ä¾†å§ï¼
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 4, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY20&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day20-%E5%88%A9%E7%94%A8-helm-%E6%8A%8A-k8s-%E5%85%83%E4%BB%B6%E9%83%BD%E5%8C%85%E8%A3%9D%E8%B5%B7%E4%BE%86%E5%90%A7-951a9e184f2f&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10249122&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œä»Šå¤©æˆ‘å€‘è¦ä»‹ç´¹ Helmï¼Œ&lt;/p&gt;
&lt;p&gt;æ˜¨å¤©å·²ç¶“å°‡ K8s çš„ Podã€Serviceã€Deploymentã€Ingress
å…ƒä»¶éƒ½ä»‹ç´¹å®Œç•¢ï¼Œå®¹å™¨çš„ç®¡ç†éƒ½è®Šå¾—æ›´åŠ å®¹æ˜“ï¼Œä½†å„å€‹å…ƒä»¶çš„ config yaml
æª”å°‡æœƒè®Šå¾—å¦‚ä¸‹åœ–é€™éº¼å¤šï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/bCoM8Pt.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/bCoM8Pt.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é€™éº¼å¤šçš„å…ƒä»¶å°è‡´æ¯æ¬¡ K8s å•Ÿå‹•æ™‚éƒ½è¦ä¸‹ä»¥ä¸‹æŒ‡ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl create -f db-deployment.yaml,db-service.yaml,envoy-deployment.yaml,envoy-service.yaml,server-deployment.yaml,server-service.yaml,weather-deployment.yaml,weather-service.yaml,web-deployment.yaml,web-service.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl create -f ingress.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°±ç®¡ç†ä¸Šé‚„æ˜¯éº»ç…©äº†äº›ï¼Œè€Œ Helm å°±æ˜¯å°‡é€™äº› config yaml
æª”åœ¨åŒ…è£èµ·ä¾†çš„å·¥å…·ï¼Œè®“å¾Œç«¯éƒ¨ç½²æ›´åŠ çš„&lt;code&gt;ä¸€éµè§£æ±º&lt;/code&gt;XDã€‚&lt;/p&gt;
&lt;h2 id=&#34;helm-å®‰è£&#34;&gt;Helm å®‰è£
&lt;/h2&gt;&lt;p&gt;Mac å®‰è£å¯ä»¥ä½¿ç”¨ Homebrew å®‰è£ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;brew install helm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œå…¶ä»–çš„å¹³å°ä¹Ÿç›¸ç•¶ç°¡å–®ï¼Œå¯ä»¥åƒè€ƒ&lt;a class=&#34;link&#34; href=&#34;https://github.com/helm/helm#install&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜ç¶²&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å®‰è£å®Œå¾Œï¼Œè¨˜å¾—å°‡ Helm repostory URL æ·»åŠ è‡³ Helmï¼Œé€™å°±åƒ Mac çš„
Homebrewã€Ubuntu çš„ apt çš„ library URL&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;helm repo add stable https://kubernetes-charts.storage.googleapis.com/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å…ˆ-run-èµ·ä¾†&#34;&gt;å…ˆ run èµ·ä¾†
&lt;/h2&gt;&lt;p&gt;Clone &lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Example-Code&lt;/a&gt;ï¼Œé€²å…¥åˆ°
Helm çš„è³‡æ–™å¤¾ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY20/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°‡ Helm å•Ÿå‹•ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ™‚å¯ä»¥ä¸‹ä»¥ä¸‹æŒ‡ä»¤ï¼Œæœƒç™¼ç¾ Helm
å°‡æˆ‘å€‘å‰å¹¾ç¯‡æ–‡ç« çš„å…ƒä»¶ä¸€æ¬¡å»ºç«‹å®Œç•¢ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl get all
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/NAOEjvm.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/NAOEjvm.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è€Œé–‹å•Ÿ&lt;code&gt;web.digimon.com&lt;/code&gt;ï¼Œworkï¼&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/fgkGYAx.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/fgkGYAx.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ&#34;&gt;å¯¦ä½œ
&lt;/h2&gt;&lt;p&gt;å»ºç«‹ä¸€ helm chartï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm create helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æŒ‡ä»¤ä¸‹å®Œå¾Œï¼Œæœƒå»ºç«‹ä»¥ä¸‹è³‡æ–™å¤¾ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/X5wvfSt.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/X5wvfSt.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;charts: æ”¾ç½®å…¶ä»– chart
çš„è³‡æ–™å¤¾ï¼Œç”±æ–¼é€™æ¬¡çš„å¯¦ä½œè¼ƒç°¡å–®ï¼Œæ‰€ä»¥ä¸¦æ²’æœ‰ç”¨åˆ°å…¶ä»– chart&lt;/li&gt;
&lt;li&gt;templates: æ”¾ç½® K8s çš„å…ƒä»¶&lt;/li&gt;
&lt;li&gt;.helmignore: è¦å¿½ç•¥çš„æª”æ¡ˆ&lt;/li&gt;
&lt;li&gt;Chart.yaml: èªªæ˜æ­¤ chart çš„ metadataï¼Œæœ‰åç¨±èˆ‡ç‰ˆæœ¬ç­‰ç­‰&lt;/li&gt;
&lt;li&gt;values.yaml: å¯å°‡ K8s å…ƒä»¶çš„åƒæ•¸æŠ½è±¡å‡ºä¾†ï¼Œä¸¦åœ¨ values.yaml
çµ±ä¸€æ§ç®¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”±æ–¼ templates
ä¸­çš„å…ƒä»¶æˆ‘éƒ½å°‡å®ƒåˆªé™¤äº†ï¼Œæ”¾å…¥å‰å¹¾ç¯‡æ–‡ç« çš„å…ƒä»¶ï¼Œæœƒå¦‚ä¸‹ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/gESTuC0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/gESTuC0.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸¦æŠŠ deployment è£¡é ­çš„&lt;code&gt;replicaCount&lt;/code&gt;æŠ½è±¡å‡ºä¾†ï¼Œçµ±ä¸€ç”±
value.yaml ä¾†æ§ç®¡ï¼Œä»¥ server-deployment.yaml ä¾†èªªæœƒå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion: extensions/v1beta1kind: Deploymentmetadata:  annotations:    kompose.cmd: kompose convert    kompose.version: 1.16.0 (0c01309)  creationTimestamp: null  labels:    io.kompose.service: server  name: serverspec:  replicas&lt;/span&gt;: { { &lt;span style=&#34;color:#f92672&#34;&gt;.Values.replicaCount } }  strategy&lt;/span&gt;: {&lt;span style=&#34;color:#f92672&#34;&gt;}  template:    metadata:      creationTimestamp: null      labels:        io.kompose.service: server    spec:      containers:        - command:            - go            - run            - cmd/main.go          image: superj80820/digimon-service          name: server          ports:            - containerPort: 6000          resources&lt;/span&gt;: {&lt;span style=&#34;color:#f92672&#34;&gt;}      restartPolicy: Alwaysstatus&lt;/span&gt;: {}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-implement-ingress-deployment-tutorial-7431c5f96c3e&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆäºŒï¼‰å¯¦ä½œç¯„ä¾‹ï¼šPodã€Serviceã€Deploymentã€Ingress | by èƒ¡ç¨‹ç¶­ï½œ
Cheng-Wei Hu | Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@C.W.Hu/kubernetes-helm-chart-tutorial-fbdad62a8b61&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kubernetes
åŸºç¤æ•™å­¸ï¼ˆä¸‰ï¼‰Helm ä»‹ç´¹èˆ‡å»ºç«‹ Chart | by èƒ¡ç¨‹ç¶­ï½œ Cheng-Wei Hu |
Medium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E5%9C%A8%E9%96%8B%E5%A7%8B%E6%95%B8%E7%A2%BC%E5%BE%AE%E6%9C%8D%E5%8B%99%E4%B9%8B%E6%97%85%E5%89%8D-a769166ec81945c888c21b673734ef8e/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E5%9C%A8%E9%96%8B%E5%A7%8B%E6%95%B8%E7%A2%BC%E5%BE%AE%E6%9C%8D%E5%8B%99%E4%B9%8B%E6%97%85%E5%89%8D-a769166ec81945c888c21b673734ef8e/</guid>
        <description>&lt;h1 id=&#34;åœ¨é–‹å§‹æ•¸ç¢¼å¾®æœå‹™ä¹‹æ—…å‰&#34;&gt;åœ¨é–‹å§‹æ•¸ç¢¼å¾®æœå‹™ä¹‹æ—…å‰
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 15, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY01&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day01-%E5%9C%A8%E9%96%8B%E5%A7%8B%E6%95%B8%E7%A2%BC%E5%BE%AE%E6%9C%8D%E5%8B%99%E4%B9%8B%E6%97%85%E5%89%8D-f00b950c4f04&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10234832&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/aLFTBaq.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/aLFTBaq.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å‰è¨€&#34;&gt;å‰è¨€
&lt;/h2&gt;&lt;p&gt;åœ¨å¾®æœå‹™çš„ä¸–ç•Œï¼ŒGolang ç‚ºä»€éº¼å¯ä»¥è„«ç©è€Œå‡ºï¼Œè€Œ K8s
åˆ°åº•å¹«å¿™äº†ä»€éº¼ï¼ŒIstio æ€éº¼è§£æ±º Service Mesh
çš„ï¼Ÿé¢å°é€™ç³ç‘¯æ»¿ç›®çš„ç”Ÿæ…‹ç³»ï¼Œå°±å½·å½¿å°æ™‚å¾Œæ„›çœ‹çš„&lt;code&gt;æ•¸ç¢¼å¯¶è²&lt;/code&gt;ä¸€æ¨£ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å…¶å¯¦ï¼Œä¸çŸ¥é“çš„äº‹æƒ…ï¼Œåªè¦é è‡ªå·±è¦ªèº«å»é«”é©—ï¼Œç„¶å¾Œï¼Œç”¨è‡ªå·±çš„çœ¼ç›å»çœ‹ï¼Œé‚£å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è¢«é¸å¬çš„å­©å­: æºè¼äºŒ&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç§‰æŒè‘—é€™æ¨£çš„è¸©é›·æ¨¡å¼ï¼Œå› æ­¤ç”¢ç”Ÿäº†æ­¤ç³»åˆ—ï¼Œå†éº»ç…©å¤§å¤§å€‘æŒ‡æ•™äº†ï¼Œè¬è¬ï½&lt;/p&gt;
&lt;h2 id=&#34;ç‚ºä»€éº¼æœ‰æ­¤ç³»åˆ—&#34;&gt;ç‚ºä»€éº¼æœ‰æ­¤ç³»åˆ—
&lt;/h2&gt;&lt;p&gt;å› ç‚ºåœ¨å·¥ä½œä¸Šæœƒè¶Šä¾†è¶Šéœ€è¦ä½¿ç”¨ K8s +
Istioï¼Œåœ¨å¯¦éš›æ‡‰ç”¨çš„æ¯ä¸€å¤©ä¸­ï¼Œä¹ŸæŠŠå­¸ç¿’çš„å…§å®¹æ•´ç†æˆæ–‡ç« ï¼Œå¸Œæœ›èƒ½èˆ‡å¤§å¤§å€‘è¨è«–èˆ‡æŒ‡æ•™ï½&lt;/p&gt;
&lt;h2 id=&#34;ç³»åˆ—å†’éšªç­‰ç´š&#34;&gt;ç³»åˆ—å†’éšªç­‰ç´š
&lt;/h2&gt;&lt;p&gt;æ­¤ç³»åˆ—é©åˆæ¢è¨ä»¥ä¸‹å•é¡Œçš„è®€è€…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾å–®é«”å¼æœå‹™è½‰å¾®æœå‹™&lt;/li&gt;
&lt;li&gt;Istio èˆ‡ K8s åˆæ¢&lt;/li&gt;
&lt;li&gt;Golang Clean Architecture å¾®æœå‹™çš„è¨­è¨ˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚å‰é¢æ‰€èªªçš„ï¼Œæˆ‘ä¸¦ä¸æ˜¯ä¸€å€‹å¾®æœå‹™çš„è¶…ç´šå°ˆå®¶ï¼Œè€Œæ˜¯ä¸€å€‹æ¯å¤©ç¢°åˆ°å¾®æœå‹™å•é¡Œçš„åˆå­¸è€…ï¼Œæ‰€ä»¥æ–‡ç« ä¸æœƒæœ‰å¤ªé«˜æ·±çš„å•é¡Œï¼Œä¸éå¦‚
Huli å¤§å¤§&lt;a class=&#34;link&#34; href=&#34;https://medium.com/hulis-blog/why-blogging-ab77fd8c6ffa&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;é€™ç¯‡æ–‡ç« &lt;/a&gt;æ‰€èªªçš„ï¼Œä¹Ÿè¨±åˆå­¸èƒ½æ›´ç«™åœ¨ç«™åœ¨åˆå­¸è€…çš„è§’åº¦ä¾†è¬›è§£ï¼Œä¹Ÿè«‹å„ä½å¤§å¤§å¤šæŒ‡æ•™ï½&lt;/p&gt;
&lt;h2 id=&#34;ç³»åˆ—æ’°å¯«æ–¹å‘&#34;&gt;ç³»åˆ—æ’°å¯«æ–¹å‘
&lt;/h2&gt;&lt;p&gt;å¾å–®é«”å¼æœå‹™(Monolithic)è½‰è®Šç‚ºå¾®æœå‹™(Microservice)ï¼Œé€™æ¨£çš„è½‰è®Šç¢ºå¯¦è§£æ±ºäº†è¨±å¤šå•é¡Œï¼Œä¾‹å¦‚ï¼šã€Œæ›´å¥½çš„æ“´å±•æ€§ã€æ›´æ‹†åˆ†çš„é‚è¼¯ã€ï¼Œä½†å®Œå…¨ä¸åŒçš„å¾Œç«¯æ¶æ§‹å»ä¹Ÿç”¢ç”Ÿäº†è«¸å¤šå•é¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼šBackend äººå“¡å¦‚æœè¦è™•ç†ä¸€å€‹æƒ…å¢ƒï¼ŒåŸæœ¬åœ¨å–®é«”å¼æœå‹™åªæ˜¯å°ˆæ³¨åœ¨ä¸€å€‹
Service ä¸Šï¼Œä½†å¾®æœå‹™æ‰€å› ç‚ºè¦è€ƒæ…®å¤šå€‹ Service æ‰€ä»¥ç¯„åœæ›´å¤§ï¼Œé—œæ–¼å¤šå€‹
Service äº’å‹•çš„æ„›æ¨æƒ…ä»‡ï¼Œå¤§å®¶é€šå¸¸æŠŠå®ƒç¨±ç‚º Service Meshï¼ŒIstio
ä¾¿æ˜¯ç‚ºäº†è§£æ±ºæ­¤å•é¡Œè€Œç”Ÿã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ‰€ä»¥åŸºæ–¼ä»¥ä¸Šå•é¡Œï¼Œå¤§è‡´æƒ³åˆ†ç‚ºä»¥ä¸‹ä¸‰å€‹éšæ®µä¾†ä»‹ç´¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Golang å¾®æœå‹™å¯¦ä½œï¼šï¼Œä¸€å€‹ç°¡å–®è‡ªç”±çš„ Golang å¾®æœå‹™è¦æ€éº¼ç”¨ Docs
å·¥å…·è¦åŠƒã€Docker åŒ…è£ç’°å¢ƒã€Clean Architecture å»ºæ§‹ã€‚&lt;/li&gt;
&lt;li&gt;K8sï¼šç•¶è¨±å¤šçš„ Docker Image éƒ½å®Œæˆå¾Œï¼Œå°±è¦é–‹å§‹éƒ¨ç½²è‡³é›²ç«¯ä¸»æ©Ÿä¸Šäº†ï¼Œè€Œ
K8s æ˜¯ç¾ä»Šæœ€ç´…çš„ Container ç®¡ç†å¹³å°ï¼Œæ­¤ç¯‡å¹…æœƒä»‹ç´¹å¦‚ä½•å°é€™äº› Container
é€²è¡Œç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;Istioï¼šåœ¨è¨±å¤š Container
éƒ½éƒ¨ç½²å®Œç•¢å¾Œï¼Œæˆ‘å€‘ç™¼ç¾å¤šå€‹å¾®æœå‹™çš„æºé€šç«Ÿç„¶æ¯”å–®é«”å¼æœå‹™è¤‡é›œéå¸¸å¤šï¼æ­¤ç¯‡å¹…æœƒé€é
Istio ä¾†ä»‹ç´¹æ€éº¼è§£æ±ºæ­¤å•é¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;å¾Œç«¯ Backend
çš„è¨­è¨ˆç™¾ç™¾ç¨®ï¼Œæ²’æœ‰ä¸€ç¨®æ˜¯æ­£ç¢ºç­”æ¡ˆï¼Œæ¥ä¸‹ä¾†æˆ‘æœƒç”¨æˆ‘æ‰€ç†è§£çš„æ–¹å¼è§£é‡‹çµ¦å¤§å®¶ï¼Œå¦‚æœå¤§å®¶å°æ–¼æ–‡ç« å…§å®¹ä¹Ÿæ‰€ç–‘å•ä¹Ÿæ­¡è¿è¨è«–ï½å†’éšªè¦é–‹å§‹å•¦ï¼&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E5%A5%94%E6%94%BE%E7%9A%84-golang%E5%8D%BB%E9%9A%B1%E8%97%8F%E8%91%97%E6%9C%89%E7%B4%80%E5%BE%8B%E7%9A%84%E6%9E%B6%E6%A7%8B---clean-architecture-%E5%AF%A6%E4%BD%9C%E7%AF%87-d3354aeb1ea84e66bd3f9254f2930617/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E5%A5%94%E6%94%BE%E7%9A%84-golang%E5%8D%BB%E9%9A%B1%E8%97%8F%E8%91%97%E6%9C%89%E7%B4%80%E5%BE%8B%E7%9A%84%E6%9E%B6%E6%A7%8B---clean-architecture-%E5%AF%A6%E4%BD%9C%E7%AF%87-d3354aeb1ea84e66bd3f9254f2930617/</guid>
        <description>&lt;h1 id=&#34;å¥”æ”¾çš„-golangå»éš±è—è‘—æœ‰ç´€å¾‹çš„æ¶æ§‹---clean-architecture-å¯¦ä½œç¯‡&#34;&gt;å¥”æ”¾çš„ Golangï¼Œå»éš±è—è‘—æœ‰ç´€å¾‹çš„æ¶æ§‹ï¼ - Clean Architecture å¯¦ä½œç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Clean Architecture, Kubernetes, ithome 2020 ironman
Date: September 21, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day7-%E5%A5%94%E6%94%BE%E7%9A%84-golang-%E5%8D%BB%E9%9A%B1%E8%97%8F%E8%91%97%E6%9C%89%E7%B4%80%E5%BE%8B%E7%9A%84%E6%9E%B6%E6%A7%8B-clean-architecture-%E5%AF%A6%E4%BD%9C%E7%AF%87-dd41610dcde7&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10241479&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY06&lt;/a&gt;çš„ä»‹ç´¹å¾Œï¼Œç›¸ä¿¡å¤§å®¶å·²ç¶“å° Clean Architecture çš„ç¨æœ‰æ¦‚å¿µäº†ï¼Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å¯¦ä½œçš„éƒ¨åˆ†ï¼Œç›¸ä¿¡æœƒè®“å„ä½æ›´ç†è§£ Clean Architecture çš„å¥½è™•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸éï¼Œä½ ä¹Ÿå¯ä»¥å…ˆé€²å…¥ DAY07 çš„è³‡æ–™å¤¾åº•ä¸‹æŠŠ Server é‹è¡Œèµ·ä¾†ï¼Œé€™æ¨£æœƒæ¯”è¼ƒæœ‰æ„Ÿè¦ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY07
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker-compose up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é€éswagger-generatorhttpsgithubcomswagger-apiswagger-codegenä¾†ç”¢ç”Ÿ-server-ä»‹é¢&#34;&gt;é€é&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;ä¾†ç”¢ç”Ÿ Server ä»‹é¢
&lt;/h2&gt;&lt;p&gt;é€²åˆ°&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY07&lt;/a&gt;çš„è³‡æ–™å¤¾ï¼Œä½¿ç”¨ docker é‹è¡Œä»¥ä¸‹æŒ‡ä»¤:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker run --rm -v &lt;span style=&#34;color:#e6db74&#34;&gt;${&lt;/span&gt;PWD&lt;span style=&#34;color:#e6db74&#34;&gt;}&lt;/span&gt;:/local swaggerapi/swagger-codegen-cli-v3 generate &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -i /local/swagger.yaml &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -l go-server &lt;span style=&#34;color:#ae81ff&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;    -o /local/go-server
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;swagger-generator æœƒè‡ªå‹•ç”¢ç”Ÿä»¥ä¸‹çš„ code:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/pnEyUT8.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/pnEyUT8.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä¸€æ­¥ä¸€æ­¥å¯¦ä½œæˆä»¥ä¸‹çš„ code:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DcBLIhV.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/DcBLIhV.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä¾†å¯¦ä½œå§&#34;&gt;ä¾†å¯¦ä½œå§ï¼
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/8Qj2ZR9.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/8Qj2ZR9.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/xDYVMWG.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/xDYVMWG.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è«‹é…åˆæ­¤å…©å¼µåœ–èˆ‡ä¸¦ä¾ç…§&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github ç¯„ä¾‹&lt;/a&gt;ä¸€æ­¥ä¸€æ­¥å¯¦ä½œï¼Œ&lt;/p&gt;
&lt;h3 id=&#34;domain-å±¤---è¦ç¯„ä¸€åˆ‡çš„è€å¤§å“¥&#34;&gt;Domain å±¤ - è¦ç¯„ä¸€åˆ‡çš„è€å¤§å“¥
&lt;/h3&gt;&lt;p&gt;å¦‚&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY06&lt;/a&gt;æ‰€èªªï¼Œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘å€‘éœ€è¦ä¸€å€‹interfaceä¾†å‘Šè¨´æ¯å€‹ call çš„ç¨‹å¼ä»–å€‘åˆ°åº•åœ¨ call ä»€éº¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥å¿…é ˆå»ºç«‹å»ºç«‹ diet(åŸ¹è‚²)èˆ‡ digimon(æ•¸ç¢¼ç¸)å…©å€‹ interface åœ¨ domain å±¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/HOkkLhs.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/HOkkLhs.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä»¥&lt;code&gt;digimon.go&lt;/code&gt;ä¾†èªªï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;context&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// Digimon ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;     &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`json:&amp;#34;id&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;   &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`json:&amp;#34;name&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;`json:&amp;#34;status&amp;#34;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// DigimonRepository ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonRepository&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;UpdateStatus&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// DigimonUsecase ..
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;interface&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;UpdateStatus&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - struct&lt;/code&gt;: å®šç¾©äº†æ•¸ç¢¼ç¸æœƒæœ‰å“ªäº›çš„å±¬æ€§ï¼Œç•¶ç¨‹å¼è£¡é¢å‰µå»ºäº†æ•¸ç¢¼ç¸ï¼Œå°±å¿…å®šé€™äº›å±¬æ€§éƒ½è¦æ“æœ‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - repository interface&lt;/code&gt;: å®šç¾©äº† repository å±¤çš„å„ç¨®æ–¹æ³•ï¼Œæˆ‘å€‘å¿…é ˆè¦æŒ‰ç…§é€™å€‹å®šç¾©å¯¦ä½œï¼Œä¸ç„¶å°±æœƒçˆ†ç‚¸ï¼Œå‘¼å«çš„ç¨‹å¼åªèƒ½å‘¼å«é€™äº›å®šç¾©å¥½çš„æ–¹æ³•ï¼Œä¸ç„¶ä¹Ÿæœƒçˆ†ç‚¸
XDã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - usecase interface&lt;/code&gt;: èˆ‡&lt;code&gt;è¬›è§£-2&lt;/code&gt;ç›¸åŒéƒ½æ˜¯å®šç¾©æœ‰å“ªäº›æ–¹æ³•ï¼Œä¸éä»–æ˜¯å®šç¾© usecase é€™å€‹æ¥­å‹™é‚è¼¯å±¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;repository-å±¤---ä»»ä½•å¤–éƒ¨è³‡æ–™éƒ½æˆ‘ä¾†ç®¡&#34;&gt;Repository å±¤ - ä»»ä½•å¤–éƒ¨è³‡æ–™éƒ½æˆ‘ä¾†ç®¡
&lt;/h3&gt;&lt;p&gt;å®šç¾©å¥½äº† domain å±¤ï¼Œå°±å¯ä»¥ä¾ç…§ domain ä¾†è¨­è¨ˆ repository å±¤ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/UtfWMqy.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/UtfWMqy.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°é›–ç„¶ diet èˆ‡ digimon ç›®å‰éƒ½æ˜¯ç”¨ PostgreSQL ä¾†å¯¦ä½œï¼Œä½†æ˜¯æˆ‘å€‘éƒ½å°‡ repository ç¨ç«‹æ‹‰å‡ºä¾†ï¼Œä»¥ä¾¿å°‡ä¸åŒçš„ DB åŠŸèƒ½åšå€åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ç‚ºæ ¸å¿ƒéƒ¨åˆ†:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;postgresqlDigimonRepository&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 &amp;amp;&amp;amp; è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// NewpostgresqlDigimonRepository ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewpostgresqlDigimonRepository&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DB&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonRepository&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;postgresqlDigimonRepository&lt;/span&gt;{&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£4 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;postgresqlDigimonRepository&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;row&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;p&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;QueryRow&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SELECT id, name, status FROM digimons WHERE id =$1&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;{}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;row&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Scan&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - å®šç¾©å¥½éœ€è¦å“ªäº›ä¾è³´æ³¨å…¥(DI)&lt;/code&gt;: é€™æ˜¯ Clean Architecture çš„æ ¸å¿ƒä¹‹ä¸€ï¼Œå¦‚&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY06&lt;/a&gt;æ‰€è¿°ï¼Œ&lt;code&gt;å°‡ä¾è³´çš„äº‹ç‰©ç”±å¤–éƒ¨æ³¨å…¥ï¼Œè€Œä¸æ˜¯å¯«æ­»åœ¨è£¡é ­&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - è¨­è¨ˆä¸€å€‹DIæ³¨å…¥çš„function&lt;/code&gt;: æœ‰äº†&lt;code&gt;è¬›è§£1&lt;/code&gt;çš„å®šç¾©ï¼Œæˆ‘å€‘é‚„éœ€è¦ä¸€å€‹æ³¨å…¥çš„ functionï¼Œå°‡ db &lt;code&gt;ç¢ºå¯¦&lt;/code&gt;æ³¨å…¥ã€‚ç‚ºä»€éº¼è¦é€™æ¨£å‘¢ï¼Ÿå› ç‚ºä½ æ˜¯å¯ä»¥é€™æ¨£ç”¢ç”Ÿå¯¦ä¾‹çš„&lt;code&gt;postgresqlDigimonRepository{}&lt;/code&gt;ï¼Œå¯ä»¥ç™¼ç¾å…¶å¯¦æ²’æœ‰å¸¶ dbï¼Œä½†å¯¦éš›ä¸Šé‚„æ˜¯å¯ä»¥é‹è¡Œã€‚æˆ‘å€‘å¯ä»¥é€éæ­¤ function ä¾†é¿å…é€™å€‹æƒ…å½¢ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - é€édomainè£¡å®šç¾©çš„interfaceä¾†ç´„æŸå›å‚³å€¼&lt;/code&gt;: &lt;code&gt;domain.DigimonRepository&lt;/code&gt;é€™å€‹ interface å®šç¾©äº†æœ‰å“ªäº›æ–¹æ³•&lt;code&gt;postgresqlDigimonRepository&lt;/code&gt;å¿…é ˆè¦å¯¦ä½œï¼Œå¦‚&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY06&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY06&lt;/a&gt;æ‰€è¿°ï¼Œæœ‰äº†æ­¤ interface æ‰èƒ½è®“å‘¼å«çš„ç¨‹å¼åœ¨&lt;code&gt;é‚„æ²’runèµ·ä¾†&lt;/code&gt;å°±çŸ¥é“&lt;code&gt;å“ªäº›å‘¼å«æ–¹æ³•å­˜åœ¨&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£4 - å¯¦ä½œdomain.DigimonRepository interfaceå®šç¾©çš„æ–¹æ³•&lt;/code&gt;: &lt;code&gt;GetByID&lt;/code&gt;è¦ç¢ºå¯¦ç¬¦åˆ interface å®šç¾©çš„æ–¹æ³•ï¼Œä¸ç„¶ Golang åœ¨é‹è¡Œå‰å°±æœƒå ±éŒ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;usecase-å±¤---æ¥­å‹™é‚è¼¯çš„ç®¡è½„è™•&#34;&gt;Usecase å±¤ - æ¥­å‹™é‚è¼¯çš„ç®¡è½„è™•
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/BVDeh0X.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/BVDeh0X.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonRepository&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// NewDigimonUsecase ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewDigimonUsecase&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonRepository&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;du&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) (&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;error&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;du&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;ctx&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;id&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - å®šç¾©ä¾è³´æ³¨å…¥(DI)æ‰€éœ€çš„Repositoryå±¤&lt;/code&gt;: æ³¨å…¥äº†ä¹‹å¾Œæˆ‘å€‘å†å° Repository
å±¤åšå„ç¨®é‚è¼¯çš„æ“ä½œï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œé›–ç„¶ç›®å‰åªæœ‰æ³¨å…¥æ‰€å±¬ PostgreSQL çš„ repositoryï¼Œä½†å¦‚æœ digimon æœ‰å¾ˆå¤šä¸åŒçš„ä¾†æºï¼Œæ¯”å¦‚èªª MongoDBã€Microservice ç­‰ç­‰ï¼Œæˆ‘å€‘å¯ä»¥æ³¨å…¥æ›´å¤š repository ä¾†æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - è¨­è¨ˆç¢ºå¯¦æ³¨å…¥çš„function&lt;/code&gt;: èˆ‡ repository å±¤ä¸€æ¨£ï¼Œéœ€è¦ä¸€å€‹ function ä¾†è¦æ±‚è¦æ³¨å…¥å“ªäº› repositoryã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - ä¾ç…§domain.DigimonRepository interfaceä¾†å¯¦ä½œ&lt;/code&gt;: èˆ‡ repository å±¤ä¸€æ¨£ï¼Œè¦ä»¥ interface è¦ç¯„ä¾†å¯¦ä½œï¼Œä¸éé€™è£¡æ˜¯å¯¦ä½œ&lt;code&gt;æ¥­å‹™é‚è¼¯&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;delivery-å±¤---äº¤ä»˜æ¥­å‹™é‚è¼¯çµ¦å¼•æ“çš„è·‘è…¿å·¥&#34;&gt;Delivery å±¤ - äº¤ä»˜æ¥­å‹™é‚è¼¯çµ¦å¼•æ“çš„è·‘è…¿å·¥
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/AJ6zmsa.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/AJ6zmsa.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°é€™é‚Šå¤§å®¶æ‡‰è©²å·²ç¶“ç™¼ç¾ï¼ŒClean Architecture çš„é‡é»å°±æ˜¯:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®šç¾©å¥½å€‹å±¤ä»‹é¢&lt;/li&gt;
&lt;li&gt;ä¾è³´æ³¨å…¥æ³¨å…¥å†æ³¨å…¥&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨å„ç¨®æ³¨å…¥çš„å¯¦é«”ä¾†å¯¦ä½œ&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è€Œ delivery å±¤å°±æ˜¯åœ¨æ³¨å…¥ usecase å±¤çš„å¯¦é«”ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// DigimonHandler ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonHandler&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;DietUsecase&lt;/span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DietUsecase&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// NewDigimonHandler ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;NewDigimonHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;dietUsecase&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DietUsecase&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonHandler&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;DietUsecase&lt;/span&gt;:    &lt;span style=&#34;color:#a6e22e&#34;&gt;dietUsecase&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/api/v1/digimons/:digimonID&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetDigimonByDigimonID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/api/v1/digimons&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PostToCreateDigimon&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;e&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;POST&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/api/v1/digimons/:digimonID/foster&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;PostToFosterDigimon&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// PostToCreateDigimon ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonHandler&lt;/span&gt;) &lt;span style=&#34;color:#a6e22e&#34;&gt;PostToCreateDigimon&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Context&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3-1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;var&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;swagger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonInfoRequest&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;BindJSON&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3-2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;swagger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ModelError&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Code&lt;/span&gt;:    &lt;span style=&#34;color:#ae81ff&#34;&gt;3000&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Message&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Internal error. Parsing failed&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;body&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Store&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;); &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3-2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;swagger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ModelError&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Code&lt;/span&gt;:    &lt;span style=&#34;color:#ae81ff&#34;&gt;3000&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Message&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Internal error. Store failed&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3-3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;JSON&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;swagger&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonInfo&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Id&lt;/span&gt;:     &lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:   &lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - å®šç¾©ä¾è³´æ³¨å…¥(DI)æ‰€éœ€çš„Usecaseå±¤&lt;/code&gt;: å¦‚ usecase å±¤ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”±æ–¼ digimon ç›¸é—œçš„ Restful API é™¤äº†æœ‰ç”¨åˆ° DigimonUsecaseï¼Œé‚„æœ‰ç”¨åˆ°
DietUsecaseï¼Œæ‰€ä»¥å¿…é ˆéƒ½æ³¨å…¥é€²ä¾†ï¼Œ&lt;code&gt;ä¸¦æ²’æœ‰è¦å®šåªèƒ½æ³¨å…¥digimonç›¸é—œçš„usecase&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - å°‡Serverå¼•æ“ä¸Ÿé€²ä¾†ä¸¦ä¸”è¨­å®š&lt;/code&gt;: é€™è£¡æ¯”è¼ƒç‰¹åˆ¥ï¼Œæ˜¯é€éæŠŠ Golang-Gin çš„ Server å¼•æ“å‚³é€² function å…§ï¼Œå†æŠŠå„å€‹ handler èˆ‡ route äº¤ä»˜(delivery)ç¶å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - é€é&lt;/code&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;&lt;code&gt;ä¾†è§£æå„å€‹HTTPå‚³é&lt;/code&gt;: é€™è£¡çµ‚æ–¼è¦ç”¨åˆ°&lt;a class=&#34;link&#34; href=&#34;https://github.com/swagger-api/swagger-codegen&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;swagger-generator&lt;/a&gt;çš„å¥½è™•ï¼Œå¯ä»¥çœ‹åˆ°ä¸è«–æ˜¯è¼¸å…¥è™•&lt;code&gt;è¬›è§£3-1&lt;/code&gt;ã€å›å‚³éŒ¯èª¤è™•&lt;code&gt;è¬›è§£3-2&lt;/code&gt;ã€æˆåŠŸå›å‚³è™•&lt;code&gt;è¬›è§£3-3&lt;/code&gt;éƒ½å¯ä»¥é€é&lt;code&gt;swagger.å®šç¾©å¥½çš„ä»‹é¢&lt;/code&gt;ä¾†è§£æã€‚é€™æ¨£å°±çœå»äº†å¾ˆå¤šå®šç¾©æ™‚é–“ï¼Œä¸¦ä¸”ä¹Ÿæ¸›å°‘äº†å¾ˆå¤šå®šç¾©ä¸å°å¿ƒå¯«éŒ¯çš„å¯èƒ½æ€§ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æœ€å¾ŒæŠŠä¸€åˆ‡é€é&#34;&gt;æœ€å¾Œï¼ŒæŠŠä¸€åˆ‡é€é
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;cmd/main.go&lt;/code&gt; è·‘èµ·ä¾†å§ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Info&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;HTTP server started&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;restfulHost&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;viper&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RESTFUL_HOST&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;restfulPort&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;viper&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;RESTFUL_PORT&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbHost&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;viper&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DB_HOST&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbDatabase&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;viper&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DB_DATABASE&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbUser&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;viper&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DB_USER&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dbPassword&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;viper&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetString&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;DB_PASSWORD&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sql&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Open&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;postgres&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;fmt&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Sprintf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;host=%s user=%s password=%s dbname=%s sslmode=disable&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;dbHost&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;dbUser&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;dbPassword&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;dbDatabase&lt;/span&gt;),
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fatal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; = &lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Ping&lt;/span&gt;(); &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fatal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_digmonRepo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewpostgresqlDigimonRepository&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dietRepo&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_dietRepo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewPostgresqlDietRepository&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£4 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_digimonUsecase&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewDigimonUsecase&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonRepo&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;dietUsecase&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;_dietUsecase&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewDietUsecase&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;dietRepo&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£5 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;_digimonHandlerHttpDelivery&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewDigimonHandler&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonUsecase&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;dietUsecase&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£6 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;logrus&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fatal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;restfulHost&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;:&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;restfulPort&lt;/span&gt;))
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¯«äº†é‚£éº¼å¤šä¾è³´æ³¨å…¥(DI)ï¼Œæœ€å¾Œæˆ‘å€‘éœ€è¦å†&lt;code&gt;main.go&lt;/code&gt;çœŸçš„å°‡é€™äº›å¯¦é«”æ³¨å…¥ï¼Œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - å°‡configå¾å¤–éƒ¨ä¾è³´æ³¨å…¥(DI)&lt;/code&gt;: æˆ‘å€‘çµ±ä¸€ç”± main.go ä¾†è®€å– configï¼Œå› ç‚ºé€™å€‹ config æ˜¯&lt;code&gt;å¤–éƒ¨&lt;/code&gt;çš„ï¼Œä¸è©²ç›´æ¥å¯«åœ¨å„å±¤è£¡é ­ï¼Œä¸ç„¶æˆ‘å€‘å¾ˆé›£çŸ¥é“æ­¤å±¤åˆ°åº•ç”¨äº†å“ªäº› configï¼Œä»¥é¿å…ï¼šã€Œå—¯å—¯ï¼Ÿï¼æ€éº¼çˆ†ç‚¸äº†(æŸ¥äº† 3 å€‹å°æ™‚å¾Œ)ï¼Œå–” damn é€™å±¤åŸä¾†æœ‰è¦ç”¨é€™å€‹ config å–” Q å£ Qï¼ã€çš„ç‹€æ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - åˆå§‹åŒ–DB&lt;/code&gt;: å‡¡&lt;code&gt;å¤–éƒ¨&lt;/code&gt;ä¾è³´çš„æ±è¥¿ï¼Œéƒ½åœ¨ main.go ä¸­å®Œæˆï¼Œä¸è©²åœ¨å„å±¤ä¸­å®Œæˆï¼Œä»¥é¿å…ä¸çŸ¥é“èª°å·²ç¶“åˆå§‹åŒ–äº†èª°é‚„æ²’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - å°‡å¤–éƒ¨ä¾è³´é€éä¾è³´æ³¨å…¥(DI)ä¾†æ³¨å…¥Repositoryå±¤&lt;/code&gt;: ä¹Ÿæ˜¯å› ç‚º&lt;code&gt;å¤–éƒ¨&lt;/code&gt;çš„é—œä¿‚ï¼Œæˆ‘å€‘ä¹Ÿè©²å°‡ DB å¾å¤–éƒ¨æ³¨å…¥ï¼Œæˆ‘å€‘å¯ä»¥æ›´å¯è¦–æ­¤ DB è¢«å“ªäº› repository å±¤ä½¿ç”¨äº†ã€‚é™¤äº† DB ä»¥å¤–å…¶ä»– Microservice çš„ callerã€NoSQL éƒ½è©²ç”±å¤–éƒ¨æ³¨å…¥ï¼Œä»¥ä¾¿å¯è¦–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£4 - å°‡Repositoryå±¤é€éä¾è³´æ³¨å…¥(DI)ä¾†æ³¨å…¥Usecaseå±¤&lt;/code&gt;: åŒ&lt;code&gt;è¬›è§£3&lt;/code&gt;ï¼Œå° usecase å±¤ä¾†èªª repository å±¤ä¹Ÿæ˜¯å¤–éƒ¨ä¾è³´ï¼Œæ³¨å…¥ä¸‹å»ï¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£5 - å°‡Usecaseå±¤é€éä¾è³´æ³¨å…¥(DI)ä¾†æ³¨å…¥Deliveryå±¤&lt;/code&gt;: é€™è£¡è¦æ³¨æ„ï¼Œé™¤äº†æ³¨å…¥ä»¥å¤–ï¼Œé‚„æœ‰å°‡ Golang-Gin çš„å¼•æ“ä¸Ÿå…¥ï¼Œè®“ delivery å±¤ä¾†ç¶å®šã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£ 6 - å°‡Golang-Ginè·‘èµ·ä¾†ï¼&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€²å…¥åˆ°æˆ‘å€‘ DAY07 è³‡æ–™å¤¾åº•ä¸‹ï¼Œä½¿ç”¨ docker-compose æŠŠ Golang-Server èˆ‡
DB è·‘èµ·ä¾†å§ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY07
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ docker-compose up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/s42lh1p.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/s42lh1p.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Work!&lt;/p&gt;
&lt;h2 id=&#34;é€éinsomnia-designerhttpsinsomniarestproductsdesigneræ¸¬è©¦ä¸€ä¸‹&#34;&gt;é€é&lt;a class=&#34;link&#34; href=&#34;https://insomnia.rest/products/designer/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Insomnia Designer&lt;/a&gt;æ¸¬è©¦ä¸€ä¸‹
&lt;/h2&gt;&lt;p&gt;å‰µå»ºæ•¸ç¢¼è›‹ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/6mrhFsX.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/6mrhFsX.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æ•¸ç¢¼è›‹ç‹€æ…‹ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/T0osPBU.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/T0osPBU.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åŸ¹è‚²æ•¸ç¢¼ç¸ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/DWNakcv.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/DWNakcv.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰å®‰è£&lt;a class=&#34;link&#34; href=&#34;https://eggerapps.at/postico/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Postico&lt;/a&gt;ï¼Œå¯ä»¥å»çœ‹çœ‹ diets table
æ˜¯ä¸æ˜¯çœŸçš„æœ‰åƒäº†é£Ÿç‰©ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/jdfwHFc.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/jdfwHFc.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å—¯ï¼æ»¿æ»¿çš„è˜‹æœï¼Œçœ‹æˆ‘é‚„ä¸é£½ç‚¸ä½ ï¼Œäºå¤ç¸ XD ï½&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/ZKDEbdn.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/ZKDEbdn.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/bxcodec/go-clean-arch&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bxcodec/go-clean-arch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/hackernoon/golang-clean-archithecture-efd6d7c43047&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Trying
Clean Architecture on Golang&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E5%AD%B8%E7%BF%92%E5%9C%B0%E5%9C%96-4ff33ef11bd44782bb13d1fe746f4620/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E5%AD%B8%E7%BF%92%E5%9C%B0%E5%9C%96-4ff33ef11bd44782bb13d1fe746f4620/</guid>
        <description>&lt;h1 id=&#34;å­¸ç¿’åœ°åœ–&#34;&gt;å­¸ç¿’åœ°åœ–
&lt;/h1&gt;&lt;p&gt;Tags: éš¨ç­†
Date: February 1, 2024&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://miro.com/app/live-embed/uXjVM0yqIS0=/?moveToViewport=-2256,-1111,4633,2577&amp;amp;embedId=364798369319&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://miro.com/app/live-embed/uXjVM0yqIS0=/?moveToViewport=-2256,-1111,4633,2577&amp;amp;embedId=364798369319&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;$$
\Large\textsf{ç¨‹å¼é€šç”¨}
$$&lt;/p&gt;
&lt;h2 id=&#34;ç¨‹å¼èªè¨€&#34;&gt;ğŸ‡Â ç¨‹å¼èªè¨€
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;JavaScript &amp;amp; Node.js&lt;/li&gt;
&lt;li&gt;Rust
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Rust%20%E9%9A%A8%E7%AD%86%20e69468ae63bd4546a6b76a5f908a65b5/rust%20trait%28%E7%89%B9%E5%BE%B5%29%E8%B7%9Fjava%20interface%28%E4%BB%8B%E9%9D%A2%29%E7%9A%84%E5%B7%AE%E7%95%B0%2031ce661b33554ee18c978eaac795e6eb.md&#34; &gt;rust trait(ç‰¹å¾µ)è·Ÿjava interface(ä»‹é¢)çš„å·®ç•°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è¨­è¨ˆæ¨¡å¼&#34;&gt;ğŸ¥¥Â è¨­è¨ˆæ¨¡å¼
&lt;/h2&gt;&lt;h3 id=&#34;hey-go-design-patterns&#34;&gt;Hey! Go Design Patterns
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;DAY 1ï¼šHey! Go Design Patterns: &lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10260929&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ithelp.ithome.com.tw/articles/10260929&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ•¸æ“šçµæ§‹èˆ‡æ¼”ç®—æ³•&#34;&gt;ğŸˆÂ æ•¸æ“šçµæ§‹èˆ‡æ¼”ç®—æ³•
&lt;/h2&gt;&lt;h3 id=&#34;sortset&#34;&gt;SortSet
&lt;/h3&gt;&lt;h3 id=&#34;priorityqueue&#34;&gt;PriorityQueue
&lt;/h3&gt;&lt;h3 id=&#34;buildheap&#34;&gt;BuildHeap
&lt;/h3&gt;&lt;h3 id=&#34;minimum-waiting-timealgo20e99aa8e7ad862086f57ecd943b4daf81a556fa59191f0ealgoexpert-minimum-waiting-time2033a9bc6a5925436ab92d22beba5b2bbfmd&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/algoexpert-minimum-waiting-time%2033a9bc6a5925436ab92d22beba5b2bbf.md&#34; &gt;minimum-waiting-time&lt;/a&gt;
&lt;/h3&gt;&lt;h3 id=&#34;class-photosalgo20e99aa8e7ad862086f57ecd943b4daf81a556fa59191f0ealgoexpert-class-photos202c7196856ba04789a9b82a4af2f87c55md&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/algoexpert-class-photos%202c7196856ba04789a9b82a4af2f87c55.md&#34; &gt;class-photos&lt;/a&gt;
&lt;/h3&gt;&lt;h3 id=&#34;tower-of-hanoi&#34;&gt;Tower of Hanoi
&lt;/h3&gt;&lt;h3 id=&#34;ones-complement-twos-complement&#34;&gt;one&amp;rsquo;s complement, two&amp;rsquo;s complement
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://noob.tw/complements/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://noob.tw/complements/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;one&amp;rsquo;s complement: æ­£èˆ‡è² ç¯„åœçš„çµ•å°å€¼ç›¸åŒï¼Œæœƒç”¢ç”Ÿ-0çš„ç¾è±¡&lt;/li&gt;
&lt;li&gt;two&amp;rsquo;s complement: æ­£èˆ‡è² ç¯„åœçš„çµ•å°å€¼ä¸åŒï¼Œæ­£å¾0é–‹å§‹ï¼Œè² å¾-1é–‹å§‹ï¼Œé€™ä¹Ÿä½¿å¾—è² æ•¸èˆ‡æ­£æ•¸æœ€å¤§çš„çµ•å°å€¼ä¸åŒï¼Œè² æ•¸æœƒæ¯”æ­£æ•¸å¤§1 (e.g.  -128 ~ -1 ~ +0 ~ +127)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ·é¡Œ&#34;&gt;åˆ·é¡Œ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;grind169&lt;/li&gt;
&lt;li&gt;neetcode&lt;/li&gt;
&lt;li&gt;algoexpert&lt;/li&gt;
&lt;li&gt;Golang Leetcode åˆ·é¡Œç­†è¨˜: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/EaDLaLy3YjrNiSoNofwMMA&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/EaDLaLy3YjrNiSoNofwMMA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;Algo%20%E9%9A%A8%E7%AD%86%2086f57ecd943b4daf81a556fa59191f0e/0283-move%20zeros%207d51da3409874d968872f8b3cf8b139c.md&#34; &gt;283. Move Zeros&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;è³‡æ–™çµæ§‹&#34;&gt;è³‡æ–™çµæ§‹
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Arrayèˆ‡Listçš„å·®ç•°: &lt;a class=&#34;link&#34; href=&#34;http://sharecoder.blogspot.com/2012/10/arraylist.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://sharecoder.blogspot.com/2012/10/arraylist.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;B+æ¨¹è·Ÿç´…é»‘æ¨¹å“ªå€‹æœå°‹é€Ÿåº¦æ›´å¿«ï¼Ÿ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;Take&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;this&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;with&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;pinch&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;of&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;salt&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœåœ¨ç¡¬ç¢Ÿé€™ç¨®æ…¢é€ŸIOçš„è¼‰é«”ä¸Šï¼Œå»ºè­°ä½¿ç”¨Bæ¨¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;B&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;tree&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;when&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;you&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;re&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;managing&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;more&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;than&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;thousands&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;of&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;items&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;and&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;you&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;re&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;paging&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;them&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;from&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;a&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;disk&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;or&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;some&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;slow&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;storage&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;medium&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœæ’å…¥ã€åˆªé™¤ã€æª¢ç´¢ç›¸ç•¶é »ç¹ï¼Œå»ºè­°ä½¿ç”¨ç´…é»‘æ¨¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;RB&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;tree&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;when&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;you&lt;/span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&amp;#39;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;re&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;doing&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;fairly&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;frequent&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;inserts&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;deletes&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;and&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;retrievals&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;on&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;the&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;tree&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¦‚æœæ’å…¥ã€åˆªé™¤ç›¸å°æ–¼æª¢ç´¢ä¸é »ç¹æ™‚ï¼Œå»ºè­°ä½¿ç”¨AVLæ¨¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;AVL&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;tree&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;when&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;your&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;inserts&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;and&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;deletes&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;are&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;infrequent&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;relative&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;to&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;your&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;retrievals&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/1589556/when-to-choose-rb-tree-b-tree-or-avl-tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/1589556/when-to-choose-rb-tree-b-tree-or-avl-tree&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/647537/b-tree-faster-than-avl-or-redblack-tree&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/647537/b-tree-faster-than-avl-or-redblack-tree&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://luffy997.github.io/2021/07/29/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E3%80%81%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%E3%80%81%E7%BA%A2%E9%BB%91%E6%A0%91%E3%80%81B-%E6%A0%91%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://luffy997.github.io/2021/07/29/äºŒå‰æœç´¢æ ‘ã€å¹³è¡¡äºŒå‰æ ‘ã€çº¢é»‘æ ‘ã€B-æ ‘æ€§èƒ½å¯¹æ¯”/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æ¼«ç•«åœ–ç‰‡ç†è§£ç´…é»‘æ¨¹: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/0RKuO0Pk7R09wGzgyA43mw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/0RKuO0Pk7R09wGzgyA43mw&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç·šä¸Šå‹•ç•«è§£é‡‹treeçš„æ–°å¢ã€æŸ¥æ‰¾ã€åˆªé™¤: &lt;a class=&#34;link&#34; href=&#34;https://www.cs.usfca.edu/~galles/visualization/Algorithms.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cs.usfca.edu/~galles/visualization/Algorithms.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è³‡æ–™å„²å­˜&#34;&gt;ğŸ‰Â è³‡æ–™å„²å­˜
&lt;/h2&gt;&lt;h3 id=&#34;è³‡æ–™åº«å„²å­˜å¯†ç¢¼&#34;&gt;è³‡æ–™åº«å„²å­˜å¯†ç¢¼
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;base64: å®Œå…¨å®‰å…¨ï¼Œå¯ä»¥ç›´æ¥decode&lt;/li&gt;
&lt;li&gt;encrypt: ä¸å®‰å…¨ï¼Œå¦‚æœå–å¾—ç§é‘°å¯è§£å¯†&lt;/li&gt;
&lt;li&gt;hash: ä¸å®‰å…¨ï¼Œå¯èƒ½æœƒè¢«å½©è™¹è¡¨æ”»æ“Š&lt;/li&gt;
&lt;li&gt;salt+hash: å¤§è‡´å®‰å…¨ï¼Œå¯èƒ½æœƒè¢«è¶…ç´šé›»è…¦æ”»æ“Šï¼Œä½†æ”»æ“Šæˆæœ¬é«˜&lt;/li&gt;
&lt;li&gt;bcrypt: å®‰å…¨ï¼Œå¯å¢åŠ è¶…ç´šé›»è…¦æ”»æ“Šçš„æˆæœ¬ï¼Œä½¿æ”»æ“Šæˆæœ¬éé«˜å°è‡´ç„¡æ³•æ”»æ“Š&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;mysql-è³‡æ–™ç ´ç¢&#34;&gt;MySQL è³‡æ–™ç ´ç¢
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;é•·åº¦å¯è®Šè³‡æ–™æ¬„ä½(varchar æˆ– nvarchar)å°è‡´è³‡æ–™è¡¨ç ´ç¢åš´é‡: &lt;a class=&#34;link&#34; href=&#34;https://dotblogs.azurewebsites.net/rockchang/2017/05/08/110423&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://dotblogs.azurewebsites.net/rockchang/2017/05/08/110423&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mysql-lock&#34;&gt;MySQL Lock
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;MySQL Deadlockæ¡ˆä¾‹: &lt;a class=&#34;link&#34; href=&#34;https://github.com/aneasystone/mysql-deadlocks&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/aneasystone/mysql-deadlocks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Single Query Select &amp;amp; Update: &lt;a class=&#34;link&#34; href=&#34;https://khiav223577.github.io/blog/2019/02/07/%E4%B8%8D%E4%BD%BF%E7%94%A8-lock-%E5%8F%88%E8%A6%81%E9%81%BF%E5%85%8D-race-condition%EF%BC%8C%E5%8F%AF%E8%83%BD%E5%97%8E%EF%BC%9F/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://khiav223577.github.io/blog/2019/02/07/ä¸ä½¿ç”¨-lock-åˆè¦é¿å…-race-conditionï¼Œå¯èƒ½å—ï¼Ÿ/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mysql-æ…¢æŸ¥è©¢&#34;&gt;MySQL æ…¢æŸ¥è©¢
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç¶“å…¸æ¡ˆä¾‹: &lt;a class=&#34;link&#34; href=&#34;https://heapdump.cn/article/5040142&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://heapdump.cn/article/5040142&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mysql-sql-æŒ‡ä»¤&#34;&gt;MySQL SQL æŒ‡ä»¤
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;JOIN &amp;amp; UNION åœ–è§£: &lt;a class=&#34;link&#34; href=&#34;https://sam.webspace.tw/2019/07/11/SQL-JOIN/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://sam.webspace.tw/2019/07/11/SQL-JOIN/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;mysql-ç´¢å¼•&#34;&gt;MySQL ç´¢å¼•
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ç”¨å°é€™äº›å ´æ™¯ä¸‹çš„æ•¸æ“šåº«ç´¢å¼•ï¼Œé ˜å°èªªæˆ‘æœ‰é»æ±è¥¿: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/4K3borSZXt-yc5t5UJnJpQ&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/4K3borSZXt-yc5t5UJnJpQ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å¦‚ä½•å„ªåŒ–mysqlçš„ç¯„åœæŸ¥è©¢: &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/developer/article/1767984&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://cloud.tencent.com/developer/article/1767984&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;äº†è§£MySQLç´¢å¼•çš„BSTã€Balanced BSTã€Bæ¨¹ã€B+æ¨¹åº•å±¤: &lt;a class=&#34;link&#34; href=&#34;https://mark-lin.com/posts/20190911/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mark-lin.com/posts/20190911/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç‚ºä»€éº¼MySQLçš„Innodbä½¿ç”¨B+æ¨¹è€Œä¸æ˜¯ç´…é»‘æ¨¹ä½œç‚ºç´¢å¼•: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s?__biz=MzIwNDAyOTI2Nw==&amp;amp;mid=2247483893&amp;amp;idx=1&amp;amp;sn=6f894a5cc2676073e50bacbdee5e6478&amp;amp;chksm=96c72dc9a1b0a4dfa95600ebf5ad7db9d804afbad6c7396078ab7f85d10c7516d602715172db&amp;amp;token=2074428159&amp;amp;lang=zh_CN#rd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s?__biz=MzIwNDAyOTI2Nw==&amp;amp;mid=2247483893&amp;amp;idx=1&amp;amp;sn=6f894a5cc2676073e50bacbdee5e6478&amp;amp;chksm=96c72dc9a1b0a4dfa95600ebf5ad7db9d804afbad6c7396078ab7f85d10c7516d602715172db&amp;amp;token=2074428159&amp;amp;lang=zh_CN#rd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;sqlåŸºç¤èªæ³•ç·´ç¿’&#34;&gt;SQLåŸºç¤èªæ³•ç·´ç¿’
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.reddit.com/r/SQL/comments/qeuubg/what_is_the_best_way_to_practice_sql/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.reddit.com/r/SQL/comments/qeuubg/what_is_the_best_way_to_practice_sql/&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://sqlbolt.com/lesson/introduction&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://sqlbolt.com/lesson/introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.w3resource.com/mysql-exercises/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.w3resource.com/mysql-exercises/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;redis&#34;&gt;Redis
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ä¸€æ–‡è¬›é€ Redis äº‹å‹™ ï¼ˆäº‹å‹™æ¨¡å¼ VS Lua è…³æœ¬ï¼‰: &lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/makemylife/p/17299566.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/makemylife/p/17299566.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å…ˆæ›´æ–°æ•¸æ“šåº«é‚„æ˜¯å…ˆæ›´æ–°ç·©å­˜ï¼Ÿ: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/SPgtpfgv6bz2AfPa1CYYeQ&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/SPgtpfgv6bz2AfPa1CYYeQ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Luaä¸­æœ‰å¯«æ“ä½œä¸èƒ½ä½¿ç”¨å¸¶éš¨æ©Ÿæ€§è³ªçš„è®€æ“ä½œï¼Œå¦‚TIMEï¼Œéœ€ç”¨redis.replicate_commands()è§£æ±º: &lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/zhaoyongjie-z/p/14313046.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/zhaoyongjie-z/p/14313046.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Redisçš„äº”ç¨®æ•¸æ“šçµæ§‹: &lt;a class=&#34;link&#34; href=&#34;https://pdai.tech/md/db/nosql-redis/db-redis-data-types.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://pdai.tech/md/db/nosql-redis/db-redis-data-types.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç‚ºå•¥ redis ä½¿ç”¨è·³è¡¨(skiplist)è€Œä¸æ˜¯ä½¿ç”¨ red-blackï¼Ÿ: &lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/question/20202931&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.zhihu.com/question/20202931&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;$$
\Large\textsf{å¯¦ä½œæ‡‰ç”¨}
$$&lt;/p&gt;
&lt;h2 id=&#34;åˆ†å¸ƒå¼æœå‹™&#34;&gt;ğŸ‹Â åˆ†å¸ƒå¼æœå‹™
&lt;/h2&gt;&lt;h3 id=&#34;outbox-pattern&#34;&gt;OutBox Pattern
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://microservices.io/patterns/data/transactional-outbox.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://microservices.io/patterns/data/transactional-outbox.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/skyler-record/%E5%BE%AE%E6%9C%8D%E5%8B%99%E6%9E%B6%E7%9A%84%E8%B3%87%E6%96%99%E4%B8%80%E8%87%B4%E6%80%A7-2-outbox-pattern-891512620453&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://medium.com/skyler-record/å¾®æœå‹™æ¶çš„è³‡æ–™ä¸€è‡´æ€§-2-outbox-pattern-891512620453&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;docker&#34;&gt;Docker
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Dockerå¾å…¥é–€åˆ°å¹²æ´»ï¼Œçœ‹é€™ä¸€ç¯‡è¶³çŸ£: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/YlcvlUQ-xkz25PuYkeEQqw&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/YlcvlUQ-xkz25PuYkeEQqw&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;åˆ†ä½ˆå¼äº‹å‹™&#34;&gt;åˆ†ä½ˆå¼äº‹å‹™
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;ä»€éº¼æ˜¯åˆ†ä½ˆå¼äº‹å‹™: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/_56jq_p_nDUiBwaI2MTlmA&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/_56jq_p_nDUiBwaI2MTlmA&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é©—è­‰&#34;&gt;é©—è­‰
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;JWT:
&lt;ul&gt;
&lt;li&gt;åŸºæ–¼ JWT + Refresh Token çš„ç”¨æˆ¶èªè­‰å¯¦è¸: &lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/52300092&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zhuanlan.zhihu.com/p/52300092&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Why Does OAuth v2 Have Both Access and Refresh Tokens?: &lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/3487991/why-does-oauth-v2-have-both-access-and-refresh-tokens&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://stackoverflow.com/questions/3487991/why-does-oauth-v2-have-both-access-and-refresh-tokens&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;OAuth 2.0 Token Exchange: &lt;a class=&#34;link&#34; href=&#34;https://datatracker.ietf.org/doc/html/rfc8693&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://datatracker.ietf.org/doc/html/rfc8693&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å®‰å…¨æ€§:
&lt;ul&gt;
&lt;li&gt;é›¶åŸºç¤è³‡å®‰ç³»åˆ—ï¼ˆä¸€ï¼‰-èªè­˜ CSRFï¼ˆCross Site Request Forgeryï¼‰: &lt;a class=&#34;link&#34; href=&#34;https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-request-forgery/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-request-forgery/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;é›¶åŸºç¤è³‡å®‰ç³»åˆ—ï¼ˆäºŒï¼‰-èªè­˜ XSSï¼ˆCross-Site Scriptingï¼‰: &lt;a class=&#34;link&#34; href=&#34;https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-scripting/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://tech-blog.cymetrics.io/posts/jo/zerobased-cross-site-scripting/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;é›¶åŸºç¤è³‡å®‰ç³»åˆ—ï¼ˆä¸‰ï¼‰-ç¶²ç«™å®‰å…¨ä¸‰æœ¬æŸ±ï¼ˆSecure &amp;amp; SameSite &amp;amp; HttpOnlyï¼‰: &lt;a class=&#34;link&#34; href=&#34;https://tech-blog.cymetrics.io/posts/jo/zerobased-secure-samesite-httponly/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://tech-blog.cymetrics.io/posts/jo/zerobased-secure-samesite-httponly/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç•¶ç€è¦½å™¨å…¨é¢åœç”¨ä¸‰æ–¹ Cookie: &lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/131256002&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zhuanlan.zhihu.com/p/131256002&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;é™æµ&#34;&gt;é™æµ
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;é™æµç¨®é¡:
&lt;ul&gt;
&lt;li&gt;ä»¤ç‰Œæ¡¶(token bucket)&lt;/li&gt;
&lt;li&gt;æ¼æ¡¶æ³•(leaky bucket)
&lt;ul&gt;
&lt;li&gt;æ†å®šé€Ÿè·¯æ‹¿å–tokençš„æ–¹å¼å°æ–¼redisä¾†èªªä¸å¥½å¯¦ä½œï¼Œå¯ç”¨GCRAçš„æ–¹å¼å¯¦ä½œ
&lt;ul&gt;
&lt;li&gt;åŸç†:
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://smarketshq.com/implementing-gcra-in-python-5df1f11aaa96&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://smarketshq.com/implementing-gcra-in-python-5df1f11aaa96&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://devpress.csdn.net/redis/62f4b93e7e66823466188869.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://devpress.csdn.net/redis/62f4b93e7e66823466188869.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;rediså¯¦ä½œ: &lt;a class=&#34;link&#34; href=&#34;https://github.com/brandur/redis-cell&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/brandur/redis-cell&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;å›ºå®šçª—å£æ³•(fixed window)&lt;/li&gt;
&lt;li&gt;æ»‘å‹•æ—¥åˆ¶æ³•(sliding log)&lt;/li&gt;
&lt;li&gt;æ»‘å‹•çª—å£æ³•(sliding window)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;é™æµæ¦‚å¿µ: &lt;a class=&#34;link&#34; href=&#34;https://guanhonly.github.io/2020/05/30/distributed-rate-limiter/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://guanhonly.github.io/2020/05/30/distributed-rate-limiter/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;redis é™æµå¯¦ä½œ: &lt;a class=&#34;link&#34; href=&#34;https://yuanchieh.page/posts/2020/2020-10-18-%E4%BD%BF%E7%94%A8-redis-%E7%95%B6%E4%BD%9C-api-rate-limit-%E7%9A%84%E4%B8%89%E7%A8%AE%E6%96%B9%E6%B3%95/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://yuanchieh.page/posts/2020/2020-10-18-ä½¿ç”¨-redis-ç•¶ä½œ-api-rate-limit-çš„ä¸‰ç¨®æ–¹æ³•/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;redis 5ç¨®é™æµå¯¦ä½œ: &lt;a class=&#34;link&#34; href=&#34;https://medium.com/@SaiRahulAkarapu/rate-limiting-algorithms-using-redis-eb4427b47e33&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://medium.com/@SaiRahulAkarapu/rate-limiting-algorithms-using-redis-eb4427b47e33&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;token bucketå¯¦ä½œæœ‰é»å•é¡Œï¼Œå°è‡´å¯¦ä½œçµæœèˆ‡fixed windowæ˜¯ä¸€æ¨£çš„&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Golang token bucketå¯¦ä½œ: &lt;a class=&#34;link&#34; href=&#34;https://himanshu-007.medium.com/simple-rate-limiter-in-golang-using-token-bucket-algorithm-388d0596d1e4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://himanshu-007.medium.com/simple-rate-limiter-in-golang-using-token-bucket-algorithm-388d0596d1e4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç†”æ–·&#34;&gt;ç†”æ–·
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å„„ç´šæµé‡ç¶²é—œè¨­è¨ˆæ€è·¯ï¼Œå­¸åˆ°äº†: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/J0aSVry1-Ss1OTA-jQAX3w&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/J0aSVry1-Ss1OTA-jQAX3w&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç°¡å–®ç†è§£å¾®æœå‹™é™æµã€é™ç´šã€ç†”æ–·: &lt;a class=&#34;link&#34; href=&#34;https://juejin.cn/post/7150278137044008990&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://juejin.cn/post/7150278137044008990&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä¸­é–“ä»¶&#34;&gt;ä¸­é–“ä»¶
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Kafka:
&lt;ul&gt;
&lt;li&gt;å¾é¢è©¦è§’åº¦ä¸€æ–‡å­¸å®Œ Kafka: &lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s/o-rqnOH4FHeHaz0VqoHnFg&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s/o-rqnOH4FHeHaz0VqoHnFg&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Kafkaè©³è§£ç³»åˆ—æ–‡:
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247488812&amp;amp;idx=1&amp;amp;sn=1e23afce50441bcf594c001f0965306b&amp;amp;chksm=fc78ca00cb0f4316e4c8583b84556c62574b50adaa8511d932459396944e9babeee9d141086b&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247488812&amp;amp;idx=1&amp;amp;sn=1e23afce50441bcf594c001f0965306b&amp;amp;chksm=fc78ca00cb0f4316e4c8583b84556c62574b50adaa8511d932459396944e9babeee9d141086b&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247490102&amp;amp;idx=1&amp;amp;sn=68d55b3c5ac74038c76d6837b862a11c&amp;amp;chksm=fc78c51acb0f4c0cd5a1d6ceedb9948f82d48791ab789e9edfd6e83e34fbad1ace5749bee203&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247490102&amp;amp;idx=1&amp;amp;sn=68d55b3c5ac74038c76d6837b862a11c&amp;amp;chksm=fc78c51acb0f4c0cd5a1d6ceedb9948f82d48791ab789e9edfd6e83e34fbad1ace5749bee203&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247491055&amp;amp;idx=1&amp;amp;sn=14bc485f91ec2629cc9e8bf7a36ad8f4&amp;amp;chksm=fc78c2c3cb0f4bd566d5ca2534805839420ad3dc67210bc8f2b7ef05283785b02b8ddef640a8&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247491055&amp;amp;idx=1&amp;amp;sn=14bc485f91ec2629cc9e8bf7a36ad8f4&amp;amp;chksm=fc78c2c3cb0f4bd566d5ca2534805839420ad3dc67210bc8f2b7ef05283785b02b8ddef640a8&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247491168&amp;amp;idx=1&amp;amp;sn=bd37f96692b3f7cecdaf3172abdb7a8c&amp;amp;chksm=fc78c14ccb0f485a451f70c7ffbf5b05d0f500dfef6321703e7cdebdc0de902d9d77a547d469&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247491168&amp;amp;idx=1&amp;amp;sn=bd37f96692b3f7cecdaf3172abdb7a8c&amp;amp;chksm=fc78c14ccb0f485a451f70c7ffbf5b05d0f500dfef6321703e7cdebdc0de902d9d77a547d469&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247491507&amp;amp;idx=1&amp;amp;sn=f1bec356c94cd0101809dc11dcf27ba2&amp;amp;chksm=fc78c09fcb0f49898f6cc9b80499aeb871a80f95ab4fbe12c32567cab6a3521a6c33b61dd807&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://mp.weixin.qq.com/s?__biz=MzU2MTM4NDAwMw==&amp;amp;mid=2247491507&amp;amp;idx=1&amp;amp;sn=f1bec356c94cd0101809dc11dcf27ba2&amp;amp;chksm=fc78c09fcb0f49898f6cc9b80499aeb871a80f95ab4fbe12c32567cab6a3521a6c33b61dd807&amp;amp;scene=178&amp;amp;cur_album_id=1763234202604388353#rd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æˆ‘æ˜¯å¦‚ä½•å°‡ä¸€å€‹è€ç³»çµ±çš„kafkaæ¶ˆè²»è€…æœå‹™çš„æ€§èƒ½æå‡è¿‘ç™¾å€çš„: &lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/softwarearch/p/16443128.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/softwarearch/p/16443128.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¸¬è©¦&#34;&gt;ğŸŒÂ æ¸¬è©¦
&lt;/h2&gt;&lt;h3 id=&#34;æ¸¬è©¦æ¡†æ¶æˆ–å¥—ä»¶çš„é¸æ“‡test20e99aa8e7ad8620ae63acd045944c3a8c066c250be40b33e6b8ace8a9a6e6a186e69eb6e68896e5a597e4bbb6e79a84e981b8e693872062a527aee9e04c9e814583a902bfd953md&#34;&gt;&lt;a class=&#34;link&#34; href=&#34;Test%20%E9%9A%A8%E7%AD%86%20ae63acd045944c3a8c066c250be40b33/%E6%B8%AC%E8%A9%A6%E6%A1%86%E6%9E%B6%E6%88%96%E5%A5%97%E4%BB%B6%E7%9A%84%E9%81%B8%E6%93%87%2062a527aee9e04c9e814583a902bfd953.md&#34; &gt;æ¸¬è©¦æ¡†æ¶æˆ–å¥—ä»¶çš„é¸æ“‡&lt;/a&gt;
&lt;/h3&gt;&lt;h2 id=&#34;å‰ç«¯&#34;&gt;ğŸ«Â å‰ç«¯
&lt;/h2&gt;&lt;h2 id=&#34;é‹ç¶­&#34;&gt;ğŸ¥•Â é‹ç¶­
&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;$$
\Large\textsf{å¯¦ä½œ}
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äº¤æ˜“ç³»çµ±
&lt;ul&gt;
&lt;li&gt;æ’®åˆå¼•æ“:
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://himanshu-007.medium.com/simple-rate-limiter-in-golang-using-token-bucket-algorithm-388d0596d1e4&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://himanshu-007.medium.com/simple-rate-limiter-in-golang-using-token-bucket-algorithm-388d0596d1e4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/yzimhao/trading_engine&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/yzimhao/trading_engine&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;ç›¸é—œä»‹ç´¹: &lt;a class=&#34;link&#34; href=&#34;https://yzimhao.github.io/trading_engine/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://yzimhao.github.io/trading_engine/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/stingbo/gome&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/stingbo/gome&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;ç›¸é—œä»‹ç´¹: &lt;a class=&#34;link&#34; href=&#34;https://www.cnblogs.com/stingbo/p/14259539.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.cnblogs.com/stingbo/p/14259539.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/gitbitex/gitbitex-spot&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/gitbitex/gitbitex-spot&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;è¡ä¼¸å¼•æ“(åŸºæ–¼Javaå¯¦ä½œ): &lt;a class=&#34;link&#34; href=&#34;https://github.com/gitbitex/gitbitex-new&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/gitbitex/gitbitex-new&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/xiiiew/lightning-engine&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/xiiiew/lightning-engine&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;æ’®åˆå¼•æ“ç·©å­˜èˆ‡MQæ¦‚å¿µ: &lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/95033793&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zhuanlan.zhihu.com/p/95033793&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;æ’®åˆå¼•æ“æ ¸å¿ƒæ¦‚å¿µ: &lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/92274215&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zhuanlan.zhihu.com/p/92274215&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è­‰åˆ¸äº¤æ˜“ç³»çµ±æ’®åˆå¼•æ“çš„è¨­è¨ˆ: &lt;a class=&#34;link&#34; href=&#34;https://www.liaoxuefeng.com/article/1452011784503329&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.liaoxuefeng.com/article/1452011784503329&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;è­‰åˆ¸äº¤æ˜“ç³»çµ±è¨­è¨ˆèˆ‡é–‹ç™¼: &lt;a class=&#34;link&#34; href=&#34;https://www.liaoxuefeng.com/article/1185272483766752&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.liaoxuefeng.com/article/1185272483766752&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;äº¤æ˜“ç³»çµ±æ¶æ§‹æ¼”é€²ä¹‹è·¯ï¼ˆä¸€ï¼‰ï¼š1.0ç‰ˆ: &lt;a class=&#34;link&#34; href=&#34;https://juejin.cn/post/6900444689628037133&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://juejin.cn/post/6900444689628037133&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥çœ‹çœ‹ä»–ç³»åˆ—æ–‡æ¼”é€²çš„æ€è·¯&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¥¨å·ç³»çµ±
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://segmentfault.com/a/1190000022566350?fbclid=IwAR1TbX7lbN0AKpvIXpWIo2a2iE_dlyUUM37oJP4wahPnBe-5S_jTvvKS5yc&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://segmentfault.com/a/1190000022566350?fbclid=IwAR1TbX7lbN0AKpvIXpWIo2a2iE_dlyUUM37oJP4wahPnBe-5S_jTvvKS5yc&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;$$
\Large\textsf{æ•ˆç‡å·¥å…·}
$$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ–å½¢å·¥å…·
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://mermaid.js.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mermaid&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;Week28 - è®“ä½ å¿ƒè£¡çš„é‚è¼¯å…·ç¾åŒ–çš„å¿µèƒ½åŠ›å·¥å…· Mermaid: &lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10234553&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://ithelp.ithome.com.tw/articles/10234553&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://miro.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;miro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.figma.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;figma&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9C%9F%E7%9A%84%E6%9C%89%E9%82%A3%E9%BA%BC%E5%A5%BD%E4%BD%A0%E7%9A%84-backend-%E6%9C%89%E9%9C%80%E8%A6%81%E9%80%B2%E5%8C%96%E6%88%90%E4%BB%96%E5%97%8E-47215b6b91994f289bf281114562ea48/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9C%9F%E7%9A%84%E6%9C%89%E9%82%A3%E9%BA%BC%E5%A5%BD%E4%BD%A0%E7%9A%84-backend-%E6%9C%89%E9%9C%80%E8%A6%81%E9%80%B2%E5%8C%96%E6%88%90%E4%BB%96%E5%97%8E-47215b6b91994f289bf281114562ea48/</guid>
        <description>&lt;h1 id=&#34;å¾®æœå‹™çœŸçš„æœ‰é‚£éº¼å¥½ä½ çš„-backend-æœ‰éœ€è¦é€²åŒ–æˆä»–å—&#34;&gt;å¾®æœå‹™çœŸçš„æœ‰é‚£éº¼å¥½ï¼Ÿä½ çš„ Backend æœ‰éœ€è¦é€²åŒ–æˆä»–å—ï¼Ÿ
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 16, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY02&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day2-%E5%BE%AE%E6%9C%8D%E5%8B%99%E7%9C%9F%E7%9A%84%E6%9C%89%E9%82%A3%E9%BA%BC%E5%A5%BD-%E4%BD%A0%E7%9A%84-backend-%E6%9C%89%E9%9C%80%E8%A6%81%E9%80%B2%E5%8C%96%E6%88%90%E4%BB%96%E5%97%8E-13b801ecc7f2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10237712&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;è¿‘å¹´ä¾†å¾®æœå‹™å·²ç¶“è¢«è¨±å¤šå…¬å¸å¦‚ Googleã€Facebookã€Netflix
æ¡ç”¨ï¼Œä»–åˆ°åº•è§£æ±ºäº†ä»€éº¼å–®é«”å¼æœå‹™ç„¡æ³•è§£æ±ºçš„å•é¡Œå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å–®é«”å¼monolithicçš„å„ªç¼ºé»&#34;&gt;å–®é«”å¼(Monolithic)çš„å„ªç¼ºé»
&lt;/h2&gt;&lt;p&gt;å„ªé»:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•´é«” Backend è¨­è¨ˆç°¡å–®ï¼Œè¦å¯¦è¸çš„åŠŸèƒ½å…¨éƒ¨éƒ½åœ¨ä¸€å€‹ Service
è£¡ï¼Œè€Œä¸ç”¨æ€è€ƒèˆ‡å…¶ä»–å¾®æœå‹™äº¤äº’&lt;/li&gt;
&lt;li&gt;å¾ˆå¥½æ•´åˆæ¸¬è©¦ï¼Œå› ç‚ºæ¸¬è©¦ä¸éœ€è¦è€ƒæ…®èˆ‡å…¶ä»–å¾®æœå‹™äº¤äº’ï¼Œä½ åªè¦é‡å°æ­¤
Service å°±å¥½äº†&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¼ºé»:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç•¶é‚è¼¯é–‹å§‹é¾å¤§è¤‡é›œèµ·ä¾†ï¼Œæ›´æ”¹åŠŸèƒ½å°±è®Šå¾—åƒé›£è¬é›£&lt;/li&gt;
&lt;li&gt;ä¸èƒ½ç¨ç«‹ Scaling ç‰¹å®šåŠŸèƒ½ï¼Œè¦ Scaling å°±æ˜¯æ‰€æœ‰åŠŸèƒ½ä¸€èµ·&lt;/li&gt;
&lt;li&gt;å°æ–¼èªè¨€çš„ä¾è³´æœƒéå¸¸çš„é«˜&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¾®æœå‹™microserviceçš„å„ªç¼ºé»&#34;&gt;å¾®æœå‹™(Microservice)çš„å„ªç¼ºé»
&lt;/h2&gt;&lt;p&gt;å„ªé»:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŠŸèƒ½å–®ç´”ï¼Œä¸æœƒç”¢ç”Ÿä¸€å€‹ Service
æœ‰&lt;code&gt;æœƒå“¡åŠŸèƒ½&lt;/code&gt;åˆæœ‰&lt;code&gt;èŠå¤©åŠŸèƒ½&lt;/code&gt;çš„ç¾è±¡&lt;/li&gt;
&lt;li&gt;æ˜“æ–¼ Scalingï¼Œéœ€è¦å¼·åŒ–&lt;code&gt;èŠå¤©åŠŸèƒ½&lt;/code&gt;æ™‚å°±é‡å°èŠå¤© Service
Scaling å³å¯&lt;/li&gt;
&lt;li&gt;èªè¨€çš„ä¾è³´æ¥µä½ï¼Œåœ˜éšŠå¯ä¾ç…§å°ˆæ¡ˆçš„éœ€æ±‚é¸æ“‡èªè¨€ï¼Œåªè¦æ¯å€‹å¾®æœå‹™ä¹‹é–“çš„æºé€šæœ‰å®šç¾©å¥½å³å¯&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¼ºé»:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•´é«” Backend
è¨­è¨ˆè¤‡é›œï¼Œä¸€å€‹å•é¡Œå‡ºéŒ¯ä½ å¿…é ˆè€ƒæ…®å¤šå€‹å¾®æœå‹™äº¤äº’çš„å•é¡Œ&lt;/li&gt;
&lt;li&gt;æ•´åˆæ¸¬è©¦å›°é›£ï¼Œæ¸¬è©¦æ­¤ç‚ºæœå‹™å¿…é ˆè€ƒé‡åˆ°æ‰€æœ‰ç›¸é—œçš„å¾®æœå‹™é€£æ¥&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;æˆ‘å€‘ç™¼ç¾ï¼Œå…¶å¯¦å–®é«”å¼èˆ‡å¾®æœå‹™ä¿æœ‰çš„å„ªç¼ºé»å‰›å¥½æ˜¯ç›¸åçš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;èˆ‰å€‹ä¾‹å­&#34;&gt;èˆ‰å€‹ä¾‹å­
&lt;/h2&gt;&lt;p&gt;å¦‚æœæˆ‘å€‘è¦è¨­è¨ˆä¸€å€‹&lt;code&gt;ç™»å…¥æ•¸ç¢¼ä¸–ç•Œçš„æœƒå“¡ç³»çµ±&lt;/code&gt;ï¼Œæœƒéœ€è¦ä»€éº¼å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¶è¨­ Restful API Serviceï¼Œä¾‹å¦‚: &lt;a class=&#34;link&#34; href=&#34;https://github.com/gin-gonic/gin&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go-gin&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;RDBMS å„²å­˜æœƒå“¡è³‡æ–™ï¼Œä¾‹å¦‚: Postgresql&lt;/li&gt;
&lt;li&gt;Cache System ä¾†å„²å­˜ Sessionï¼Œä¾‹å¦‚: Redis&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘å€‘å¾ˆè‡ªç„¶è€Œç„¶çš„å°±æœƒå°‡ Service å¦‚ä¸‹åœ–é€²è¡Œ MVC çš„åˆ†å±¤ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Y21ZITn.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/Y21ZITn.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä½†é€™å€‹æ™‚å€™å¦‚æœè¦åŠ å…¥ä¸€å€‹&lt;code&gt;åœ¨ç™»å…¥é é¢æœƒé¡¯ç¤ºçš„çœŸäººå°çª—å¹«æ‰‹&lt;/code&gt;å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/EpYF0lT.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/EpYF0lT.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å€‘å¯èƒ½éœ€è¦:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Websocket çš„èŠå¤© Serviceï¼Œä¾‹å¦‚: &lt;a class=&#34;link&#34; href=&#34;https://github.com/googollee/go-socket.io&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go-socket.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ç”¨ä¾†å‚³é€åˆ†ä½ˆå¼è¨Šæ¯çš„ MQ Systemï¼Œä¾‹å¦‚: &lt;a class=&#34;link&#34; href=&#34;https://github.com/nats-io/nats.go&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Go-Nats&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥ Backend çš„çµæ§‹å¯èƒ½æœƒè®Šæˆä¸‹åœ–:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/q8REm9f.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/q8REm9f.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é€™å°è‡´æˆ‘å€‘è¦å°‡å…©è€…çš„ Backend
çµæ§‹åˆæˆåœ¨ä¸€èµ·ï¼Œé€™å…¶å¯¦ä¸æœƒå¾ˆé›£è¨­è¨ˆ(&lt;code&gt;å–®é«”å¼å„ªé»1&lt;/code&gt;)ï¼Œä¹Ÿå¾ˆå¥½æ•´åˆæ¸¬è©¦(&lt;code&gt;å–®é«”å¼å„ªé»2&lt;/code&gt;)ï¼Œå› ç‚ºåªéœ€è¦å•Ÿå‹•ä¸€å€‹
Service å°±å¯ä»¥æ¸¬è©¦äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/RzsOTa0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/RzsOTa0.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä½†å¯ä»¥ç™¼ç¾ï¼ŒRestful API æ˜¯ä¸€é€²ä¸€å‡ºï¼Œè€Œ Websocket æ˜¯ç”¨ listener
ä¾†ç›£è½æ­¤é€£ç·šçš„å„ç¨®
eventï¼Œå…©è€…çš„å‘¼å«æ–¹å¼ä¸åŒã€‚èˆ‡å¤–éƒ¨è³‡æºçš„ç›¸ä¾ä¹Ÿä¸åŒï¼Œä½†å»éƒ½æ”¾åœ¨åŒä¸€å€‹
Service ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;é€™å°è‡´æ”¹åŠŸèƒ½çš„é¢¨éšªæ˜¯è¼ƒå¤§çš„(&lt;code&gt;å–®é«”å¼ç¼ºé»1&lt;/code&gt;)ï¼Œå®¢æœå¤§çˆ†æ»¿ä¹Ÿç„¡æ³•é‡å°
Websocket åŠŸèƒ½ Scaling(&lt;code&gt;å–®é«”å¼ç¼ºé»2&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;p&gt;å‡è¨­é€™å€‹ Service æ˜¯æ¡ç”¨ C#ï¼ŒBackend åœ˜éšŠåœ¨è¨­è¨ˆçœŸäººå°çª—å¹«æ‰‹çš„
Websocket ç³»çµ±æƒ³ä½¿ç”¨ Golang
é€™å€‹é«˜ä½µç™¼å°èƒ½æ‰‹ï¼Œé‚£å°‡æ˜¯ä¸å¯èƒ½çš„ä»»å‹™ï¼Œå› ç‚ºæ²’è¾¦æ³•æŠŠ C#èˆ‡ Golang
çµ„åœ¨ä¸€èµ·å¯« Service(&lt;code&gt;å–®é«”å¼ç¼ºé»3&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å¾®æœå‹™æ°å¥½æŠŠä¸Šé¢æœ€å½†æ‰­çš„åœ°æ–¹è§£æ±ºï¼Œå°±æ˜¯æŠŠ Restful API èˆ‡ Websocket
æ‹†æˆå…©å€‹æœå‹™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/bg1S4Ic.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/bg1S4Ic.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;é€™ä½¿ Service
çš„åŠŸèƒ½å–®ç´”(&lt;code&gt;å¾®æœå‹™å„ªé»1&lt;/code&gt;)ï¼Œä¸€å€‹æ˜¯ã€Œæœƒå“¡ç³»çµ±ã€ä¸€å€‹æ˜¯ã€ŒèŠå¤©ç³»çµ±ã€ã€‚&lt;/p&gt;
&lt;p&gt;è¦å–®ç´”é‡å° Websocket Service Scaling
ä¹Ÿæ˜¯æ²’å•é¡Œçš„(&lt;code&gt;å¾®æœå‹™å„ªé»2&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;æ­¤å…©å€‹ Service
ç”¨ä¸åŒèªè¨€ä¹Ÿæ²’å•é¡Œ(&lt;code&gt;å¾®æœå‹™å„ªé»3&lt;/code&gt;)ï¼Œå› ç‚ºå½¼æ­¤å¯¦ä½œä¸¦æ²’æœ‰ç›¸é—œï¼Œæˆ‘å€‘å¾®æœå‹™æœ‰ç¢ºå¯¦é€£æ¥å³å¯(&lt;code&gt;ç´…è‰²æ¡†æ¡†&lt;/code&gt;æ¨™èµ·ä¾†çš„éƒ¨åˆ†)ã€‚&lt;/p&gt;
&lt;p&gt;But! å°±æ˜¯é€™å€‹
Butï¼Œ&lt;code&gt;ç´…è‰²æ¡†æ¡†&lt;/code&gt;æ­£æ˜¯å¾®æœå‹™ä¸€å€‹å¤§å¤§çš„å•é¡Œã€‚&lt;/p&gt;
&lt;p&gt;Websocket Service æœ‰å¯èƒ½å‘¼å« Restful API Service
å› ç‚ºç¶²è·¯å•é¡Œè€Œç”¢ç”ŸéŒ¯èª¤ï¼Œæˆ‘å€‘å¿…é ˆè€ƒæ…®åˆ°ç•¶ Resful API Service
æ›é»æ™‚è¦å¦‚ä½•å•Ÿå‹•å¦ä¸€å€‹æ–° Restful API Serviceï¼Œé‚„è¦è€ƒæ…®åˆ° Websocket
Service è¦å¦‚ä½•çŸ¥é“æ–° Service
çš„ä½ç½®(å³&lt;code&gt;Service Discover&lt;/code&gt;)ï¼Œé€™å°è‡´&lt;code&gt;å¾®æœå‹™ç¼ºé»1&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è€Œè¦æ•´åˆæ¸¬è©¦ï¼Œä¹Ÿå¿…é ˆæŠŠæ‰€æœ‰å¾®æœå‹™é€£æ¥éƒ½é€£æ¥å¥½ï¼Œç•¶ä½ çš„å¾®æœå‹™æœ‰åå¹¾ç™¾å€‹ï¼Œé€™å°‡æ˜¯ä¸€å€‹å¤§å·¥ç¨‹(&lt;code&gt;å¾®æœå‹™ç¼ºé»2&lt;/code&gt;)ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½ éœ€è¦å¾®æœå‹™å—&#34;&gt;ä½ éœ€è¦å¾®æœå‹™å—ï¼Ÿ
&lt;/h2&gt;&lt;p&gt;æˆ‘è‡ªå·±æ˜¯èªç‚º:&lt;/p&gt;
&lt;p&gt;å–®é«”å¼é©åˆè§£æ±ºå–®ç´”çš„æ¶æ§‹ï¼Œå¦‚æœä½ è² è²¬çš„å¾Œç«¯æ¶æ§‹ä¸¦ä¸æ˜¯å¾ˆè¤‡é›œï¼Œå…¶å¯¦å¯ä»¥ç›´æ¥æ¡ç”¨å–®é«”å¼æœå‹™å³å¯ã€‚&lt;/p&gt;
&lt;p&gt;å¾®æœå‹™é©åˆè§£æ±ºè¤‡é›œçš„æ¶æ§‹ï¼Œå¦‚æœæœ‰ Scaling éœ€æ±‚ï¼Œä¸¦ä¸”åˆ†å‰²æˆä¸åŒ Service
ä¾†ç¨ç«‹åŠŸèƒ½ï¼Œé‚£å°±æœƒè¼ƒé©åˆå¾®æœå‹™ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è¬è¬ä½ çš„é–±è®€ï¼Œä¹Ÿæ­¡è¿åˆ†äº«è¨è«–æŒ‡æ­£ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒèˆ‡å¼•ç”¨è³‡æ–™&#34;&gt;åƒè€ƒèˆ‡å¼•ç”¨è³‡æ–™
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.n-ix.com/microservices-vs-monolith-which-architecture-best-choice-your-business/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Microservices
vs Monolith: which architecture is the best choice for your
business?&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E7%94%A8-istio-destinationrule%E5%85%83%E4%BB%B6%E4%BE%86%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86---%E5%AF%A6%E4%BD%9C%E7%AF%87-89322e6aa4c445fba878d6885d003579/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E7%94%A8-istio-destinationrule%E5%85%83%E4%BB%B6%E4%BE%86%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86---%E5%AF%A6%E4%BD%9C%E7%AF%87-89322e6aa4c445fba878d6885d003579/</guid>
        <description>&lt;h1 id=&#34;ç”¨-istio-destinationruleå…ƒä»¶ä¾†æµé‡ç®¡ç†---å¯¦ä½œç¯‡&#34;&gt;ç”¨ Istio DestinationRuleå…ƒä»¶ä¾†æµé‡ç®¡ç† - å¯¦ä½œç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 10, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY26&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œæ¥ä¸‹ä¾†è¦ä»‹ç´¹ Istio DestinationRule å…ƒä»¶å¯¦ä½œçš„éƒ¨åˆ†ï¼Œ&lt;/p&gt;
&lt;h2 id=&#34;å¯¦ä½œ&#34;&gt;å¯¦ä½œ
&lt;/h2&gt;&lt;p&gt;ä»¥ä¸‹çš„å¯¦ä½œç¯„ä¾‹éƒ½åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Code-Example&lt;/a&gt;ä¸­ï¼Œ&lt;/p&gt;
&lt;p&gt;code ä¸­ä»¥ server çš„ pods æ”¹ç‚ºå…©å€‹ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/EleGXnO.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/EleGXnO.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä¸¦ä¸”æ–°å¢äº†ä¸€å€‹ DestinationRule
å…ƒä»¶åœ¨&lt;code&gt;DAY26/helm-digimon/templates/load-balancer.yaml&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;apiVersion: networking.istio.io/v1alpha3kind: DestinationRulemetadata:  name: serverspec:  host: server  trafficPolicy:    loadBalancer:      simple&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;ROUND_ROBIN&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;host&lt;/code&gt;: æœƒå° server é€™å€‹ service ä¾†åšæµé‡è™•ç†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;trafficPolicy.loadBalancer.simple&lt;/code&gt;:
é¸æ“‡æµé‡è™•ç†çš„ç­–ç•¥ï¼Œå…¶ä»–ä¸åŒçš„ç­–ç•¥&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/reference/config/networking/destination-rule/#LoadBalancerSettings-SimpleLB&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åœ¨æ­¤&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å•Ÿå‹• K8s é›†ç¾¤ï¼Œæ­¥é©Ÿä¸å†è´…è¿°ï¼Œè©³ç´°ä»‹ç´¹å¯ä»¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10250134&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY23&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ minikube start --kubernetes-version v1.16.0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ istioctl install --set profile&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;demo
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl label namespace default istio-injection&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd DAY26/helm-digimon
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ helm install . --generate-name$ minikube tunnel
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†ä¾†æˆ‘å€‘è¦è§€çœ‹ pods
æ˜¯ä¸æ˜¯æœ‰æ­£ç¢ºåˆ†æµï¼Œä½¿ç”¨&lt;code&gt;$ kubectl get pods&lt;/code&gt;æ‹¿å–å…¨éƒ¨&lt;code&gt;pods&lt;/code&gt;ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/K6DelGm.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/K6DelGm.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨&lt;code&gt;$ kubectl logs&lt;/code&gt;ä¾†å–å¾— pods çš„
logï¼Œä»¥æˆ‘ä¾†èªªæˆ‘æœƒæ˜¯ä»¥ä¸‹æŒ‡ä»¤:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl logs -f server-66db48686-f4xm5
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ kubectl logs -f server-66db48686-sdpfs
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/FXI0PY9.gif&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/FXI0PY9.gif&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å…©å€‹ pods å·²ç¶“æˆåŠŸè¢«åˆ†æµã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å¦‚æœæƒ³è¦çœ‹çœ‹æ²’æœ‰ DestinationRule
å…ƒä»¶æœƒç”¢ç”Ÿä»€éº¼ç‹€æ³ï¼Œå¯ä»¥æŠŠ&lt;code&gt;DAY26/helm-digimon/templates/load-balancer.yaml&lt;/code&gt;åˆªé™¤ï¼Œå†é‡æ–°ä»¥ä¸Šæ­¥é©Ÿå‰µå»ºä¸€å€‹
K8s é›†ç¾¤&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/xpC33lG.gif&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/xpC33lG.gif&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å€‘æœƒçœ‹åˆ°æµé‡åªæœ‰å°åˆ°å·¦é‚Šçš„ podsï¼Œé€ æˆå·¦é‚Šå¾ˆå¿™å³é‚Šå¾ˆé–’çš„ç‹€æ³
XDã€‚&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/reference/config/networking/destination-rule/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Destination Rule&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/getamis/istio-%E5%9F%BA%E7%A4%8E-grpc-%E8%B2%A0%E8%BC%89%E5%9D%87%E8%A1%A1-d4be0d49ee07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
åŸºç¤ â€” gRPC è² è¼‰å‡è¡¡. ä»€éº¼æ˜¯ Istio | by Alan Chen | getamis |
Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://cloud.google.com/solutions/using-istio-for-internal-load-balancing-of-grpc-services&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Using
Istio to load-balance internal gRPC servicesÂ | Solutions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E7%94%A8-istio-destinationrule%E5%85%83%E4%BB%B6%E4%BE%86%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86---%E6%A6%82%E5%BF%B5%E7%AF%87-9ce5a1af6b9d485e8530bb39ec42d188/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E7%94%A8-istio-destinationrule%E5%85%83%E4%BB%B6%E4%BE%86%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86---%E6%A6%82%E5%BF%B5%E7%AF%87-9ce5a1af6b9d485e8530bb39ec42d188/</guid>
        <description>&lt;h1 id=&#34;ç”¨-istio-destinationruleå…ƒä»¶ä¾†æµé‡ç®¡ç†---æ¦‚å¿µç¯‡&#34;&gt;ç”¨ Istio DestinationRuleå…ƒä»¶ä¾†æµé‡ç®¡ç† - æ¦‚å¿µç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: October 9, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY25&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œæ¥ä¸‹ä¾†è¦ä»‹ç´¹ Istio DestinationRule
å…ƒä»¶ï¼Œä»–æ˜¯ç”¨ä¾†è™•ç†æµé‡å°æµçš„éƒ¨åˆ†ï¼Œå¯ä»¥é ä»–ä¾†è™•ç† Load
Balancerï¼Œä½ å¯èƒ½æƒ³å•&lt;code&gt;ç‚ºä»€éº¼ä¸ç›´æ¥ç”¨K8sçš„Load Balancer&lt;/code&gt;å‘¢ï¼Ÿä»¥æˆ‘ç›®å‰æœ€å¤§çš„æ„Ÿå—æ˜¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;K8s Load Balancer ç„¡æ³•åˆ†é… HTTP2 çš„é•·é€£ç·š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;grpc-çš„ç‰¹æ€§ç”¢ç”Ÿçš„å•é¡Œ&#34;&gt;GRPC çš„ç‰¹æ€§ç”¢ç”Ÿçš„å•é¡Œ
&lt;/h2&gt;&lt;p&gt;å‚³çµ±çš„ Restful APIï¼Œéƒ½æ˜¯ä¸€å€‹ request ä¸€å€‹ responseï¼Œè€Œ GRPC
é€£ç·šæ˜¯ä¸€å€‹é•·é€£ç·šï¼Œä¸¦ä¸”åˆ©ç”¨æ­¤é€£ç·šä¾†é€£çºŒé€ request èˆ‡é€£çºŒæ¥æ”¶
responseï¼Œ&lt;/p&gt;
&lt;p&gt;å‚³çµ±çš„ Restful API å¯ä»¥ç‚ºæ¯å€‹ requests åšåˆ†æµ:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/eWHvyf5.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/eWHvyf5.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;è€Œ GRPC çš„é•·é€£ç·šæœƒå°è‡´åˆ†æµå¤±æ•—:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/56uwaCZ.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/56uwaCZ.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨ä¸€å€‹èƒ½è§£æçš„-http&#34;&gt;ä½¿ç”¨ä¸€å€‹èƒ½è§£æçš„ HTTP
&lt;/h2&gt;&lt;p&gt;çš„ Proxy ä¾†è§£æ±ºå•é¡Œ&lt;/p&gt;
&lt;p&gt;è¦è§£æ±ºé•·é€£ç·šåˆ†é…è«‹æ±‚çš„æ–¹å¼å¾ˆç›´è¦ºï¼Œå°±æ˜¯&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¦éš›è§£æé•·é€£ç·šè£¡é ­çš„å…§å®¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘å€‘å¿…é ˆè¦æœ‰ä¸€å€‹ Proxy èƒ½å¤ çœ‹æ‡‚ HTTP å‚³é€çš„å…§å®¹ï¼Œä¸èƒ½å†å–®ç´”æ˜¯è½‰ç™¼
requests çš„ Load Balancer äº†ï¼Œ&lt;/p&gt;
&lt;p&gt;è€Œ Envoy å°±å¯ä»¥ç•¶ä½œæ­¤è«‹æ±‚çš„ Proxyï¼Œä»–è§£æä¹‹å¾Œå°±æœƒå¦‚ä¸‹åœ–ç™¼é€è«‹æ±‚:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/VOFPBs0.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/VOFPBs0.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://istio.io/latest/docs/reference/config/networking/destination-rule/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
/ Destination Rule&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/getamis/istio-%E5%9F%BA%E7%A4%8E-grpc-%E8%B2%A0%E8%BC%89%E5%9D%87%E8%A1%A1-d4be0d49ee07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Istio
åŸºç¤ â€” gRPC è² è¼‰å‡è¡¡. ä»€éº¼æ˜¯ Istio | by Alan Chen | getamis |
Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10217407&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;[Day03]ç‚ºä»€éº¼æˆ‘å€‘è¦ç”¨
Istioï¼ŒNative Kubernetes æœ‰ä»€éº¼åšä¸åˆ° - iT
é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘ IT äººçš„ä¸€å¤©&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://kubernetes.io/blog/2018/11/07/grpc-load-balancing-on-kubernetes-without-tears/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;åœ¨ä¸æµæ·šçš„
Kubernetes ä¸Šå¯¦ç¾ gRPC è² è¼‰å¹³è¡¡ Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E7%A5%9E%E5%A5%87%E7%9A%84-grpc%E8%AE%93%E4%BD%A0%E6%8A%8A-call-service-%E7%95%B6%E6%88%90%E4%B8%80%E5%80%8B-function-call---%E5%AF%A6%E4%BD%9C%E7%AF%87-45f1e14c56db481d82479ea2d7970236/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E7%A5%9E%E5%A5%87%E7%9A%84-grpc%E8%AE%93%E4%BD%A0%E6%8A%8A-call-service-%E7%95%B6%E6%88%90%E4%B8%80%E5%80%8B-function-call---%E5%AF%A6%E4%BD%9C%E7%AF%87-45f1e14c56db481d82479ea2d7970236/</guid>
        <description>&lt;h1 id=&#34;ç¥å¥‡çš„-grpcè®“ä½ æŠŠ-call-service-ç•¶æˆä¸€å€‹-function-call---å¯¦ä½œç¯‡&#34;&gt;ç¥å¥‡çš„ gRPCï¼Œè®“ä½ æŠŠ call service ç•¶æˆä¸€å€‹ function call - å¯¦ä½œç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 24, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY10&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day10-%E7%A5%9E%E5%A5%87%E7%9A%84-grpc-%E8%AE%93%E4%BD%A0%E6%8A%8A-call-service-%E7%95%B6%E6%88%90%E4%B8%80%E5%80%8B-function-call-%E5%AF%A6%E4%BD%9C%E7%AF%87-a447b3e76f3b&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10242947&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY09&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY09&lt;/a&gt;çš„ä»‹ç´¹å¾Œï¼ŒgRPC
ç›¸ä¿¡å¤§å®¶å·²ç¶“ç¨æœ‰æ¦‚å¿µï¼Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å››ç¨® gRPC çš„å‚³è¼¸æ–¹å¼:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å–®å‘å‚³è¼¸(Unary): Client å–®å‘ï¼ŒServer å–®å‘&lt;/li&gt;
&lt;li&gt;Server å–®å‘ä¸²æµ(Streaming-Server): Client å–®å‘ï¼ŒServer ä¸²æµ&lt;/li&gt;
&lt;li&gt;Client å–®å‘ä¸²æµ(Streaming-Client): Client ä¸²æµï¼ŒServer å–®å‘&lt;/li&gt;
&lt;li&gt;é›™å‘ä¸²æµ(Streaming-Bidirectional): Client ä¸²æµï¼ŒServer ä¸²æµ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœƒä»¥ä¸€å€‹ Golang Client ä¸€å€‹ Golang Server ä¾†è¬›è§£ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹è¬›è§£ code å…¨éƒ¨éƒ½æ”¾åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY10&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY10-Github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/99W9BCD.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/99W9BCD.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;å»ºç«‹-protobuf-schema&#34;&gt;å»ºç«‹ Protobuf schema
&lt;/h2&gt;&lt;p&gt;å¦‚&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY09&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY09&lt;/a&gt;æ‰€è¿°ï¼Œå¿…é ˆå…ˆå»ºç«‹å¥½ä¸€å€‹
Protobuf schemaï¼Œä¹‹å¾Œæˆ‘å€‘å°±å¯ä»¥ç”¨æ­¤ schema ç”¢ç”Ÿ Client èˆ‡ Server çš„
codeã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;unary&lt;/code&gt;å‚³è¼¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;syntax &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; helloworld;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; Greeter {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; SayHello (HelloRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (HelloReply) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloReply&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;streaming-server&lt;/code&gt;å‚³è¼¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;syntax &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; helloworld;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; Greeter {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; SayHello (HelloRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (stream HelloReply) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloReply&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;streaming-client&lt;/code&gt;å‚³è¼¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;syntax &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; helloworld;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; Greeter {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; SayHello (stream HelloRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (HelloReply) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloReply&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;streaming-bidirectional&lt;/code&gt;å‚³è¼¸&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-protobuf&#34; data-lang=&#34;protobuf&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;syntax &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;proto3&amp;#34;&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; helloworld;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;service&lt;/span&gt; Greeter {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;rpc&lt;/span&gt; SayHello (stream HelloRequest) &lt;span style=&#34;color:#66d9ef&#34;&gt;returns&lt;/span&gt; (stream HelloReply) {}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloRequest&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; name &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HelloReply&lt;/span&gt; {&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;message&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;&lt;/span&gt;}&lt;span style=&#34;color:#960050;background-color:#1e0010&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;syntax&lt;/code&gt;: ç‚º protobuf çš„ç‰ˆæœ¬ï¼Œç›®å‰å¸¸è¦‹çš„ proto2 èˆ‡
proto3ï¼Œåœ¨ require é€™å€‹é—œéµå­—ä¸Šåšäº†å¾ˆå¤§çš„è®Šå‹•ï¼Œè©³æƒ…æ”¹å‹•å¯ä»¥çœ‹&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@leon740727/%E8%A8%AD%E8%A8%88%E6%80%9D%E8%80%83-protocol-buffers-3-%E7%82%BA%E4%BB%80%E9%BA%BC-49219fc87bb7&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¨­è¨ˆæ€è€ƒ
â€” Protocol Buffers 3 ç‚ºä»€éº¼&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;package&lt;/code&gt;: ç‚ºç”¢å‡ºä¾† code çš„ packge nameã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;message&lt;/code&gt;: ç‚º protobuf çš„è¨Šæ¯ï¼Œä½ å¯ä»¥æƒ³åƒæ˜¯ Restful API
çš„ request èˆ‡ responseï¼Œä½†æ˜¯ä»‹é¢æ›´ç‚ºåš´è¬¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;service&lt;/code&gt;: gRPC
çš„æ–¹æ³•ç”±æ­¤å®šç¾©ï¼Œä»¥&lt;code&gt;rpc SayHello (stream HelloRequest) returns (HelloReply) {}&lt;/code&gt;ä¾†èªªï¼Œ&lt;code&gt;SayHello&lt;/code&gt;æ˜¯æ–¹æ³•åï¼Œ&lt;code&gt;HelloRequest&lt;/code&gt;ç‚ºåƒæ•¸ï¼Œ&lt;code&gt;HelloReply&lt;/code&gt;ç‚º
resultï¼Œæœ‰ç„¡&lt;code&gt;stream&lt;/code&gt;ä»£è¡¨äº†æ˜¯å¦è¦ç”¨ä¸²æµé‚„æ˜¯å–®å‘ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¨­è¨ˆå¥½äº†ä¹‹å¾Œå°±å¯ä»¥åŸ·è¡Œä»¥ä¸‹ script
ç”¢ç”Ÿå‡º&lt;code&gt;gen&lt;/code&gt;è³‡æ–™å¤¾ï¼Œè£¡é¢å°±æœ‰å¯¦éš›çš„ code äº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/Fyt9vTE.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/Fyt9vTE.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ build-proto.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å¯¦éš›é‹ä½œ&#34;&gt;å¯¦éš›é‹ä½œ
&lt;/h2&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;package main

import (
    &amp;#34;context&amp;#34;
    &amp;#34;log&amp;#34;
    &amp;#34;net&amp;#34;

    pb &amp;#34;unary/gen/grpc-gateway/gen&amp;#34;

    &amp;#34;google.golang.org/grpc&amp;#34;
)

const (
    port = &amp;#34;:50052&amp;#34;
)

// SayHello implements helloworld.GreeterServer.SayHello
func (s *Server) SayHello(ctx context.Context, in *pb.HelloRequest) (*pb.HelloReply, error) {
    log.Printf(&amp;#34;Received: %v&amp;#34;, in.GetName())
    return &amp;amp;pb.HelloReply{Message: &amp;#34;Hello &amp;#34; + in.GetName()}, nil
}

// Server ...
type Server struct {
    pb.UnimplementedGreeterServer
}

func main() {
    lis, err := net.Listen(&amp;#34;tcp&amp;#34;, port)
    if err != nil {
        log.Fatalf(&amp;#34;failed to listen: %v&amp;#34;, err)
    }
    s := grpc.NewServer()
    pb.RegisterGreeterServer(s, &amp;amp;Server{})
    if err := s.Serve(lis); err != nil {
        log.Fatalf(&amp;#34;failed to serve: %v&amp;#34;, err)
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ unary
ä¾†èªªï¼Œå°‡è¦&lt;code&gt;import pb &amp;quot;unary/gen/grpc-gateway/gen&amp;quot;&lt;/code&gt;ï¼Œä¸¦å°‡&lt;code&gt;pb.UnimplementedGreeterServer&lt;/code&gt;å¯¦ä½œï¼Œæœ€å¾Œé€é&lt;code&gt;grpc.NewServer()&lt;/code&gt;ä¾†å‰µå»º
gRPC
Serverï¼Œä¸¦é€é&lt;code&gt;pb.RegisterGreeterServer(s, &amp;amp;Server{})&lt;/code&gt;ä¾†è¨»å†Šå¯¦ä½œï¼Œæœ€å¾Œä»¥&lt;code&gt;s.Serve(lis)&lt;/code&gt;å•Ÿå‹•
Serverã€‚&lt;/p&gt;
&lt;p&gt;è€Œå››ç¨®å‚³è¼¸æ–¹æ³•çš„æ¸¬è©¦æ–¹å¼éƒ½æ˜¯:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;go run server/main.go&lt;/code&gt;: å•Ÿå‹• server&lt;/li&gt;
&lt;li&gt;&lt;code&gt;go run client/main.go&lt;/code&gt;: ä½¿ç”¨ client ä¾†å‘¼å«&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/6Wjs2jw.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/6Wjs2jw.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;éƒ½å¤§åŒå°ç•°ï¼Œå¯¦ä½œç´°ç¯€å¯ä»¥çœ‹ codeï¼Œæˆ‘èˆ‰å‡ºæ¯”è¼ƒè¦æ³¨æ„çš„åœ°æ–¹ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;srv pb.Greeter_SayHelloServer&lt;/code&gt;ç‚º Streaming çš„æ–¹å¼ï¼Œåœ¨
client ç«¯å‘¼å«å¾Œ:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœæ˜¯ Streaming-Client: Server
å¯ä»¥é€éæ­¤åƒæ•¸ä»¥&lt;code&gt;.Recv()&lt;/code&gt;çš„æ–¹å¼æŒçºŒæ¥æ”¶è³‡æ–™ï¼ŒClient
å¯ä»¥é€éæ­¤åƒæ•¸ä»¥&lt;code&gt;.Send()&lt;/code&gt;çš„æ–¹å¼æŒçºŒå‚³é€è³‡æ–™ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ Streaming-Server: Server
å¯ä»¥é€éæ­¤åƒæ•¸ä»¥&lt;code&gt;.Send()&lt;/code&gt;çš„æ–¹å¼æŒçºŒå‚³é€è³‡æ–™ï¼ŒClient
å¯ä»¥é€éæ­¤åƒæ•¸ä»¥&lt;code&gt;.Recv()&lt;/code&gt;çš„æ–¹å¼æŒçºŒå‚³é€è³‡æ–™ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ˜¯ Streaming-Bidirectional: Server
å¯ä»¥é€éæ­¤åƒæ•¸ä»¥&lt;code&gt;.Send()&lt;/code&gt;çš„æ–¹å¼æŒçºŒå‚³é€è³‡æ–™èˆ‡&lt;code&gt;.Recv()&lt;/code&gt;çš„æ–¹å¼æŒçºŒæ¥æ”¶è³‡æ–™ï¼ŒClient
å¯ä»¥é€éæ­¤åƒæ•¸ä»¥&lt;code&gt;.Send()&lt;/code&gt;çš„æ–¹å¼æŒçºŒå‚³é€è³‡æ–™èˆ‡&lt;code&gt;.Recv()&lt;/code&gt;çš„æ–¹å¼æŒçºŒæ¥æ”¶è³‡æ–™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://grpc.io/docs/what-is-grpc/core-concepts/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Core
concepts, architecture and lifecycle â€“ gRPC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/grpc/grpc-go/tree/master/examples&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;grpc-go/examples
at master Â· grpc/grpc-go&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://grpc.io/docs/languages/go/basics/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Basics Tutorial
â€“ gRPC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/itsksaurabh/go-grpc-examples/blob/master/stream/bi-directional-streaming/feeds/feedClient/client.go&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;go-grpc-examples/client.go
at master Â· itsksaurabh/go-grpc-examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/@leon740727/%E8%A8%AD%E8%A8%88%E6%80%9D%E8%80%83-protocol-buffers-3-%E7%82%BA%E4%BB%80%E9%BA%BC-49219fc87bb7&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¨­è¨ˆæ€è€ƒ
â€” Protocol Buffers 3 ç‚ºä»€éº¼. ç°¡å–®æ˜¯ä¸€ä»¶éå¸¸é›£çš„äº‹!
è€Œæ·±æ€ç†Ÿæ…®éçš„ç°¡å–®ï¼Œå¯ä»¥çµ¦æˆ‘å€‘æœ€å¤šçš„æ€è€ƒèˆ‡å­¸ç¿’ | by Leon Tsai |
Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://yami.io/protobuf/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ¯”èµ· JSON
æ›´æ–¹ä¾¿ã€æ›´å¿«é€Ÿã€æ›´ç°¡çŸ­çš„ Protobuf æ ¼å¼ â€“ é›»è…¦ç©çå’ª&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E7%A5%9E%E5%A5%87%E7%9A%84-grpc%E8%AE%93%E4%BD%A0%E6%8A%8A-call-service-%E7%95%B6%E6%88%90%E4%B8%80%E5%80%8B-function-call--%E6%A6%82%E5%BF%B5%E7%AF%87-9264db54cce54b118cf15cd76743d00d/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E7%A5%9E%E5%A5%87%E7%9A%84-grpc%E8%AE%93%E4%BD%A0%E6%8A%8A-call-service-%E7%95%B6%E6%88%90%E4%B8%80%E5%80%8B-function-call--%E6%A6%82%E5%BF%B5%E7%AF%87-9264db54cce54b118cf15cd76743d00d/</guid>
        <description>&lt;h1 id=&#34;ç¥å¥‡çš„-grpcè®“ä½ æŠŠ-call-service-ç•¶æˆä¸€å€‹-function-call--æ¦‚å¿µç¯‡&#34;&gt;ç¥å¥‡çš„ gRPCï¼Œè®“ä½ æŠŠ call service ç•¶æˆä¸€å€‹ function call â€” æ¦‚å¿µç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Kubernetes, ithome 2020 ironman
Date: September 23, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY09&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day9-%E7%A5%9E%E5%A5%87%E7%9A%84-grpc-%E8%AE%93%E4%BD%A0%E6%8A%8A-call-service-%E7%95%B6%E6%88%90%E4%B8%80%E5%80%8B-function-call-%E6%A6%82%E5%BF%B5%E7%AF%87-1a27e7f24331&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10242372&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT
é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY08&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY08&lt;/a&gt;çš„ä»‹ç´¹å¾Œï¼ŒClean
Architecture
æ¶æ§‹å‘Šä¸€æ®µè½ã€‚ç¾åœ¨æˆ‘å€‘ä¾†æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœå¾Œç«¯å¾®æœå‹™é¾å¤§èµ·ä¾†ï¼Œå¦‚ä¸‹åœ–ï¼Œå¯èƒ½æœƒç”¢ç”Ÿä»€éº¼å•é¡Œï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;å¾®æœå‹™æºé€šçš„ç½é›£èˆ‡è§£æ±º&#34;&gt;å¾®æœå‹™æºé€šçš„ç½é›£èˆ‡è§£æ±º
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/M4NGgqF.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/M4NGgqF.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;åœ–ç‰‡ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://www.itread01.com/content/1561532706.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¾®æœå‹™æ¶æ§‹ä¹‹ã€Œ
ä¸‹ä¸€ä»£å¾®æœå‹™ Service Mesh ã€&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‚³è¼¸çš„é€Ÿåº¦å› ç‚º JSON&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æ–‡æœ¬å‚³è¼¸&lt;/a&gt;çš„æ–¹å¼å°è‡´ç·©æ…¢&lt;/li&gt;
&lt;li&gt;å¤§é‡çš„æœå‹™æºé€šæœƒä½¿å¾— Restful API çš„ request èˆ‡ response
çš„æ¬„ä½é€æ¼¸æ··äº‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é›–ç„¶æˆ‘å€‘å·²ç¶“é€éäº† Swagger æœ€å¤§ç¨‹åº¦çš„æ§ç®¡ Restful API
çš„ä»‹é¢ï¼Œä½†&lt;code&gt;å€¼é€éenumä¾†å¯¦ç¾&lt;/code&gt;ã€&lt;code&gt;é€™å€‹åƒæ•¸æ˜¯requireä½†ä½ å¿˜è¨˜å¸¶ç¨‹å¼ä¹Ÿä¸æœƒå‘ŠçŸ¥ä½ &lt;/code&gt;ï¼Œç‚ºäº†è§£æ±ºé€™äº›å•é¡Œï¼Œæœ‰å€‹å¾ˆç°¡å–®ç²—æš´çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è®“ Service çš„æºé€šè®Šæˆ function call å§ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œé€™ä»¶äº‹å¯ä»¥é€é&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/zh-tw/%E9%81%A0%E7%A8%8B%E9%81%8E%E7%A8%8B%E8%AA%BF%E7%94%A8&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;RPC(Remote
Procedure
Call)&lt;/a&gt;é”æˆï¼Œæµç¨‹åœ–å¦‚ä¸‹ï¼Œå…¶å¯¦ä»–å¾—æ¦‚å¿µä¸¦ä¸è¤‡é›œï¼Œå–®ç´”å°±æ˜¯æŠŠ&lt;code&gt;call functionèˆ‡return resulté–“çš„æµç¨‹åŠ äº†ä¸€é“ç¶²è·¯è½‰æ›&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/i51FX43.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/i51FX43.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ­¤åœ–ä¾†æº: &lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10223580&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Day 16 -
åˆ†æ•£å¼ç³»çµ±æºé€šçš„æ–¹æ³• - RPC&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Client ç«¯å‘¼å«ä¸€å€‹ function&lt;/li&gt;
&lt;li&gt;æ­¤ function çš„åƒæ•¸æœƒè¢«ç·¨ç¢¼æˆç‰¹å®šæ ¼å¼çš„å°åŒ…ï¼Œä¾›ç¶²è·¯å‚³é€ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;ç¶²è·¯å‚³é€å°åŒ…&lt;/li&gt;
&lt;li&gt;Server æ¥æ”¶å°åŒ…&lt;/li&gt;
&lt;li&gt;å°‡å°åŒ…è½‰æ›æˆ function çš„åƒæ•¸æ ¼å¼&lt;/li&gt;
&lt;li&gt;åŸ·è¡Œæ­¤ functionï¼Œä¸¦å›å‚³ result&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;äº‹å¯¦ä¸Š RPC åœ¨ 1976
å¹´å°±èª•ç”Ÿäº†ï¼Œä¸¦ä¸æ˜¯ä»€éº¼æ–°æŠ€è¡“ï¼Œç•¶æ™‚ç‚ºäº†è¦è™•ç†å¤šå°é›»è…¦çš„é€šä¿¡æ¡ç”¨æ­¤æ–¹æ³•ï¼Œå¾Œä¾†è¡ä¼¸å‡ºäº†&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/XML-RPC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;XML-RPC&lt;/a&gt;ã€&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;SOAP&lt;/a&gt;é€™æ¨£çš„å”å®šï¼Œä½†åœ¨å®šç¾©èˆ‡ä½¿ç”¨ä¸Šéƒ½æœ‰äº›ç¹ç‘£å¤è€ï¼Œå¾Œä¾†
Google ç™¼å±•å‡ºäº†&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/GRPC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC&lt;/a&gt;ï¼Œç‚ºç¾ä»£çš„å¾®æœå‹™æä¾›ç°¡å–®é«˜æ•ˆå¼·å¤§çš„
RPC å”å®šã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ–°ä¸–ä»£çš„-rpc---grpc&#34;&gt;æ–°ä¸–ä»£çš„ RPC - gRPC
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/PoiSXeG.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/PoiSXeG.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‚³è¼¸ç·©æ…¢çš„å•é¡Œ: gPRC é€é&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/Protocol_Buffers&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Protobuf&lt;/a&gt;è½‰æ›ä¾†è§£æ±ºï¼Œæœƒå°‡
function çš„åƒæ•¸è½‰æ›æˆ&lt;code&gt;äºŒé€²åˆ¶&lt;/code&gt;çš„æ ¼å¼ï¼Œä»¥æ”¯æ´äºŒé€²åˆ¶æºé€šåŠŸèƒ½çš„&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/HTTP/2#HTTP/2%E4%B8%8EHTTP/1.1%E6%AF%94%E8%BE%83&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;HTTP/2&lt;/a&gt;ä¾†å‚³é€ï¼Œä½¿å¾—æºé€šæ¥µå°æ¥µå¿«ã€‚&lt;/li&gt;
&lt;li&gt;å¾®æœå‹™æºé€šä»‹é¢æ··äº‚çš„å•é¡Œ: gRPC é€éå®šç¾© Protobuf çš„ schema è§£æ±ºï¼Œæ­¤
schema ä¸ä½†å¯ä»¥å®šç¾©å‚³è¼¸çš„è¨Šæ¯ï¼Œä¹Ÿå¯ä»¥å®šæœ‰å“ªäº›å‚³è¼¸ functionï¼Œä¸¦ä¸”é€™äº›
function çš„åƒæ•¸æ˜¯ä»€éº¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ Golang ä¾†èªªï¼Œé€™äº›å®šå¥½çš„ Protobuf schema é€éå®˜æ–¹çš„&lt;a class=&#34;link&#34; href=&#34;https://www.grpc.io/docs/languages/go/quickstart/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;codegen&lt;/a&gt;
toolï¼Œç›´æ¥ç”¢ç”Ÿå¯¦éš›çš„ function èˆ‡ structã€‚&lt;/p&gt;
&lt;p&gt;è€Œä½ å¯¦éš›ä½¿ç”¨æ™‚ï¼Œåªè¦ç›´æ¥ call æ­¤ function
ä¸¦ä¸”å¸¶å°åƒæ•¸å°±å¯ä»¥äº†ï¼Œå› ç‚ºæ˜¯ function
callï¼Œæ‰€ä»¥è¦å¸¶ä»€éº¼åƒæ•¸æ›´åŠ çš„ç›´è§€ï¼Œè€Œç·¨è­¯å™¨æœƒå‘Šè¨´ä½ æ˜¯å¦å¸¶å°åƒæ•¸ä¹Ÿæ›´ä½³å®‰å…¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¤šç¨®ä¾¿åˆ©çš„å‚³è¼¸æ–¹æ¡ˆ&#34;&gt;å¤šç¨®ä¾¿åˆ©çš„å‚³è¼¸æ–¹æ¡ˆ
&lt;/h3&gt;&lt;p&gt;gRPC åœ¨å®šç¾© function æ™‚ï¼Œå¯ä»¥é‡å°ä¸åŒå ´æ™¯ï¼Œä½¿ç”¨å¤šç¨®æ–¹æ¡ˆ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å–®å‘å‚³è¼¸(Unary): æ©Ÿåˆ¶ä¸Šè·Ÿ Restful API ä¸€æ¨£ï¼Œå°±æ˜¯ä¸€å€‹ request ä¸€å€‹
responseï¼Œåªä¸éæ˜¯é€éäº† gRPC å”å®šã€‚&lt;/li&gt;
&lt;li&gt;å–®å‘ä¸²æµ(Streaming): ä½ å¯ä»¥æƒ³åƒæˆè¨‚é–±æ©Ÿåˆ¶ï¼Œclient
é€é&lt;code&gt;ä¸€å€‹ request&lt;/code&gt;è¨‚é–± server å¾Œï¼Œserver
å°±å¯ä»¥ç™¼é€&lt;code&gt;ç„¡æ•¸æ¬¡ response&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é›™å‘ä¸²æµ(Bidirectional streaming): æ©Ÿåˆ¶å°±åƒ
Websocketï¼Œä½†æ˜¯åœ¨å‚³è¼¸æ ¼å¼æœ‰é€é schema å®šç¾©ï¼Œclient å¯ä»¥ç™¼é€ç„¡æ•¸æ¬¡
requestï¼Œserver ä¹Ÿå¯ä»¥ç™¼é€ç„¡æ•¸æ¬¡ response&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åˆ¥å¿˜äº†-rpc-é‚„æ˜¯é€éç¶²è·¯&#34;&gt;åˆ¥å¿˜äº† RPC é‚„æ˜¯é€éç¶²è·¯
&lt;/h2&gt;&lt;p&gt;å¾®æœå‹™å¾ˆå¤§çš„ç—›å°±æ˜¯ç¶²è·¯ï¼Œè©¦æƒ³çœ‹çœ‹ function call
æœ‰å¯èƒ½æœƒå› ç‚ºç¶²è·¯ä¸ç©©è€Œå¤±æ•—ï¼Œé€™æœƒå¤šé›£éº»ç…© XDã€‚&lt;/p&gt;
&lt;p&gt;gRPC å¯ç”¨æ­¤æ–¹æ³•è™•ç†ï¼ŒDeadlines/Timeouts ä¾†è¨­å®š timeoutï¼Œ&lt;a class=&#34;link&#34; href=&#34;https://godoc.org/github.com/grpc-ecosystem/go-grpc-middleware/retry&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;go-grpc-middleware&lt;/a&gt;ä¾†
retryã€‚&lt;/p&gt;
&lt;p&gt;ç¸½è€Œè¨€ä¹‹é€™æ˜¯å€‹è¦ç‰¹åˆ¥æ³¨æ„çš„åœ°æ–¹ï¼Œé›–ç„¶è®Šæˆäº† function call
ä½†ä»–é‚„æ˜¯&lt;code&gt;ç¶²è·¯å‚³è¼¸&lt;/code&gt;XDã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æ¥ä¸‹ä¾†å°‡ä»‹ç´¹ gRPC çš„å‚³è¼¸æ–¹æ¡ˆçš„å¯¦éš›å¯¦ä½œï¼Œè¬è¬ä½ çš„é–±è®€ï½&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://zhuanlan.zhihu.com/p/60352360&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;æµ…è°ˆ RPC å’Œ REST:
SOAP, gRPC, REST - çŸ¥ä¹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/48190148/what-is-the-difference-between-soa-and-microservices&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;web-SOA
å’Œå¾®æœå‹™ä¹‹é–“æœ‰ä»€éº¼å€åˆ¥ï¼Ÿ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[ç°¡å–®ç‰©ä»¶å­˜å–å”å®š&lt;/li&gt;
&lt;li&gt;ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸](&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zh.wikipedia.org/wiki/%E7%AE%80%E5%8D%95%E5%AF%B9%E8%B1%A1%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/XML-RPC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;XML-RPC -
ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.itread01.com/content/1561532706.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å¾®æœå‹™æ¶æ§‹ä¹‹ã€Œ
ä¸‹ä¸€ä»£å¾®æœå‹™ Service Mesh ã€&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[è¶…æ–‡æœ¬å‚³è¼¸å”å®š&lt;/li&gt;
&lt;li&gt;ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸](&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10223580&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Day 16 -
åˆ†æ•£å¼ç³»çµ±æºé€šçš„æ–¹æ³• - RPC - iT é‚¦å¹«å¿™::ä¸€èµ·å¹«å¿™è§£æ±ºé›£é¡Œï¼Œæ‹¯æ•‘ IT
äººçš„ä¸€å¤©&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[é ç«¯ç¨‹åºå‘¼å«&lt;/li&gt;
&lt;li&gt;ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸](&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/%E9%81%A0%E7%A8%8B%E9%81%8E%E7%A8%8B%E8%AA%BF%E7%94%A8&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zh.wikipedia.org/wiki/%E9%81%A0%E7%A8%8B%E9%81%8E%E7%A8%8B%E8%AA%BF%E7%94%A8&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/GRPC&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gRPC -
ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/Protocol_Buffers&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Protocol
Buffers - ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;[HTTP/2&lt;/li&gt;
&lt;li&gt;ç¶­åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨æ›¸](&lt;a class=&#34;link&#34; href=&#34;https://zh.wikipedia.org/wiki/HTTP/2#HTTP/2%E4%B8%8EHTTP/1.1%E6%AF%94%E8%BE%83&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://zh.wikipedia.org/wiki/HTTP/2#HTTP/2%E4%B8%8EHTTP/1.1%E6%AF%94%E8%BE%83&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://grpc.io/docs/what-is-grpc/core-concepts/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Core
concepts, architecture and lifecycle â€“ gRPC&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title></title>
        <link>http://localhost:1313/post/%E8%AE%93%E4%BD%A0%E7%9A%84-backend-%E8%90%AC%E7%89%A9%E7%9A%86%E8%99%9B%E8%90%AC%E4%BA%8B%E7%9A%86%E5%8F%AF%E6%B8%AC---clean-architecture-%E6%B8%AC%E8%A9%A6%E7%AF%87-ad17b69f653b4f31a6dc2ffb120fc5f2/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/post/%E8%AE%93%E4%BD%A0%E7%9A%84-backend-%E8%90%AC%E7%89%A9%E7%9A%86%E8%99%9B%E8%90%AC%E4%BA%8B%E7%9A%86%E5%8F%AF%E6%B8%AC---clean-architecture-%E6%B8%AC%E8%A9%A6%E7%AF%87-ad17b69f653b4f31a6dc2ffb120fc5f2/</guid>
        <description>&lt;h1 id=&#34;è®“ä½ çš„-backend-è¬ç‰©çš†è™›è¬äº‹çš†å¯æ¸¬---clean-architecture-æ¸¬è©¦ç¯‡&#34;&gt;è®“ä½ çš„ Backend è¬ç‰©çš†è™›ï¼Œè¬äº‹çš†å¯æ¸¬ - Clean Architecture æ¸¬è©¦ç¯‡
&lt;/h1&gt;&lt;p&gt;Tags: Clean Architecture, Kubernetes, ithome 2020 ironman
Date: September 22, 2020&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç« åŒæ™‚ç™¼ä½ˆæ–¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY08&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github(åŒ…å«ç¨‹å¼ç¢¼)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/%E9%AB%92%E6%A1%B6%E5%AD%90/day8-%E8%AE%93%E4%BD%A0%E7%9A%84-backend-%E8%90%AC%E7%89%A9%E7%9A%86%E8%99%9B-%E8%90%AC%E4%BA%8B%E7%9A%86%E5%8F%AF%E6%B8%AC-clean-architecture-%E6%B8%AC%E8%A9%A6%E7%AF%87-324fddd7db9a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Medium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ithelp.ithome.com.tw/articles/10241698&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;iT é‚¦å¹«å¿™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ–‡ç« ç‚ºè‡ªå·±çš„ç¶“é©—èˆ‡å¤¥ä¼´æ•´ç†çš„å…§å®¹ï¼Œè¨­è¨ˆæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œå¦‚æœ‰å¯ä»¥æ”¹é€²çš„åœ°æ–¹ï¼Œè«‹å‘Šè¨´æˆ‘ï¼Œæˆ‘æœƒç›¡æˆ‘æ‰€èƒ½çš„ä¿®æ”¹ï¼Œè¬è¬å¤§å®¶ï½
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
&lt;p&gt;å¤§å®¶å¥½ï¼Œç¹¼æ˜¨å¤©&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DAY07&lt;/a&gt;çš„ä»‹ç´¹å¾Œï¼ŒClean Architecture
çš„å¨åŠ›å¤§å®¶å·²ç¶“è¦‹è­˜åˆ°äº†ï¼Œæˆ‘å€‘æœ‰è‘—&lt;code&gt;ç¨ç«‹å¯æ›¿æ›çš„å½ˆæ€§æ¶æ§‹&lt;/code&gt;ï¼Œé‚£é‚„æœ‰æ²’æœ‰ä»€éº¼å„ªé»å‘¢ï¼Ÿæœ‰çš„ï¼Œå°±æ˜¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é«˜å¯æ¸¬è©¦(Testability)æ€§&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸€å€‹ç°¡å–®çš„æ¸¬è©¦&#34;&gt;ä¸€å€‹ç°¡å–®çš„æ¸¬è©¦
&lt;/h2&gt;&lt;p&gt;ä½ å¯èƒ½åƒæˆ‘ä¸€æ¨£æ›¾ç¶“å¯«éé€™æ¨£çš„ç¨‹å¼ç¢¼:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;service&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetName&lt;/span&gt;() &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;nameService&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;service&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewNameService&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;nameService&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetName&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// ... é—œæ–¼resultçš„æ¼”ç®—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæœ‰å¤©è¦ unit test &lt;code&gt;resultçš„æ¼”ç®—&lt;/code&gt;ï¼Œå¿…é ˆè¦ä½¿&lt;code&gt;nameService.GetName()&lt;/code&gt;æœƒå›å‚³å›ºå®šå€¼ï¼Œè€Œä¸æ˜¯çœŸçš„æ‰“åˆ°å¤–éƒ¨ APIã€‚&lt;/p&gt;
&lt;p&gt;å› ç‚ºé€™æ¨£å¦‚æœæ¸¬è©¦å‡ºéŒ¯ï¼Œæˆ‘å€‘æ‰èƒ½ç²¾ç¢ºçš„èªªæ˜¯æ¼”ç®—éŒ¯èª¤äº†ï¼Œè€Œéå¤–éƒ¨ API å‡ºäº‹äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿&lt;code&gt;nameService.GetName()&lt;/code&gt;å›å‚³å›ºå®šå€¼çš„åšæ³•ç¨±ç‚º&lt;code&gt;mock&lt;/code&gt;ï¼Œå°±æ˜¯å°‡&lt;code&gt;nameService.GetName()&lt;/code&gt;æ›¿æ›æˆä¸€å€‹&lt;code&gt;æœƒå›å‚³å›ºå®šå€¼çš„æ›¿èº«&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å‰›å‰›å¾—ç¨‹å¼ç¢¼ï¼Œæˆ‘å€‘æ ¹æœ¬æ²’æœ‰æ©Ÿæœƒé€²è¡Œæ›¿æ›å‹•ä½œï¼Œå› ç‚º&lt;code&gt;nameService&lt;/code&gt;åœ¨&lt;code&gt;GetName&lt;/code&gt;è£¡é ­ç”¢ç”Ÿï¼Œå…¶å¯¦æˆ‘å€‘åªè¦åšä¸€å€‹ç°¡å–®çš„å°å‹•ä½œï¼Œå°±å¯ä»¥é¿å…é€™å€‹äº‹æƒ…ç™¼ç”Ÿï¼Œå°±æ˜¯:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°‡æ‰€éœ€çš„è®Šæ•¸ã€å¯¦é«”ã€å‡½ç¤ºå¾å¤–éƒ¨å¸¶å…¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;package&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;logic&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;service&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GetName&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;nameService&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;service&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Engine&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;nameService&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetName&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// ... é—œæ–¼resultçš„æ¼”ç®—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚£éº¼æˆ‘å€‘å°±å¯ä»¥å¾å¤–éƒ¨åšä¸€å€‹å‡çš„&lt;code&gt;nameService&lt;/code&gt;ä¸Ÿå…¥äº†ï¼Œ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;logic&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;mock&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TestGetName&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;mockNameService&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewNameService&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;logic&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetName&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mockNameService&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Equal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;result&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‘â€¦é€™ä¸å°±å–®ç´”åªæ˜¯ä¸è¦æŠŠæ±è¥¿å¯«æ­»åœ¨ function ä¸­å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å°ï¼Œå…¶å¯¦é€™å°±æ˜¯ä¾è³´æ³¨å…¥(DI)çš„ç²¾ç¥ä¹‹ä¸€ï¼Œåªä¸éç‚ºäº†è¦é¿å…çˆ†ç‚¸ï¼Œæ‰€ä»¥åˆéœ€è¦
interface å»å‘Šè¨´ä¸åŒ callerï¼Œæ­¤åƒæ•¸æœ‰å“ªäº› functionï¼Œé€™å°è‡´å…¶ä»–çš„ç†è«–ç”¢ç”Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚æœæ˜¯é€™æ¨£çš„è©±é‚£æˆ‘ä¸å°±æ¯å±¤éƒ½å¯ä»¥æ¸¬è©¦äº†&#34;&gt;å¦‚æœæ˜¯é€™æ¨£çš„è©±é‚£æˆ‘ä¸å°±æ¯å±¤éƒ½å¯ä»¥æ¸¬è©¦äº†ï¼Ÿï¼
&lt;/h2&gt;&lt;p&gt;æ˜¯çš„ï¼Œå› ç‚º:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Clean Architecture æ¯å±¤éƒ½ç”¨ä¾è³´æ³¨å…¥(DI)ï¼Œæ‰€ä»¥ä½ æ¯å±¤éƒ½å¯ä»¥æ›æˆ Mock
å¯¦é«”ä¾†æ¸¬è©¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¥ä¸‹ä¾†æˆ‘å€‘å°‡èªªæ˜æ¯å±¤æ¸¬è©¦çš„&lt;code&gt;é‡é»&lt;/code&gt;èˆ‡&lt;code&gt;ç¬¬ä¸€æ¬¡æ¸¬è©¦å¯èƒ½æœƒå›°æƒ‘çš„åœ°æ–¹&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹çš„ code å…¨éƒ¨éƒ½åœ¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/superj80820/2020-ithelp-contest/blob/master/DAY07&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github-DAY07&lt;/a&gt;ï¼Œå¯ä»¥ç›´æ¥ clone ä¸‹ä¾†åƒè€ƒå°ç…§æœƒæ¯”è¼ƒæœ‰æ„Ÿè¦ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;repository-å±¤&#34;&gt;Repository å±¤
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;context&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPostgresqlRepo&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/digimon/repository/postgresql&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;sqlmock&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;gopkg.in/DATA-DOG/go-sqlmock.v1&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/domain&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TestGetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sqlmock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;New&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!=&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Fatalf&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;an error &amp;#39;%s&amp;#39; was not expected when opening a stub database connection&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;:     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;69770f2d-933e-474d-8357-a2f8a9c874df&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:   &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Customer&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Good&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;rows&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sqlmock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewRows&lt;/span&gt;([]&lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;{&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;}).
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;AddRow&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£4 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;query&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SELECT id, name, status FROM digimons WHERE id =?&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£4 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ExpectQuery&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;query&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;WithArgs&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;69770f2d-933e-474d-8357-a2f8a9c874df&amp;#34;&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;WillReturnRows&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;rows&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£5 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonPostgresqlRepo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewpostgresqlDigimonRepository&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;db&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#a6e22e&#34;&gt;aDeit&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;d&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;TODO&lt;/span&gt;(), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;69770f2d-933e-474d-8357-a2f8a9c874df&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£5 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Equal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;aDeit&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ¸¬è©¦é‡é»: å‘¼å«å¤–éƒ¨ç‰©ä»¶çš„æ–¹å¼æ˜¯å¦æ­£ç¢ºï¼Œä¸¦éæ¸¬è©¦å¤–éƒ¨ç‰©ä»¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - go-sqlmockè£½ä½œä¸€å€‹å‡çš„mock DB&lt;/code&gt;: å¦‚é‡é»æ‰€èªªï¼Œæˆ‘å€‘ä¸¦ä¸é—œå¿ƒå¤–éƒ¨ DB çš„å¯¦éš›ç‹€æ³ï¼Œæˆ‘å€‘åªé—œå¿ƒ&lt;code&gt;çµ„å‡ºä¾†çš„SQL command&lt;/code&gt;æ˜¯å¦æ­£ç¢ºï¼Œæ‰€ä»¥å¯ä»¥ç”¨ go-sqlmock åšä¸€å€‹å‡çš„ DBã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - ç”¢ç”Ÿåœ¨mock DBéœ€è¦çš„å‡è³‡æ–™&lt;/code&gt;: æ—¢ç„¶è¦æ¸¬è©¦çš„æ˜¯&lt;code&gt;GetByID&lt;/code&gt;çš„é‚è¼¯ï¼Œé‚£å°±å¿…é ˆå…ˆç”¢ç”Ÿä¸€çµ„å‡çš„è³‡æ–™ï¼Œè®“&lt;code&gt;GetByID&lt;/code&gt;çœŸçš„æœ‰è³‡æ–™å¯ä»¥æ’ˆå–ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - å°‡å‡è³‡æ–™è½‰æ›æˆrowçš„struct&lt;/code&gt;: &lt;code&gt;è¬›è§£2&lt;/code&gt;ç”¢ç”Ÿçš„è³‡æ–™æ˜¯&lt;code&gt;domain.Digimon&lt;/code&gt;çš„ data structï¼Œæˆ‘å€‘å¿…é ˆæŠŠå®ƒè½‰æ›æˆ row çš„ data structï¼Œæ‰æœƒç¬¦åˆçœŸå¯¦å° DB å– row çš„ç‹€æ³ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£4 - é å®šmock DBæœƒæ¥æ”¶åˆ°ä½•ç¨®SQL command&lt;/code&gt;: é€™é‚Šæ˜¯é‡é»ï¼Œæˆ‘å€‘é‚„å¿…é ˆé å®šå¥½æœƒå›å‚³çš„å€¼ï¼Œmock DB åœ¨æ¥æ”¶åˆ°æ­£ç¢ºçš„ command å°±æœƒå›å‚³é å®šçš„å›å‚³å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£5 - æŠŠ mock DB ä¸Ÿå…¥å¾Œ Repository å±¤ï¼Œé©—è­‰çµæœæ˜¯å¦æ­£ç¢º&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡æ¸¬è©¦æ™‚ä½ å¯èƒ½æœƒå›°æƒ‘ï¼šã€Œæˆ‘éƒ½æŠŠ DB åšæˆå‡çš„äº†ï¼Œé‚£æˆ‘åœ¨æ¸¬è©¦ä»€éº¼ï¼Ÿã€ï¼Œç­”æ¡ˆæ˜¯&lt;code&gt;SQL commandæ˜¯å¦çµ„å°&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è«–ä½ ç”¨ gorm, SQL commandï¼Œç•¶å‚³é€²ä¾†çš„åƒæ•¸é€²è¡Œä¸€é€£ä¸²é‹ç®—å¾Œï¼Œæœ€å¾Œä¸€å®šæœƒè®Šç‚ºä¸€å€‹ SQL commandï¼Œæ‰€ä»¥å…ˆè¨­å®šå¥½ mock DB&lt;code&gt;è¦æ¥å—ä»€éº¼æ¨£çš„command&lt;/code&gt;èˆ‡&lt;code&gt;æ¥æ”¶æ­£ç¢ºä¹‹å¾Œè¦å›å‚³ä»€éº¼&lt;/code&gt;æ˜¯æ¸¬è©¦ç›®çš„ï¼Œä¸¦ä¸”æœ€å¾Œå¯ä»¥ç”¨å›å‚³çš„å€¼ä¾†é©—è­‰æ˜¯å¦æ˜¯æˆ‘å€‘ä¸€é–‹å§‹è¨­å®šå¥½çš„ä¾†é©—è­‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;usecase-å±¤&#34;&gt;Usecase å±¤
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;context&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/stretchr/testify/mock&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;errors&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;ucase&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/digimon/usecase&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/domain&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/domain/mocks&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TestGetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;mocks&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonRepository&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;:     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;2e72c27e-0feb-44e1-89ef-3d58fd30a1b3&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:   &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Metrics&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Good&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£2 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Success&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£3 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;On&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GetByID&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Anything&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MatchedBy&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;e9addf2d-8739-427a-8b30-2383b9b045b1&amp;#34;&lt;/span&gt; })).
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Return&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Once&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£4 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ucase&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewDigimonUsecase&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;TODO&lt;/span&gt;(), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;e9addf2d-8739-427a-8b30-2383b9b045b1&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£5 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NoError&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NotNil&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AssertExpectations&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Run&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Fail&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;On&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GetByID&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Anything&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;MatchedBy&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;string&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; { &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;value&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;e9addf2d-8739-427a-8b30-2383b9b045b1&amp;#34;&lt;/span&gt; })).
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;			&lt;span style=&#34;color:#a6e22e&#34;&gt;Return&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;errors&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;New&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Get error&amp;#34;&lt;/span&gt;)).&lt;span style=&#34;color:#a6e22e&#34;&gt;Once&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ucase&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewDigimonUsecase&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;u&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetByID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;context&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;TODO&lt;/span&gt;(), &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;e9addf2d-8739-427a-8b30-2383b9b045b1&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;err&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Nil&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;aDigimon&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonRepo&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;AssertExpectations&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ... å…¶ä»–ç¨‹å¼ç¢¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ¸¬è©¦é‡é»: æ¥­å‹™é‚è¼¯è·¯ç·šæ˜¯å¦é æœŸï¼Œä¸¦éæ¸¬è©¦ Repository å±¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Usecase å±¤æ²’æœ‰åƒ go-sqlmock é€™æ¨£é€šç”¨çš„ mock å¥—ä»¶å¯ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯é‚„è¨˜å¾—æœ‰ Domain å±¤å®šå¥½çš„ interface å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘å€‘å¯ä»¥ä½¿ç”¨&lt;a class=&#34;link&#34; href=&#34;https://github.com/vektra/mockery&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mockery&lt;/a&gt;ï¼Œ&lt;code&gt;ä¾ç…§å®šå¥½çš„interfaceç”Ÿç”¢å‡ºmockç‰©ä»¶&lt;/code&gt;ï¼Œä¾ç…§&lt;a class=&#34;link&#34; href=&#34;https://github.com/vektra/mockery&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mockery&lt;/a&gt;å®‰è£å¥½å¾Œ:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd go-server/domain
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ mockery --all --keeptree
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/LOx4BCl.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/LOx4BCl.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;æ­¤æ™‚æœƒå¤šå‡º mocks è³‡æ–™å¤¾ï¼Œé€™å°±æ˜¯&lt;code&gt;mock data struct&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£1 - é€émocksè³‡æ–™å¤¾ç”¢ç”ŸmockDigimonRepo&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£2 - ä¾ç…§ä¸åŒæƒ…å¢ƒå€åˆ†æ¸¬è©¦&lt;/code&gt;: Usecase å±¤æ¯”è¼ƒæœƒæœ‰ &lt;code&gt;ä¸åŒçš„ç¨‹å¼è·¯ç·š&lt;/code&gt;ç”¢ç”Ÿï¼Œä¾‹å¦‚ï¼šã€Œæ•¸ç¢¼è›‹åƒæ•¸å¦‚æœæ²’å¸¶çš„è©±ã€å¦‚æœ DB çˆ†æ‰çš„è©±ç­‰ç­‰ã€ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¾ç…§é€™äº›æƒ…å¢ƒä¾†å€åˆ†æ¸¬è©¦&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£3 - è¨­å®šmockDigimonRepoé å®šæ¥æ”¶çš„åƒæ•¸èˆ‡å›å‚³çš„è³‡æ–™&lt;/code&gt;: é€™é‚Šæ˜¯æœ€æœ‰è¶£çš„éƒ¨åˆ†ï¼Œä½ å¯ä»¥é€é&lt;code&gt;.On()&lt;/code&gt;ä¾†å®šç¾© mockDigimonRepo åœ¨ Usecase
å±¤è£¡è¢«å‘¼å«çš„æ™‚å€™é å®šè¦æ¥æ”¶ä»€éº¼ï¼Œä¸¦ä¸”å›å‚³è³‡æ–™ä¾›é‚è¼¯ç¹¼çºŒä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£4 - å°‡mockDigimonRepoä¸Ÿå…¥Usecaseå±¤ä¸¦å¯¦éš›é‹è¡Œ&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;è¬›è§£5 - é©—è­‰Usecaseå›å‚³è³‡æ–™èˆ‡mockDigimonRepoé‹è¡Œçš„çµæœ&lt;/code&gt;:
&lt;code&gt;.AssertExpectations&lt;/code&gt;è¦ç¨å¾®æ³¨æ„ä¸€ä¸‹ï¼Œä»–æ˜¯åœ¨é©—è­‰&lt;code&gt;.On()&lt;/code&gt;æ˜¯å¦çœŸçš„æœ‰è¢« call åˆ°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨&lt;code&gt;è¬›è§£3&lt;/code&gt;è™•ï¼Œæœ‰è‘—å¼·å¤§çš„åŠŸèƒ½:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.On()&lt;/code&gt;: é æœŸè¦å‘¼å«ä»€éº¼ functionã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mock.MatchedBy()&lt;/code&gt;: é æœŸåƒæ•¸è¦é•·ä»€éº¼æ¨£å­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.Return()&lt;/code&gt;: æŒ‡å®šå›å‚³å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.Once()&lt;/code&gt;: å°‡æ­¤&lt;code&gt;.On&lt;/code&gt;æ•ˆæœåªä½œç”¨ä¸€æ¬¡ï¼Œé€™å¯ä»¥ä½¿ä½ è¨­å®š&lt;code&gt;åŒå€‹function&lt;/code&gt;åœ¨&lt;code&gt;ä¸åŒæ¬¡çš„.On&lt;/code&gt;éƒ½æœ‰ä¸åŒçµæœã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.Run()&lt;/code&gt;: é›–ç„¶æ²’æœ‰å‡ºç¾åœ¨æ­¤æ¸¬è©¦ï¼Œä½†éå¸¸æœ‰ç”¨ã€‚Golang æœ‰è€…è¨±å¤š&lt;code&gt;bind(&amp;amp;body)&lt;/code&gt;çš„æŒ‡æ¨™ç¶å®šè³‡æ–™æ–¹å¼ï¼Œé€™ä¸æ˜¯ä¸€é€²ä¸€å‡ºçš„æ–¹å¼ï¼Œæ‰€ä»¥ç„¡æ³•ç”¨&lt;code&gt;.Return()&lt;/code&gt;ä¾†æŒ‡å®šçµæœã€‚è€Œ&lt;code&gt;.Run()&lt;/code&gt;å¯ä»¥æ•æ‰&lt;code&gt;bind(&amp;amp;body)&lt;/code&gt;ä¸­çš„&lt;code&gt;body&lt;/code&gt;æŒ‡æ¨™ä½ç½®ï¼Œä¸¦ä¸”ä¿®æ”¹å…¶å…§å®¹ï¼Œä»¥é”åˆ°æŒ‡å®šçµæœçš„æ•ˆæœ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€™ä½¿æ¥­å‹™é‚è¼¯&lt;code&gt;æ‰€æœ‰çš„è·¯ç·šéƒ½å¯æ¸¬è©¦åˆ°&lt;/code&gt;ï¼ŒçœŸçš„æ˜¯éå¸¸æœ‰è¶£
XDã€‚&lt;/p&gt;
&lt;h3 id=&#34;delivery-å±¤&#34;&gt;Delivery å±¤
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;import&lt;/span&gt; (
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;bytes&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;encoding/json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/domain&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/domain/mocks&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;net/http/httptest&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;testing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;digimonHandlerHttpDelivery&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;go-server/digimon/delivery/http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/stretchr/testify/assert&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;github.com/stretchr/testify/mock&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;func&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TestGetDigimonByDigimonID&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;testing&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;T&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;domain&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Digimon&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;:     &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;8c862535-6de2-4da2-ad21-c853e4343bd7&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Name&lt;/span&gt;:   &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;III&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;Status&lt;/span&gt;: &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;good&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonMarshal&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;json&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Marshal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonCase&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; new(&lt;span style=&#34;color:#a6e22e&#34;&gt;mocks&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonCase&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;On&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GetByID&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mock&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Anything&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ID&lt;/span&gt;).&lt;span style=&#34;color:#a6e22e&#34;&gt;Return&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimon&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;gin&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Default&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;digimonHandlerHttpDelivery&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonHandler&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#a6e22e&#34;&gt;DigimonUsecase&lt;/span&gt;: &lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonCase&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GET&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/api/v1/digimons/:digimonID&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;handler&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;GetDigimonByDigimonID&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// !!! è¬›è§£1 !!!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;httptest&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewRecorder&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;http&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;NewRequest&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/api/v1/digimons/8c862535-6de2-4da2-ad21-c853e4343bd7&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#66d9ef&#34;&gt;nil&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;r&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;ServeHTTP&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;req&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Equal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;200&lt;/span&gt;, &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Code&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#a6e22e&#34;&gt;assert&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Equal&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;t&lt;/span&gt;, string(&lt;span style=&#34;color:#a6e22e&#34;&gt;mockDigimonMarshal&lt;/span&gt;), &lt;span style=&#34;color:#a6e22e&#34;&gt;w&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;Body&lt;/span&gt;.&lt;span style=&#34;color:#a6e22e&#34;&gt;String&lt;/span&gt;())
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ¸¬è©¦é‡é»: Delivery å±¤æ˜¯å¦éƒ½æ­£ç¢ºæ¥æ”¶äº†å¼•æ“çš„åƒæ•¸ï¼Œä¸¦éæ¸¬è©¦ Usecase å±¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Delivery å±¤èˆ‡ Usecase å±¤æ¦‚å¿µç›¸åŒ(äº‹å¯¦ä¸Šæ¯å±¤éƒ½ç›¸åŒ)ï¼Œéƒ½æ˜¯å‰µé€ ä¸Šä¸€å±¤çš„ mock å¯¦é«”ï¼Œä¸¦å°ˆæ³¨æ¸¬è©¦æ­¤å±¤çš„é‚è¼¯ã€‚&lt;/p&gt;
&lt;p&gt;è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œæ­¤æ¸¬è©¦ä¸¦éçœŸçš„èµ·äº†ä¸€å€‹ Server ä»¥å¤–éƒ¨æ‰“ API è¿‘ä¾†çš„æ–¹å¼æ¸¬è©¦ã€‚&lt;/p&gt;
&lt;p&gt;è€Œæ˜¯åœ¨&lt;code&gt;è¬›è§£1&lt;/code&gt;è™•ä¹‹å‰è¨­å®šå¥½äº† router å¾Œï¼Œé€é&lt;code&gt;httptest.NewRecorder()&lt;/code&gt;ç”¢ç”Ÿä¸€å€‹
requestï¼Œä»¥&lt;code&gt;r.ServeHTTP(w, req)&lt;/code&gt;çš„æ–¹å¼ä¸Ÿå…¥ Golang-Gin çš„å¼•æ“ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¥½ç”¨çš„æ¸¬è©¦æŒ‡ä»¤&#34;&gt;å¥½ç”¨çš„æ¸¬è©¦æŒ‡ä»¤
&lt;/h2&gt;&lt;p&gt;ä¸€æ¬¡è·‘å…¨éƒ¨å°ˆæ¡ˆçš„æ¸¬è©¦ï¼Œä½ å¯ä»¥æŠŠæ­¤æŒ‡ä»¤æ”¾ä¸Š CIï¼Œé€™æ¨£å°±å¯ä»¥åœ¨æ¯æ¬¡ CD ä¹‹å‰ä¾†æ¸¬è©¦ä¸€ä¸‹ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd go-server
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ go test ./...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/RnuAZbr.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/RnuAZbr.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;(&lt;code&gt;cmd/main.go:31:3&lt;/code&gt;å¯ä»¥ä¸å¿…ç†æœƒï¼Œé‚£æ˜¯å› ç‚ºè®€å–&lt;code&gt;.env&lt;/code&gt;å¤±æ•—çš„å•é¡Œï¼Œä½†è·Ÿæ¸¬è©¦ç„¡é—œ)&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦æˆ‘å€‘ç¨‹å¼ä¸­æœ‰&lt;code&gt;æ²’æ¸¬åˆ°çš„è·¯ç·š&lt;/code&gt;å‘¢ï¼Ÿé€™ä¹Ÿæ˜¯å¯ä»¥é  Golang è‡ªå‹•åµæ¸¬çš„ï¼Œé‹è¡Œä»¥ä¸‹æŒ‡ä»¤:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cd go-server
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ go test -coverprofile cover.out ./...
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ go tool cover -html&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;cover.out -o cover.html
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ open cover.html
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€å¾Œæœƒé–‹å•Ÿæ­¤ html fileï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://i.imgur.com/7RJSRWG.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;https://i.imgur.com/7RJSRWG.png&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹åˆ°ä¸Šæ–¹å¯ä»¥é¡¯ç¤ºæ¸¬è©¦è¦†è“‹ç‡(å°±æ˜¯è·¯ç·šè¦†è“‹ç‡)ï¼Œè€Œä¸‹æ–¹æœƒé¡¯ç¤ºæ²’æ¸¬è©¦åˆ°çš„ codeï¼Œå¤ªç¥å¥‡å•¦ï¼&lt;/p&gt;
&lt;h2 id=&#34;åƒè€ƒ&#34;&gt;åƒè€ƒ
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/bxcodec/go-clean-arch&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;bxcodec/go-clean-arch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://medium.com/hackernoon/golang-clean-archithecture-efd6d7c43047&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Trying Clean Architecture on Golang&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/10516662/how-to-measure-code-coverage-in-golang&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;unit testing - How to measure code coverage in Golang? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/16353016/how-to-go-test-all-tests-in-my-project&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;testing - How to &lt;code&gt;go test&lt;/code&gt; all tests in my project? - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://stackoverflow.com/questions/62165773/mock-interface-method-twice-with-different-input-and-output-using-testify&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;unit testing - Mock interface method twice with different input and output
using testify - Stack Overflow&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://ncona.com/2020/02/using-testify-for-golang-tests/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Using testify for Golang tests â€“ ncona.com â€“ Learning about computers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Search</title>
        <link>http://localhost:1313/page/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/page/search/</guid>
        <description></description>
        </item>
        
    </channel>
</rss>
